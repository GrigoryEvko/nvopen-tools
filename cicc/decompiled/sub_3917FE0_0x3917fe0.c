// Function: sub_3917FE0
// Address: 0x3917fe0
//
__int64 __fastcall sub_3917FE0(__int64 a1, __int64 a2, __int64 *a3)
{
  __int64 v3; // r14
  _QWORD *v5; // rbx
  __int64 *v6; // r12
  char v7; // r13
  __int64 v8; // rax
  __int64 v9; // rax
  __int64 v10; // rbx
  __int64 v11; // r12
  __int64 v12; // rdi
  __int64 v13; // rax
  unsigned __int64 v14; // rsi
  char *v15; // r9
  char *v16; // rdi
  __int64 v17; // r10
  char *v18; // rcx
  __int64 v19; // rax
  __int64 v20; // rbx
  unsigned int v21; // edx
  __int64 v22; // r11
  __int64 v23; // rax
  __int64 *v24; // r9
  __int64 v25; // r12
  int v26; // edx
  __int64 v27; // r13
  __int64 v28; // r14
  int v29; // edx
  __int64 v30; // rdi
  unsigned int v31; // esi
  __int64 *v32; // rax
  __int64 v33; // r11
  __int64 v34; // rbx
  unsigned __int64 v35; // rbx
  unsigned __int64 v36; // rdi
  unsigned __int64 v37; // r13
  unsigned __int64 v38; // r15
  __int64 v39; // r13
  __int64 *v40; // r12
  __int64 v41; // r9
  unsigned int v42; // ebx
  unsigned int v43; // r8d
  __int64 *v44; // rax
  __int64 v45; // rdi
  unsigned int v46; // r10d
  __int64 v47; // r15
  int v48; // edi
  unsigned int v49; // r9d
  int v50; // edi
  __int64 v51; // rbx
  unsigned int v52; // esi
  __int64 *v53; // rcx
  __int64 v54; // r11
  unsigned __int64 v55; // r8
  unsigned __int64 v56; // rcx
  unsigned int v57; // esi
  __int64 v58; // rdx
  int v59; // edi
  int v60; // edi
  __int64 v61; // r9
  __int64 v62; // rsi
  int v63; // eax
  __int64 *v64; // rcx
  __int64 v65; // r8
  int v66; // eax
  unsigned int v67; // ebx
  __int64 v68; // rdi
  unsigned int v69; // eax
  unsigned __int32 v70; // ecx
  __int64 v71; // rdi
  __int64 v72; // rdi
  unsigned __int32 v73; // edx
  __int64 v74; // rdi
  unsigned int v75; // ebx
  unsigned int v76; // r15d
  unsigned int v77; // esi
  unsigned __int64 v78; // r12
  unsigned __int64 v79; // rbx
  unsigned __int64 v80; // r13
  __int64 v81; // r10
  unsigned int v82; // ecx
  __int64 *v83; // rbx
  __int64 *j; // r12
  __int64 *v85; // rsi
  __int64 *v86; // rbx
  __int64 *v87; // r12
  __int64 v88; // r15
  unsigned int v89; // eax
  __int64 *v90; // r13
  unsigned int v91; // esi
  __int64 v92; // rbx
  __int64 v93; // r8
  unsigned int v94; // edi
  _QWORD *v95; // rax
  __int64 v96; // rcx
  __int64 v97; // r15
  __int64 v98; // r12
  unsigned int v99; // eax
  __int64 v100; // rdi
  unsigned __int32 v101; // ecx
  unsigned int v102; // eax
  __int64 v103; // rdi
  unsigned __int32 v104; // ecx
  __int64 v105; // rax
  int *v106; // r14
  __int64 v107; // r15
  unsigned int v108; // eax
  __int64 v109; // rsi
  unsigned int v110; // r12d
  __int16 v111; // ax
  __int64 v112; // rdi
  __int16 v113; // bx
  unsigned __int32 v114; // eax
  __int16 v115; // bx
  __int16 v116; // dx
  __int64 v117; // rdi
  int v118; // eax
  __int64 v119; // rdi
  __int16 v120; // si
  char *v121; // r12
  __int64 *v122; // rbx
  __int64 *v123; // r13
  unsigned int v124; // eax
  __int64 v125; // rdi
  unsigned int v126; // edx
  unsigned __int32 v127; // ecx
  __int64 v128; // r15
  unsigned __int64 v129; // rax
  unsigned __int64 v130; // rax
  char v131; // dl
  bool v132; // zf
  _QWORD *v133; // rbx
  __int64 v135; // r8
  int v136; // ecx
  int v137; // r11d
  int v138; // eax
  int v139; // esi
  int v140; // esi
  __int64 v141; // r8
  __int64 *v142; // r10
  __int64 v143; // rbx
  int v144; // r11d
  __int64 v145; // rdi
  int v146; // r10d
  _QWORD *v147; // rdx
  int v148; // eax
  int v149; // ecx
  int v150; // eax
  __int64 *v151; // rax
  __int64 v152; // rbx
  __int64 k; // r13
  __int64 v154; // rsi
  int v155; // eax
  int v156; // edi
  __int64 v157; // rsi
  unsigned int v158; // eax
  __int64 v159; // r8
  int v160; // r10d
  _QWORD *v161; // r9
  int v162; // eax
  int v163; // eax
  __int64 v164; // rdi
  _QWORD *v165; // r8
  unsigned int v166; // r12d
  int v167; // r9d
  __int64 v168; // rsi
  __int64 v169; // r12
  __int64 v170; // rbx
  __int64 v171; // rdi
  unsigned __int64 v172; // rsi
  __int64 v173; // rdi
  __int64 v174; // rdi
  __int64 v175; // rdi
  unsigned int v176; // eax
  unsigned __int32 v177; // ecx
  __int64 v178; // rdi
  unsigned __int32 v179; // edx
  __int64 *v180; // r15
  __int64 *v181; // r11
  int v182; // ecx
  int v183; // eax
  __int64 v184; // rdi
  int v185; // ebx
  __int64 *v186; // r11
  __int64 *v187; // [rsp+0h] [rbp-100h]
  __int64 v188; // [rsp+8h] [rbp-F8h]
  __int64 v189; // [rsp+10h] [rbp-F0h]
  unsigned __int64 v190; // [rsp+18h] [rbp-E8h]
  __int64 v191; // [rsp+20h] [rbp-E0h]
  __int64 v192; // [rsp+28h] [rbp-D8h]
  __int64 v193; // [rsp+30h] [rbp-D0h]
  __int64 v194; // [rsp+38h] [rbp-C8h]
  __int64 v195; // [rsp+40h] [rbp-C0h]
  unsigned __int64 v196; // [rsp+48h] [rbp-B8h]
  int v197; // [rsp+50h] [rbp-B0h]
  unsigned int v198; // [rsp+54h] [rbp-ACh]
  __int64 v199; // [rsp+58h] [rbp-A8h]
  __int64 *v200; // [rsp+60h] [rbp-A0h]
  int i; // [rsp+60h] [rbp-A0h]
  unsigned __int64 v202; // [rsp+68h] [rbp-98h]
  unsigned __int64 v203; // [rsp+70h] [rbp-90h]
  unsigned int v204; // [rsp+70h] [rbp-90h]
  unsigned __int64 v205; // [rsp+78h] [rbp-88h]
  unsigned __int64 v206; // [rsp+80h] [rbp-80h]
  __int64 v207; // [rsp+80h] [rbp-80h]
  __int64 v208; // [rsp+88h] [rbp-78h]
  unsigned int v209; // [rsp+88h] [rbp-78h]
  __int64 *v210; // [rsp+90h] [rbp-70h]
  int v211; // [rsp+90h] [rbp-70h]
  __int64 v212; // [rsp+90h] [rbp-70h]
  unsigned int v213; // [rsp+90h] [rbp-70h]
  __int64 v214; // [rsp+90h] [rbp-70h]
  __int64 v215; // [rsp+90h] [rbp-70h]
  unsigned __int64 v216; // [rsp+98h] [rbp-68h]
  __int64 *v217; // [rsp+98h] [rbp-68h]
  unsigned int v218; // [rsp+98h] [rbp-68h]
  __int64 *v219; // [rsp+98h] [rbp-68h]
  int *v220; // [rsp+98h] [rbp-68h]
  _QWORD v223[3]; // [rsp+B0h] [rbp-50h] BYREF
  char v224; // [rsp+C8h] [rbp-38h] BYREF

  v3 = a1;
  v5 = *(_QWORD **)(a1 + 240);
  v193 = (*(__int64 (__fastcall **)(_QWORD *))(*v5 + 64LL))(v5);
  v189 = a1 + 216;
  v192 = v5[3] - v5[1];
  v187 = (__int64 *)(a1 + 168);
  v188 = a1 + 192;
  sub_3916950(v3, (_QWORD *)a2, v3 + 168, v3 + 192, v3 + 216);
  v6 = *(__int64 **)(a2 + 32);
  v200 = *(__int64 **)(a2 + 40);
  v191 = v200 - v6;
  v195 = *a3;
  v7 = *(_BYTE *)(*(_QWORD *)(a1 + 8) + 8LL) & 1;
  if ( v7 )
    v8 = 80LL * (unsigned int)v191 + 72;
  else
    v8 = 68LL * (unsigned int)v191 + 56;
  v199 = v8;
  v198 = 1;
  if ( *(_DWORD *)(v195 + 2064) )
  {
    if ( *(_BYTE *)(v195 + 2056) )
      v199 = v8 + 24;
    else
      v199 = v8 + 16;
    v198 = 2;
  }
  v190 = 0xAAAAAAAAAAAAAAABLL * ((__int64)(*(_QWORD *)(a2 + 112) - *(_QWORD *)(a2 + 104)) >> 3);
  if ( (_DWORD)v190 )
  {
    ++v198;
    v199 += 16;
  }
  v194 = *(_QWORD *)(a2 + 496);
  if ( !v194 )
  {
    v9 = *(_QWORD *)(a2 + 504);
    v10 = v9 + 48LL * *(unsigned int *)(a2 + 512);
    if ( v9 == v10 )
    {
      v196 = 0;
      v14 = (-(__int64)(v7 == 0) & 0xFFFFFFFFFFFFFFFCLL) + 8;
      goto LABEL_16;
    }
    v11 = *(_QWORD *)(a2 + 504);
    do
    {
      v12 = v11;
      v11 += 48;
      v13 = *(_QWORD *)(a2 + 496) + sub_3936550(v12, v3, a3);
      *(_QWORD *)(a2 + 496) = v13;
    }
    while ( v10 != v11 );
    v194 = v13;
    v6 = *(__int64 **)(a2 + 32);
    v200 = *(__int64 **)(a2 + 40);
    v7 = *(_BYTE *)(*(_QWORD *)(v3 + 8) + 8LL) & 1;
  }
  v14 = (-(__int64)(v7 == 0) & 0xFFFFFFFFFFFFFFFCLL) + 8;
  v196 = v14 * ((v14 + v194 - 1) / v14);
  if ( v196 )
  {
    ++v198;
    v199 += 16;
  }
LABEL_16:
  v197 = -1431655765
       * (((__int64)(*(_QWORD *)(v3 + 176) - *(_QWORD *)(v3 + 168)) >> 3)
        + ((__int64)(*(_QWORD *)(v3 + 200) - *(_QWORD *)(v3 + 192)) >> 3)
        + ((__int64)(*(_QWORD *)(v3 + 224) - *(_QWORD *)(v3 + 216)) >> 3));
  if ( v197 )
  {
    v198 += 2;
    v199 += 104;
  }
  v15 = *(char **)(a2 + 128);
  v16 = *(char **)(a2 + 136);
  if ( v15 != v16 )
  {
    v17 = v199;
    v18 = *(char **)(a2 + 128);
    do
    {
      v19 = *(_QWORD *)v18;
      v20 = *((_QWORD *)v18 + 1);
      if ( *(_QWORD *)v18 == v20 )
      {
        v23 = 12;
      }
      else
      {
        v21 = 12;
        do
        {
          v22 = *(_QWORD *)(v19 + 8);
          v19 += 32;
          v21 += v22 + 1;
        }
        while ( v20 != v19 );
        v23 = v21;
      }
      v18 += 24;
      v17 += (unsigned int)v14 * (unsigned int)((v14 - 1 + v23) / v14);
    }
    while ( v16 != v18 );
    v199 = v17;
    v198 = v198 - 1431655765 * ((unsigned __int64)(v16 - 24 - v15) >> 3) + 1;
  }
  v202 = v199 + (-(__int64)(v7 == 0) & 0xFFFFFFFFFFFFFFFCLL) + 32;
  if ( v200 == v6 )
  {
    v209 = 0;
    v39 = v199 + (-(__int64)(v7 == 0) & 0xFFFFFFFFFFFFFFFCLL) + 32;
    v38 = 0;
    v205 = 0;
  }
  else
  {
    v205 = 0;
    v216 = 0;
    v203 = 0;
    v24 = v6;
    v25 = v3;
    do
    {
      v26 = *(_DWORD *)(v25 + 104);
      v27 = *v24;
      v28 = 0;
      if ( v26 )
      {
        v29 = v26 - 1;
        v30 = *(_QWORD *)(v25 + 88);
        v31 = v29 & (((unsigned int)v27 >> 9) ^ ((unsigned int)v27 >> 4));
        v32 = (__int64 *)(v30 + 16LL * v31);
        v33 = *v32;
        if ( v27 == *v32 )
        {
LABEL_30:
          v28 = v32[1];
        }
        else
        {
          v150 = 1;
          while ( v33 != -8 )
          {
            v182 = v150 + 1;
            v31 = v29 & (v150 + v31);
            v32 = (__int64 *)(v30 + 16LL * v31);
            v33 = *v32;
            if ( v27 == *v32 )
              goto LABEL_30;
            v150 = v182;
          }
          v28 = 0;
        }
      }
      v210 = v24;
      v34 = sub_38D04A0(a3, *v24);
      v208 = sub_38D04E0(a3, v27);
      v35 = v28 + v34;
      v36 = v216;
      v206 = sub_39142B0(v25, v27, (__int64)a3);
      if ( v216 < v35 )
        v36 = v35;
      v216 = v36;
      if ( !(*(unsigned __int8 (__fastcall **)(__int64))(*(_QWORD *)v27 + 16LL))(v27) )
      {
        if ( v205 >= v35 )
          v35 = v205;
        v205 = v35;
        v37 = v28 + v208 + v206;
        if ( v203 >= v37 )
          v37 = v203;
        v203 = v37;
      }
      v24 = v210 + 1;
    }
    while ( v200 != v210 + 1 );
    v38 = v36;
    v3 = v25;
    v209 = ((v203 + 3) & 0xFFFFFFFC) - v203;
    v39 = v209 + v202 + v203;
  }
  sub_3914390(v3, 1u, v198, v199, (*(_BYTE *)(a2 + 484) & 2) != 0);
  sub_39145F0(v3, (char *)byte_3F871B3, 0, v191, 0, v38, v202, v205, 7u, 7u);
  v217 = *(__int64 **)(a2 + 40);
  if ( v217 != *(__int64 **)(a2 + 32) )
  {
    v40 = *(__int64 **)(a2 + 32);
    v207 = v3 + 16;
    while ( 1 )
    {
      v57 = *(_DWORD *)(v3 + 40);
      v58 = *v40;
      if ( !v57 )
        break;
      v41 = *(_QWORD *)(v3 + 24);
      v42 = ((unsigned int)v58 >> 9) ^ ((unsigned int)v58 >> 4);
      v43 = (v57 - 1) & v42;
      v44 = (__int64 *)(v41 + 32LL * v43);
      v45 = *v44;
      if ( v58 == *v44 )
      {
        v46 = (v44[2] - v44[1]) >> 4;
        v47 = v39 + 8LL * v46;
        goto LABEL_45;
      }
      v137 = 1;
      v64 = 0;
      while ( v45 != -8 )
      {
        if ( v64 || v45 != -16 )
          v44 = v64;
        v43 = (v57 - 1) & (v137 + v43);
        v180 = (__int64 *)(v41 + 32LL * v43);
        v45 = *v180;
        if ( v58 == *v180 )
        {
          v46 = (v180[2] - v180[1]) >> 4;
          v47 = v39 + 8LL * v46;
          goto LABEL_45;
        }
        ++v137;
        v64 = v44;
        v44 = (__int64 *)(v41 + 32LL * v43);
      }
      if ( !v64 )
        v64 = v44;
      v138 = *(_DWORD *)(v3 + 32);
      ++*(_QWORD *)(v3 + 16);
      v63 = v138 + 1;
      if ( 4 * v63 >= 3 * v57 )
        goto LABEL_54;
      if ( v57 - *(_DWORD *)(v3 + 36) - v63 <= v57 >> 3 )
      {
        v215 = v58;
        sub_3915DB0(v207, v57);
        v139 = *(_DWORD *)(v3 + 40);
        if ( !v139 )
        {
LABEL_237:
          ++*(_DWORD *)(v3 + 32);
          BUG();
        }
        v140 = v139 - 1;
        v141 = *(_QWORD *)(v3 + 24);
        v142 = 0;
        LODWORD(v143) = v140 & v42;
        v58 = v215;
        v144 = 1;
        v63 = *(_DWORD *)(v3 + 32) + 1;
        v64 = (__int64 *)(v141 + 32LL * (unsigned int)v143);
        v145 = *v64;
        if ( v215 != *v64 )
        {
          while ( v145 != -8 )
          {
            if ( v145 == -16 && !v142 )
              v142 = v64;
            v143 = v140 & (unsigned int)(v143 + v144);
            v64 = (__int64 *)(v141 + 32 * v143);
            v145 = *v64;
            if ( v215 == *v64 )
              goto LABEL_56;
            ++v144;
          }
          if ( v142 )
            v64 = v142;
        }
      }
LABEL_56:
      *(_DWORD *)(v3 + 32) = v63;
      if ( *v64 != -8 )
        --*(_DWORD *)(v3 + 36);
      *v64 = v58;
      v47 = v39;
      v46 = 0;
      v64[1] = 0;
      v64[2] = 0;
      v64[3] = 0;
LABEL_45:
      v48 = *(_DWORD *)(v3 + 104);
      v49 = *(_DWORD *)(v58 + 184);
      if ( v48 )
      {
        v50 = v48 - 1;
        v51 = *(_QWORD *)(v3 + 88);
        v211 = v50;
        v52 = v50 & (((unsigned int)v58 >> 9) ^ ((unsigned int)v58 >> 4));
        v53 = (__int64 *)(v51 + 16LL * v52);
        v54 = *v53;
        if ( v58 == *v53 )
        {
          v55 = v53[1] + v202;
          if ( (*(_BYTE *)(v58 + 44) & 2) == 0 )
            goto LABEL_49;
LABEL_48:
          v49 |= 0x400u;
          if ( v58 == v54 )
          {
LABEL_49:
            v56 = v53[1];
            goto LABEL_50;
          }
        }
        else
        {
          v204 = v50 & (((unsigned int)v58 >> 9) ^ ((unsigned int)v58 >> 4));
          v135 = *v53;
          for ( i = 1; ; ++i )
          {
            if ( v135 == -8 )
            {
              v211 = v50;
              LODWORD(v55) = v202;
              if ( (*(_BYTE *)(v58 + 44) & 2) != 0 )
                goto LABEL_48;
              goto LABEL_130;
            }
            v204 = v50 & (i + v204);
            v135 = *(_QWORD *)(v51 + 16LL * v204);
            if ( v58 == v135 )
              break;
          }
          v211 = v50;
          v55 = *(_QWORD *)(v51 + 16LL * v204 + 8) + v202;
          if ( (*(_BYTE *)(v58 + 44) & 2) != 0 )
            goto LABEL_48;
        }
LABEL_130:
        v136 = 1;
        while ( v54 != -8 )
        {
          v183 = v136 + 1;
          v52 = v211 & (v136 + v52);
          v53 = (__int64 *)(v51 + 16LL * v52);
          v54 = *v53;
          if ( v58 == *v53 )
            goto LABEL_49;
          v136 = v183;
        }
        v56 = 0;
      }
      else
      {
        if ( (*(_BYTE *)(v58 + 44) & 2) != 0 )
          v49 |= 0x400u;
        LODWORD(v55) = v202;
        v56 = 0;
      }
LABEL_50:
      ++v40;
      sub_3917C30(v3, a3, v58, v56, v55, v49, v39, v46);
      if ( v217 == v40 )
        goto LABEL_63;
      v39 = v47;
    }
    ++*(_QWORD *)(v3 + 16);
LABEL_54:
    v212 = v58;
    sub_3915DB0(v207, 2 * v57);
    v59 = *(_DWORD *)(v3 + 40);
    if ( !v59 )
      goto LABEL_237;
    v58 = v212;
    v60 = v59 - 1;
    v61 = *(_QWORD *)(v3 + 24);
    LODWORD(v62) = v60 & (((unsigned int)v212 >> 9) ^ ((unsigned int)v212 >> 4));
    v63 = *(_DWORD *)(v3 + 32) + 1;
    v64 = (__int64 *)(v61 + 32LL * (unsigned int)v62);
    v65 = *v64;
    if ( v212 != *v64 )
    {
      v185 = 1;
      v186 = 0;
      while ( v65 != -8 )
      {
        if ( !v186 && v65 == -16 )
          v186 = v64;
        v62 = v60 & (unsigned int)(v62 + v185);
        v64 = (__int64 *)(v61 + 32 * v62);
        v65 = *v64;
        if ( v212 == *v64 )
          goto LABEL_56;
        ++v185;
      }
      if ( v186 )
        v64 = v186;
    }
    goto LABEL_56;
  }
  LODWORD(v47) = v39;
LABEL_63:
  v66 = *(_DWORD *)(v195 + 2064);
  if ( v66 )
  {
    v67 = *(_DWORD *)(v195 + 2072) | (*(_DWORD *)(v195 + 2068) << 8) | (v66 << 16);
    if ( *(_BYTE *)(v195 + 2056) )
    {
      v173 = *(_QWORD *)(v3 + 240);
      LODWORD(v223[0]) = (unsigned int)(*(_DWORD *)(v3 + 248) - 1) < 2 ? 50 : 838860800;
      sub_16E7EE0(v173, (char *)v223, 4u);
      v174 = *(_QWORD *)(v3 + 240);
      LODWORD(v223[0]) = (unsigned int)(*(_DWORD *)(v3 + 248) - 1) < 2 ? 24 : 402653184;
      sub_16E7EE0(v174, (char *)v223, 4u);
      v175 = *(_QWORD *)(v3 + 240);
      v176 = *(_DWORD *)(v195 + 2060);
      v177 = _byteswap_ulong(v176);
      if ( (unsigned int)(*(_DWORD *)(v3 + 248) - 1) > 1 )
        v176 = v177;
      LODWORD(v223[0]) = v176;
      sub_16E7EE0(v175, (char *)v223, 4u);
      v178 = *(_QWORD *)(v3 + 240);
      v179 = _byteswap_ulong(v67);
      if ( (unsigned int)(*(_DWORD *)(v3 + 248) - 1) > 1 )
        v67 = v179;
      LODWORD(v223[0]) = v67;
      sub_16E7EE0(v178, (char *)v223, 4u);
      LODWORD(v223[0]) = 0;
      v72 = *(_QWORD *)(v3 + 240);
    }
    else
    {
      v68 = *(_QWORD *)(v3 + 240);
      v69 = dword_452FFB0[*(unsigned int *)(v195 + 2060)];
      v70 = _byteswap_ulong(v69);
      if ( (unsigned int)(*(_DWORD *)(v3 + 248) - 1) > 1 )
        v69 = v70;
      LODWORD(v223[0]) = v69;
      sub_16E7EE0(v68, (char *)v223, 4u);
      v71 = *(_QWORD *)(v3 + 240);
      LODWORD(v223[0]) = (unsigned int)(*(_DWORD *)(v3 + 248) - 1) < 2 ? 16 : 0x10000000;
      sub_16E7EE0(v71, (char *)v223, 4u);
      v72 = *(_QWORD *)(v3 + 240);
      v73 = _byteswap_ulong(v67);
      if ( (unsigned int)(*(_DWORD *)(v3 + 248) - 1) > 1 )
        v67 = v73;
      LODWORD(v223[0]) = v67;
    }
    sub_16E7EE0(v72, (char *)v223, 4u);
    v74 = *(_QWORD *)(v3 + 240);
    LODWORD(v223[0]) = 0;
    sub_16E7EE0(v74, (char *)v223, 4u);
  }
  v75 = 8 * v190 + v47;
  if ( (_DWORD)v190 )
    sub_39157D0(v3, 0x29u, v47, 8 * v190);
  if ( v196 )
    sub_39157D0(v3, 0x2Eu, v75, v196);
  if ( v197 )
  {
    v76 = 0;
    v77 = v75 + v196;
    v78 = 0xAAAAAAAAAAAAAAABLL * ((__int64)(*(_QWORD *)(v3 + 200) - *(_QWORD *)(v3 + 192)) >> 3);
    v79 = 0xAAAAAAAAAAAAAAABLL * ((__int64)(*(_QWORD *)(v3 + 176) - *(_QWORD *)(v3 + 168)) >> 3);
    v80 = 0xAAAAAAAAAAAAAAABLL * ((__int64)(*(_QWORD *)(v3 + 224) - *(_QWORD *)(v3 + 216)) >> 3);
    v81 = (__int64)(*(_QWORD *)(a2 + 88) - *(_QWORD *)(a2 + 80)) >> 4;
    v213 = v78 - 1431655765 * ((__int64)(*(_QWORD *)(v3 + 176) - *(_QWORD *)(v3 + 168)) >> 3);
    if ( (_DWORD)v81 )
      v76 = v77;
    v218 = (__int64)(*(_QWORD *)(a2 + 88) - *(_QWORD *)(a2 + 80)) >> 4;
    v82 = v78
        - 1431655765 * ((__int64)(*(_QWORD *)(v3 + 176) - *(_QWORD *)(v3 + 168)) >> 3)
        - 1431655765 * ((__int64)(*(_QWORD *)(v3 + 224) - *(_QWORD *)(v3 + 216)) >> 3);
    sub_3914920(
      v3,
      4 * v81 + v77,
      v82,
      4 * v81 + v77 + ((*(_BYTE *)(*(_QWORD *)(v3 + 8) + 8LL) & 1) == 0 ? 12 : 16) * v82,
      *(_DWORD *)(v3 + 144));
    sub_3914A80(v3, 0, v79, v79, v78, v213, v80, v76, v218);
  }
  v83 = *(__int64 **)(a2 + 136);
  for ( j = *(__int64 **)(a2 + 128); v83 != j; j += 3 )
  {
    v85 = j;
    sub_39158C0(v3, v85);
  }
  v86 = *(__int64 **)(a2 + 40);
  v87 = *(__int64 **)(a2 + 32);
  while ( v86 != v87 )
  {
    v88 = *v87++;
    sub_390B9B0(a2, *(_QWORD **)(v3 + 240), v88, a3);
    v89 = sub_39142B0(v3, v88, (__int64)a3);
    sub_16E8900(*(_QWORD *)(v3 + 240), v89);
  }
  sub_16E8900(*(_QWORD *)(v3 + 240), v209);
  v214 = v3 + 16;
  v90 = *(__int64 **)(a2 + 32);
  v219 = *(__int64 **)(a2 + 40);
  if ( v219 == v90 )
    goto LABEL_94;
  do
  {
    while ( 1 )
    {
      v91 = *(_DWORD *)(v3 + 40);
      v92 = *v90;
      if ( v91 )
        break;
      ++*(_QWORD *)(v3 + 16);
LABEL_168:
      sub_3915DB0(v214, 2 * v91);
      v155 = *(_DWORD *)(v3 + 40);
      if ( !v155 )
        goto LABEL_237;
      v156 = v155 - 1;
      v157 = *(_QWORD *)(v3 + 24);
      v158 = (v155 - 1) & (((unsigned int)v92 >> 9) ^ ((unsigned int)v92 >> 4));
      v149 = *(_DWORD *)(v3 + 32) + 1;
      v147 = (_QWORD *)(v157 + 32LL * v158);
      v159 = *v147;
      if ( v92 != *v147 )
      {
        v160 = 1;
        v161 = 0;
        while ( v159 != -8 )
        {
          if ( !v161 && v159 == -16 )
            v161 = v147;
          v158 = v156 & (v160 + v158);
          v147 = (_QWORD *)(v157 + 32LL * v158);
          v159 = *v147;
          if ( v92 == *v147 )
            goto LABEL_151;
          ++v160;
        }
        if ( v161 )
          v147 = v161;
      }
LABEL_151:
      *(_DWORD *)(v3 + 32) = v149;
      if ( *v147 != -8 )
        --*(_DWORD *)(v3 + 36);
      *v147 = v92;
      ++v90;
      v147[1] = 0;
      v147[2] = 0;
      v147[3] = 0;
      if ( v219 == v90 )
        goto LABEL_94;
    }
    v93 = *(_QWORD *)(v3 + 24);
    v94 = (v91 - 1) & (((unsigned int)v92 >> 9) ^ ((unsigned int)v92 >> 4));
    v95 = (_QWORD *)(v93 + 32LL * v94);
    v96 = *v95;
    if ( v92 == *v95 )
    {
      v97 = v95[2];
      v98 = v95[1];
      goto LABEL_87;
    }
    v146 = 1;
    v147 = 0;
    while ( 1 )
    {
      if ( v96 == -8 )
      {
        if ( !v147 )
          v147 = v95;
        v148 = *(_DWORD *)(v3 + 32);
        ++*(_QWORD *)(v3 + 16);
        v149 = v148 + 1;
        if ( 4 * (v148 + 1) >= 3 * v91 )
          goto LABEL_168;
        if ( v91 - *(_DWORD *)(v3 + 36) - v149 <= v91 >> 3 )
        {
          sub_3915DB0(v214, v91);
          v162 = *(_DWORD *)(v3 + 40);
          if ( !v162 )
            goto LABEL_237;
          v163 = v162 - 1;
          v164 = *(_QWORD *)(v3 + 24);
          v165 = 0;
          v166 = v163 & (((unsigned int)v92 >> 9) ^ ((unsigned int)v92 >> 4));
          v167 = 1;
          v149 = *(_DWORD *)(v3 + 32) + 1;
          v147 = (_QWORD *)(v164 + 32LL * v166);
          v168 = *v147;
          if ( v92 != *v147 )
          {
            while ( v168 != -8 )
            {
              if ( !v165 && v168 == -16 )
                v165 = v147;
              v166 = v163 & (v167 + v166);
              v147 = (_QWORD *)(v164 + 32LL * v166);
              v168 = *v147;
              if ( v92 == *v147 )
                goto LABEL_151;
              ++v167;
            }
            if ( v165 )
              v147 = v165;
          }
        }
        goto LABEL_151;
      }
      if ( v147 || v96 != -16 )
        v95 = v147;
      v94 = (v91 - 1) & (v146 + v94);
      v181 = (__int64 *)(v93 + 32LL * v94);
      v96 = *v181;
      if ( v92 == *v181 )
        break;
      ++v146;
      v147 = v95;
      v95 = (_QWORD *)(v93 + 32LL * v94);
    }
    v97 = v181[2];
    v98 = v181[1];
LABEL_87:
    while ( v97 != v98 )
    {
      v99 = *(_DWORD *)(v97 - 8);
      v100 = *(_QWORD *)(v3 + 240);
      v101 = _byteswap_ulong(v99);
      if ( (unsigned int)(*(_DWORD *)(v3 + 248) - 1) > 1 )
        v99 = v101;
      LODWORD(v223[0]) = v99;
      sub_16E7EE0(v100, (char *)v223, 4u);
      v102 = *(_DWORD *)(v97 - 4);
      v103 = *(_QWORD *)(v3 + 240);
      v104 = _byteswap_ulong(v102);
      if ( (unsigned int)(*(_DWORD *)(v3 + 248) - 1) > 1 )
        v102 = v104;
      v97 -= 16;
      LODWORD(v223[0]) = v102;
      sub_16E7EE0(v103, (char *)v223, 4u);
    }
    ++v90;
  }
  while ( v219 != v90 );
LABEL_94:
  v220 = *(int **)(a2 + 112);
  if ( v220 != *(int **)(a2 + 104) )
  {
    v105 = v3;
    v106 = *(int **)(a2 + 104);
    v107 = v105;
    do
    {
      v108 = sub_3913FA0(v107, *((_QWORD *)v106 + 1), a3);
      v109 = *((_QWORD *)v106 + 2);
      v110 = v108;
      if ( !v109 )
        sub_16BD130("Data region not terminated", 1u);
      v111 = sub_3913FA0(v107, v109, a3);
      v112 = *(_QWORD *)(v107 + 240);
      v113 = v111;
      v114 = _byteswap_ulong(v110);
      if ( (unsigned int)(*(_DWORD *)(v107 + 248) - 1) <= 1 )
        v114 = v110;
      v115 = v113 - v110;
      LODWORD(v223[0]) = v114;
      sub_16E7EE0(v112, (char *)v223, 4u);
      v116 = __ROL2__(v115, 8);
      v117 = *(_QWORD *)(v107 + 240);
      if ( (unsigned int)(*(_DWORD *)(v107 + 248) - 1) > 1 )
        v115 = v116;
      LOWORD(v223[0]) = v115;
      sub_16E7EE0(v117, (char *)v223, 2u);
      v118 = *v106;
      v119 = *(_QWORD *)(v107 + 240);
      v120 = __ROL2__(*v106, 8);
      if ( (unsigned int)(*(_DWORD *)(v107 + 248) - 1) > 1 )
        LOWORD(v118) = v120;
      v106 += 6;
      LOWORD(v223[0]) = v118;
      sub_16E7EE0(v119, (char *)v223, 2u);
    }
    while ( v220 != v106 );
    v3 = v107;
  }
  if ( v196 )
  {
    v169 = *(_QWORD *)(a2 + 504);
    v170 = v169 + 48LL * *(unsigned int *)(a2 + 512);
    while ( v170 != v169 )
    {
      v171 = v169;
      v169 += 48;
      sub_3936530(v171, v3, a3);
    }
    v172 = (-(__int64)((*(_BYTE *)(*(_QWORD *)(v3 + 8) + 8LL) & 1) == 0) & 0xFFFFFFFFFFFFFFFCLL) + 8;
    sub_16E8900(*(_QWORD *)(v3 + 240), v172 * ((v172 + v194 - 1) / v172) - v194);
  }
  if ( v197 )
  {
    v121 = (char *)v223;
    v122 = *(__int64 **)(a2 + 88);
    v123 = *(__int64 **)(a2 + 80);
    if ( v122 == v123 )
    {
LABEL_160:
      v151 = v187;
      v223[1] = v188;
      v223[0] = v187;
      v223[2] = v189;
      while ( 1 )
      {
        v152 = v151[1];
        for ( k = *v151; v152 != k; k += 24 )
        {
          v154 = k;
          sub_3915190(v3, v154, a3);
        }
        v121 += 8;
        if ( v121 == &v224 )
          break;
        v151 = *(__int64 **)v121;
      }
      sub_167FBC0(v3 + 112, *(_QWORD *)(v3 + 240));
      goto LABEL_125;
    }
    while ( 2 )
    {
      v128 = *v123;
      if ( *(_BYTE *)(v123[1] + 184) == 6 )
      {
        v129 = *(_QWORD *)v128 & 0xFFFFFFFFFFFFFFF8LL;
        if ( v129 )
        {
          if ( (*(_BYTE *)(v128 + 8) & 0x10) == 0 )
            goto LABEL_121;
        }
        else if ( (*(_BYTE *)(v128 + 9) & 0xC) == 8 )
        {
          *(_BYTE *)(v128 + 8) |= 4u;
          v130 = (unsigned __int64)sub_38CE440(*(_QWORD *)(v128 + 24));
          *(_QWORD *)v128 = v130 | *(_QWORD *)v128 & 7LL;
          v128 = *v123;
          if ( v130 )
          {
            v131 = *(_BYTE *)(v128 + 8);
            if ( (v131 & 0x10) == 0 )
            {
              v129 = *(_QWORD *)v128 & 0xFFFFFFFFFFFFFFF8LL;
              if ( !v129 )
              {
                v129 = 0;
                if ( (*(_BYTE *)(v128 + 9) & 0xC) == 8 )
                {
                  v184 = *(_QWORD *)(v128 + 24);
                  *(_BYTE *)(v128 + 8) = v131 | 4;
                  v129 = (unsigned __int64)sub_38CE440(v184);
                  *(_QWORD *)v128 = v129 | *(_QWORD *)v128 & 7LL;
                }
              }
LABEL_121:
              v132 = off_4CF6DB8 == (_UNKNOWN *)v129;
              v124 = -1073741824;
              if ( !v132 )
                v124 = 0x80000000;
              v125 = *(_QWORD *)(v3 + 240);
              v126 = *(_DWORD *)(v3 + 248) - 1;
LABEL_110:
              v127 = _byteswap_ulong(v124);
              if ( v126 > 1 )
                v124 = v127;
              v123 += 2;
              LODWORD(v223[0]) = v124;
              sub_16E7EE0(v125, (char *)v223, 4u);
              if ( v122 == v123 )
                goto LABEL_160;
              continue;
            }
          }
        }
      }
      break;
    }
    v124 = *(_DWORD *)(v128 + 16);
    v125 = *(_QWORD *)(v3 + 240);
    v126 = *(_DWORD *)(v3 + 248) - 1;
    goto LABEL_110;
  }
LABEL_125:
  v133 = *(_QWORD **)(v3 + 240);
  return (*(__int64 (__fastcall **)(_QWORD *))(*v133 + 64LL))(v133) + v133[3] - v133[1] - v192 - v193;
}
