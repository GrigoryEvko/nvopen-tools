// Function: sub_2970D40
// Address: 0x2970d40
//
__int64 __fastcall sub_2970D40(__int64 a1, char *a2, __int64 a3, __int64 a4, __int64 *a5, __int64 a6)
{
  __int64 v8; // r15
  __int64 v9; // rax
  __int64 v10; // rdx
  __int64 v11; // rsi
  int v12; // r9d
  unsigned int i; // eax
  __int64 v14; // rdi
  unsigned int v15; // eax
  __int64 v16; // rcx
  __int64 v17; // r8
  __int64 v18; // r9
  _QWORD *v19; // rbx
  _QWORD *v20; // r15
  unsigned __int64 v21; // rbx
  __int64 *v22; // r15
  __int64 *v23; // rax
  char v24; // bl
  __int64 v25; // r15
  __int64 v26; // rcx
  __int64 v27; // r8
  __int64 v28; // r9
  __int64 v29; // r12
  _QWORD *v31; // rbx
  _QWORD *v32; // r12
  _QWORD *v33; // rbx
  _QWORD *v34; // r12
  __int64 v35; // rcx
  _QWORD *v36; // rbx
  _QWORD *v37; // rax
  __int64 v38; // rax
  __int64 v39; // rdx
  __int64 v40; // rdi
  int v41; // r11d
  __int64 v42; // r8
  unsigned int j; // eax
  __int64 v44; // rcx
  unsigned int v45; // eax
  __int64 *v46; // rdx
  __int64 v47; // rdx
  __int64 v48; // rcx
  __int64 v49; // rsi
  __int64 v50; // rax
  __int64 v51; // r8
  __int64 v52; // rax
  __int64 *v53; // r13
  __int64 *v54; // r12
  unsigned __int8 *v55; // rdi
  unsigned __int64 v56; // rbx
  char v57; // al
  __int64 *v58; // rax
  __int64 v59; // rcx
  __int64 v60; // r14
  __int64 v61; // rax
  __int64 v62; // rdx
  __int64 v63; // r13
  _BYTE *v64; // rax
  __int64 v65; // r8
  __int64 v66; // r9
  __int64 v67; // rax
  unsigned __int64 v68; // rdx
  __int64 v69; // r12
  __int64 v70; // rdx
  __int64 v71; // rcx
  __int64 v72; // rcx
  __int64 v73; // r9
  __int64 *v74; // r14
  __int64 *v75; // rax
  _DWORD *v76; // r13
  _DWORD *v77; // r12
  __int64 v78; // rax
  __int64 *v79; // rax
  __int64 *v80; // rdx
  __int64 *v81; // rax
  unsigned __int64 v82; // rax
  __int64 v83; // rcx
  __int64 v84; // rdx
  __int64 v85; // rcx
  __int64 v86; // r8
  __int64 v87; // r9
  __int64 v88; // rcx
  const char *v89; // r10
  __int64 v90; // rdi
  __int64 v91; // rsi
  __int64 v92; // rdx
  __int64 v93; // rcx
  __int64 v94; // r8
  __int64 v95; // r9
  __int64 v96; // rdx
  __int64 v97; // rcx
  __int64 v98; // rbx
  __int64 v99; // rax
  unsigned __int64 v100; // rdx
  __int64 v101; // r12
  __int64 v102; // r14
  __int64 v103; // rbx
  __int64 v104; // rsi
  __int64 v105; // r8
  unsigned int v106; // eax
  __int64 v107; // r15
  __int64 v108; // rax
  unsigned __int64 v109; // rdx
  __int64 v110; // rax
  unsigned __int64 v111; // r12
  unsigned __int64 v112; // rax
  unsigned __int64 v113; // rax
  unsigned int v114; // eax
  _QWORD *v115; // rax
  _QWORD *k; // rdx
  char *v117; // rdx
  __int64 v118; // rcx
  __int64 v119; // r8
  __int64 v120; // r9
  __int64 *v121; // rdi
  __int64 *v122; // rbx
  __int64 *v123; // r13
  __int64 v124; // rax
  char v125; // al
  __int64 v126; // rax
  _BYTE *v127; // r13
  __int64 v128; // r9
  __int64 v129; // rax
  __int64 v130; // rcx
  __int64 v131; // r15
  __int64 v132; // r11
  int v133; // eax
  __int64 *v134; // rdx
  unsigned __int64 *v135; // rax
  int v136; // r14d
  unsigned int v137; // r15d
  unsigned int v138; // eax
  __int64 v139; // r10
  __int64 v140; // rdx
  __int64 v141; // rcx
  __int64 v142; // r8
  unsigned int v143; // eax
  __int64 v144; // r11
  __int64 v145; // rsi
  __int64 *v146; // rax
  _QWORD *v147; // rax
  int v148; // r15d
  unsigned __int16 v149; // r14
  __int64 v150; // rax
  unsigned __int64 v151; // r13
  void **v152; // r14
  unsigned __int64 *v153; // rsi
  __int64 *v154; // rcx
  __int64 v155; // r8
  __int64 v156; // r9
  __int64 v157; // rax
  __int64 v158; // rax
  __int64 *v159; // r13
  __int64 v160; // r15
  __int64 *v161; // r13
  __int64 v162; // rbx
  unsigned int v163; // esi
  __int64 *v164; // rdi
  int v165; // esi
  __int64 v166; // rax
  __int64 *v167; // r14
  __int64 *v168; // rdx
  __int64 v169; // rax
  __int64 v170; // rsi
  __int64 v171; // rdi
  unsigned __int64 **v172; // rax
  unsigned __int64 *v173; // rdx
  __int64 *v174; // rax
  __int64 *v175; // rdi
  _QWORD *v176; // rdx
  int v177; // r15d
  __int64 v178; // rax
  _BYTE *v179; // r13
  __int64 v180; // r14
  __int64 *v181; // r15
  __int64 *v182; // rbx
  __int64 v183; // rdx
  void **v184; // rsi
  __int64 *v185; // r13
  __int64 v186; // rcx
  unsigned int v187; // eax
  __int64 v188; // rbx
  unsigned int v189; // esi
  __int64 v190; // r14
  unsigned int v191; // eax
  __int64 v192; // r13
  __int64 v193; // rbx
  _QWORD *v194; // rbx
  unsigned __int64 *v195; // rsi
  __int64 v196; // r13
  char *v197; // rax
  char *v198; // r14
  __int64 v199; // rdx
  char *v200; // r13
  char v201; // al
  __int64 *v202; // r14
  __int64 *v203; // r13
  __int64 *v204; // r8
  __int64 v205; // rdx
  __int64 v206; // rdx
  __int64 v207; // r8
  __int64 v208; // rdx
  __int64 v209; // rbx
  __int64 v210; // rax
  __int64 *v211; // rdx
  unsigned __int64 v212; // rbx
  __int64 v213; // rax
  __int64 *v214; // rax
  unsigned __int64 v215; // rax
  unsigned int v216; // ecx
  unsigned int v217; // edi
  unsigned int v218; // r8d
  unsigned __int64 *v219; // r14
  __int64 v220; // rax
  int v221; // r11d
  __int64 *v222; // r10
  __int64 v223; // rsi
  unsigned __int8 *v224; // rsi
  __int64 v225; // rsi
  unsigned __int8 *v226; // rsi
  unsigned int v227; // r9d
  unsigned int v228; // esi
  unsigned int v229; // ecx
  __int64 v230; // r15
  __int64 v231; // rax
  __int64 v232; // rdx
  unsigned __int64 v233; // r15
  __int64 v234; // rax
  __int64 *v235; // rdx
  __int64 v236; // rax
  __int64 *v237; // rax
  char *v238; // rax
  int v239; // r13d
  int v240; // edx
  unsigned int v241; // eax
  __int64 v242; // r14
  __int64 v243; // r15
  unsigned int v244; // esi
  __int64 v245; // rdx
  __int64 *v246; // r13
  __int64 v247; // r13
  __int64 v248; // rax
  __int64 v249; // r13
  __int64 v250; // rax
  __int64 v251; // r12
  __int64 *v252; // rax
  __int64 *v253; // rdi
  _QWORD *v254; // rdx
  int v255; // r13d
  int v256; // eax
  unsigned int v257; // eax
  unsigned int v258; // eax
  unsigned int v259; // r13d
  int v260; // r14d
  __int64 v261; // rdx
  __int64 v262; // rdx
  __int64 v263; // rax
  int v264; // eax
  __int64 v265; // rax
  __int64 v266; // rax
  int v267; // eax
  __int64 v268; // rax
  __int64 v269; // [rsp-8h] [rbp-938h]
  __int64 *v270; // [rsp-8h] [rbp-938h]
  __int64 v271; // [rsp+8h] [rbp-928h]
  __int64 v272; // [rsp+18h] [rbp-918h]
  __int64 v273; // [rsp+30h] [rbp-900h]
  unsigned __int64 *v274; // [rsp+38h] [rbp-8F8h]
  __int64 v275; // [rsp+38h] [rbp-8F8h]
  _BYTE *v276; // [rsp+48h] [rbp-8E8h]
  unsigned __int64 v277; // [rsp+48h] [rbp-8E8h]
  unsigned __int64 v278; // [rsp+48h] [rbp-8E8h]
  __int64 v279; // [rsp+50h] [rbp-8E0h]
  __int64 v280; // [rsp+58h] [rbp-8D8h]
  __int64 *v281; // [rsp+60h] [rbp-8D0h]
  unsigned __int64 *v282; // [rsp+60h] [rbp-8D0h]
  _BYTE *v283; // [rsp+60h] [rbp-8D0h]
  __int64 v284; // [rsp+60h] [rbp-8D0h]
  __int64 v285; // [rsp+68h] [rbp-8C8h]
  __int64 v286; // [rsp+70h] [rbp-8C0h]
  __int64 v287; // [rsp+78h] [rbp-8B8h]
  __int64 v289; // [rsp+88h] [rbp-8A8h]
  __int64 *v290; // [rsp+90h] [rbp-8A0h]
  char v291; // [rsp+9Fh] [rbp-891h]
  char v292; // [rsp+A0h] [rbp-890h]
  _QWORD *v293; // [rsp+A8h] [rbp-888h]
  char v294; // [rsp+A8h] [rbp-888h]
  __int64 v295; // [rsp+A8h] [rbp-888h]
  __int64 v296; // [rsp+A8h] [rbp-888h]
  __int64 v297; // [rsp+A8h] [rbp-888h]
  __int64 *v298; // [rsp+B0h] [rbp-880h]
  __int64 v299; // [rsp+B8h] [rbp-878h]
  char v300; // [rsp+B8h] [rbp-878h]
  unsigned __int64 v301; // [rsp+B8h] [rbp-878h]
  __int64 v302; // [rsp+B8h] [rbp-878h]
  __int64 *v303; // [rsp+C0h] [rbp-870h]
  __int64 v304; // [rsp+C0h] [rbp-870h]
  __int64 v305; // [rsp+C8h] [rbp-868h]
  __int64 v306; // [rsp+D0h] [rbp-860h]
  __int64 v307; // [rsp+D8h] [rbp-858h]
  __int64 *v308; // [rsp+D8h] [rbp-858h]
  __int64 *v309; // [rsp+E0h] [rbp-850h]
  __int64 v310; // [rsp+E0h] [rbp-850h]
  __int64 *v311; // [rsp+E8h] [rbp-848h]
  __int64 v312; // [rsp+E8h] [rbp-848h]
  __int64 *v315; // [rsp+108h] [rbp-828h] BYREF
  __int64 *v316; // [rsp+110h] [rbp-820h] BYREF
  unsigned __int64 v317; // [rsp+118h] [rbp-818h]
  unsigned __int64 v318; // [rsp+120h] [rbp-810h]
  __int64 v319; // [rsp+128h] [rbp-808h]
  _BYTE *v320; // [rsp+130h] [rbp-800h] BYREF
  __int64 v321; // [rsp+138h] [rbp-7F8h]
  _BYTE v322[16]; // [rsp+140h] [rbp-7F0h] BYREF
  __int64 v323; // [rsp+150h] [rbp-7E0h] BYREF
  char *v324; // [rsp+158h] [rbp-7D8h]
  __int64 v325; // [rsp+160h] [rbp-7D0h]
  int v326; // [rsp+168h] [rbp-7C8h]
  char v327; // [rsp+16Ch] [rbp-7C4h]
  char v328; // [rsp+170h] [rbp-7C0h] BYREF
  __int64 v329; // [rsp+180h] [rbp-7B0h] BYREF
  __int64 v330; // [rsp+188h] [rbp-7A8h]
  __int64 v331; // [rsp+190h] [rbp-7A0h] BYREF
  unsigned int v332; // [rsp+198h] [rbp-798h]
  __int64 v333; // [rsp+1A0h] [rbp-790h]
  __int64 v334; // [rsp+1B0h] [rbp-780h] BYREF
  char *v335; // [rsp+1B8h] [rbp-778h]
  char v336; // [rsp+1C8h] [rbp-768h] BYREF
  char v337; // [rsp+1E8h] [rbp-748h]
  char v338; // [rsp+1F0h] [rbp-740h]
  unsigned __int64 v339; // [rsp+200h] [rbp-730h] BYREF
  char *v340; // [rsp+208h] [rbp-728h]
  char v341; // [rsp+218h] [rbp-718h] BYREF
  char v342; // [rsp+238h] [rbp-6F8h]
  char v343; // [rsp+240h] [rbp-6F0h]
  unsigned __int64 *v344; // [rsp+250h] [rbp-6E0h] BYREF
  __int64 v345; // [rsp+258h] [rbp-6D8h]
  _BYTE v346[16]; // [rsp+260h] [rbp-6D0h] BYREF
  __int16 v347; // [rsp+270h] [rbp-6C0h]
  __int64 *v348; // [rsp+2A0h] [rbp-690h] BYREF
  unsigned __int64 v349; // [rsp+2A8h] [rbp-688h]
  __int64 v350; // [rsp+2B0h] [rbp-680h] BYREF
  int v351; // [rsp+2B8h] [rbp-678h]
  char v352; // [rsp+2BCh] [rbp-674h]
  char v353; // [rsp+2C0h] [rbp-670h] BYREF
  __int64 *v354; // [rsp+300h] [rbp-630h] BYREF
  unsigned __int64 v355; // [rsp+308h] [rbp-628h]
  __int64 v356; // [rsp+310h] [rbp-620h] BYREF
  __int64 v357; // [rsp+318h] [rbp-618h] BYREF
  unsigned int v358; // [rsp+320h] [rbp-610h] BYREF
  unsigned __int64 v359; // [rsp+328h] [rbp-608h] BYREF
  __int64 v360; // [rsp+330h] [rbp-600h] BYREF
  unsigned __int64 v361; // [rsp+338h] [rbp-5F8h]
  int v362; // [rsp+344h] [rbp-5ECh]
  int v363; // [rsp+348h] [rbp-5E8h]
  char v364; // [rsp+34Ch] [rbp-5E4h]
  char v365[328]; // [rsp+350h] [rbp-5E0h] BYREF
  __int64 v366; // [rsp+498h] [rbp-498h] BYREF
  _BYTE *v367; // [rsp+4A0h] [rbp-490h]
  __int64 v368; // [rsp+4A8h] [rbp-488h]
  int v369; // [rsp+4B0h] [rbp-480h]
  char v370; // [rsp+4B4h] [rbp-47Ch]
  _BYTE v371[64]; // [rsp+4B8h] [rbp-478h] BYREF
  _BYTE *v372; // [rsp+4F8h] [rbp-438h] BYREF
  __int64 v373; // [rsp+500h] [rbp-430h]
  _BYTE v374[200]; // [rsp+508h] [rbp-428h] BYREF
  int v375; // [rsp+5D0h] [rbp-360h] BYREF
  __int64 v376; // [rsp+5D8h] [rbp-358h]
  int *v377; // [rsp+5E0h] [rbp-350h]
  int *v378; // [rsp+5E8h] [rbp-348h]
  __int64 v379; // [rsp+5F0h] [rbp-340h]
  _QWORD v380[102]; // [rsp+600h] [rbp-330h] BYREF

  v8 = *(_QWORD *)(**(_QWORD **)(a3 + 32) + 72LL);
  v9 = *(_QWORD *)(sub_22D3D20(a4, &qword_4FDBCD8, (__int64 *)a3, (__int64)a5) + 8);
  v10 = *(unsigned int *)(v9 + 88);
  v11 = *(_QWORD *)(v9 + 72);
  if ( !(_DWORD)v10 )
    goto LABEL_7;
  v12 = 1;
  for ( i = (v10 - 1)
          & (((0xBF58476D1CE4E5B9LL
             * (((unsigned int)v8 >> 9) ^ ((unsigned int)v8 >> 4)
              | ((unsigned __int64)(((unsigned int)&unk_4F82410 >> 9) ^ ((unsigned int)&unk_4F82410 >> 4)) << 32))) >> 31)
           ^ (484763065 * (((unsigned int)v8 >> 9) ^ ((unsigned int)v8 >> 4)))); ; i = (v10 - 1) & v15 )
  {
    v14 = v11 + 24LL * i;
    if ( *(_UNKNOWN **)v14 == &unk_4F82410 && v8 == *(_QWORD *)(v14 + 8) )
      break;
    if ( *(_QWORD *)v14 == -4096 && *(_QWORD *)(v14 + 8) == -4096 )
      goto LABEL_7;
    v15 = v12 + i;
    ++v12;
  }
  if ( v14 == v11 + 24 * v10 )
    goto LABEL_7;
  v35 = *(_QWORD *)(*(_QWORD *)(v14 + 16) + 24LL);
  if ( !v35 )
    goto LABEL_7;
  v36 = &v380[2];
  v380[1] = 1;
  v37 = &v380[2];
  do
  {
    *v37 = -4096;
    v37 += 2;
  }
  while ( v37 != &v380[18] );
  if ( (v380[1] & 1) == 0 )
  {
    v312 = v35;
    sub_C7D6A0(v380[2], 16LL * LODWORD(v380[3]), 8);
    v35 = v312;
  }
  v38 = *(_QWORD *)(v35 + 8);
  v39 = *(unsigned int *)(v38 + 88);
  if ( !(_DWORD)v39 )
    goto LABEL_7;
  v40 = *(_QWORD *)(v8 + 40);
  v41 = 1;
  v42 = *(_QWORD *)(v38 + 72);
  for ( j = (v39 - 1)
          & (((0xBF58476D1CE4E5B9LL
             * (((unsigned int)v40 >> 9) ^ ((unsigned int)v40 >> 4)
              | ((unsigned __int64)(((unsigned int)&unk_4F87C68 >> 9) ^ ((unsigned int)&unk_4F87C68 >> 4)) << 32))) >> 31)
           ^ (484763065 * (((unsigned int)v40 >> 9) ^ ((unsigned int)v40 >> 4)))); ; j = (v39 - 1) & v45 )
  {
    v44 = v42 + 24LL * j;
    if ( *(_UNKNOWN **)v44 == &unk_4F87C68 && v40 == *(_QWORD *)(v44 + 8) )
      break;
    if ( *(_QWORD *)v44 == -4096 && *(_QWORD *)(v44 + 8) == -4096 )
      goto LABEL_7;
    v45 = v41 + j;
    ++v41;
  }
  if ( v44 != v42 + 24 * v39 && (v126 = *(_QWORD *)(*(_QWORD *)(v44 + 16) + 24LL)) != 0 )
  {
    v380[1] = 1;
    v289 = v126 + 8;
    do
    {
      *v36 = -4096;
      v36 += 2;
    }
    while ( v36 != &v380[18] );
    if ( (v380[1] & 1) == 0 )
      sub_C7D6A0(v380[2], 16LL * LODWORD(v380[3]), 8);
  }
  else
  {
LABEL_7:
    v289 = 0;
  }
  memset(v380, 0, 0x300u);
  v311 = (__int64 *)a5[9];
  if ( v311 )
  {
    v355 = (unsigned __int64)&v357;
    v372 = v374;
    v356 = 0x1000000000LL;
    v380[1] = &v380[3];
    v380[2] = 0x1000000000LL;
    v354 = v311;
    v366 = 0;
    v367 = v371;
    v368 = 8;
    v369 = 0;
    v370 = 1;
    v373 = 0x800000000LL;
    v375 = 0;
    v376 = 0;
    v377 = &v375;
    v378 = &v375;
    v379 = 0;
    v380[0] = v311;
    sub_C8CF70((__int64)&v380[51], &v380[55], 8, (__int64)v371, (__int64)&v366);
    v380[64] = 0x800000000LL;
    v380[63] = &v380[65];
    if ( (_DWORD)v373 )
      sub_295D9F0((__int64)&v380[63], (__int64)&v372, (__int64)&v380[65], v16, v17, v18);
    if ( v376 )
    {
      v380[91] = v376;
      LODWORD(v380[90]) = v375;
      v380[92] = v377;
      v380[93] = v378;
      *(_QWORD *)(v376 + 8) = &v380[90];
      v376 = 0;
      v380[94] = v379;
      v377 = &v375;
      v378 = &v375;
      v379 = 0;
    }
    else
    {
      LODWORD(v380[90]) = 0;
      v380[91] = 0;
      v380[92] = &v380[90];
      v380[93] = &v380[90];
      v380[94] = 0;
    }
    LOBYTE(v380[95]) = 1;
    sub_295AB10(0);
    v19 = v372;
    v20 = &v372[24 * (unsigned int)v373];
    if ( v372 != (_BYTE *)v20 )
    {
      do
      {
        v20 -= 3;
        sub_D68D70(v20);
      }
      while ( v19 != v20 );
      v20 = v372;
    }
    if ( v20 != (_QWORD *)v374 )
      _libc_free((unsigned __int64)v20);
    if ( !v370 )
      _libc_free((unsigned __int64)v367);
    v21 = v355;
    v22 = (__int64 *)(v355 + 24LL * (unsigned int)v356);
    if ( (__int64 *)v355 != v22 )
    {
      do
      {
        v22 -= 3;
        sub_D68D70(v22);
      }
      while ( (__int64 *)v21 != v22 );
      v22 = (__int64 *)v355;
    }
    if ( v22 != &v357 )
      _libc_free((unsigned __int64)v22);
    if ( byte_4F8F8E8[0] )
      nullsub_390();
    v23 = 0;
    if ( LOBYTE(v380[95]) )
      v23 = v380;
    v290 = (__int64 *)a5[7];
    v311 = v23;
  }
  else
  {
    v290 = (__int64 *)a5[7];
  }
  v24 = a2[1];
  v25 = a5[6];
  v298 = (__int64 *)a5[4];
  v291 = *a2;
  v287 = *a5;
  v286 = a5[1];
  v306 = a5[3];
  v305 = a5[2];
  if ( !(unsigned __int8)sub_D4B3D0(a3) )
    goto LABEL_36;
  if ( !v24 )
    goto LABEL_33;
  v46 = **(__int64 ***)(a3 + 32);
  v348 = 0;
  v349 = (unsigned __int64)&v353;
  v303 = v46;
  v350 = 8;
  v351 = 0;
  v352 = 1;
  sub_D695C0((__int64)&v354, (__int64)&v348, v46, v26, v27, v28);
  v292 = 0;
  v273 = v25;
  v279 = a1;
LABEL_64:
  if ( v311 )
  {
    v49 = *(_QWORD *)(*v311 + 104);
    v50 = *(unsigned int *)(*v311 + 120);
    if ( (_DWORD)v50 )
    {
      v48 = ((_DWORD)v50 - 1) & (((unsigned int)v303 >> 9) ^ ((unsigned int)v303 >> 4));
      v47 = v49 + 16 * v48;
      v51 = *(_QWORD *)v47;
      if ( v303 == *(__int64 **)v47 )
      {
LABEL_67:
        if ( v47 != v49 + 16 * v50 )
        {
          v52 = *(_QWORD *)(v47 + 8);
          if ( v52 )
          {
            v47 = *(_QWORD *)(v52 + 8);
            if ( !v47 )
              BUG();
            if ( *(_BYTE *)(v47 - 48) != 28 || v52 != *(_QWORD *)(v47 + 8) )
            {
LABEL_145:
              v25 = v273;
              a1 = v279;
              goto LABEL_146;
            }
          }
        }
      }
      else
      {
        v47 = 1;
        while ( v51 != -4096 )
        {
          v227 = v47 + 1;
          v48 = ((_DWORD)v50 - 1) & (unsigned int)(v47 + v48);
          v47 = v49 + 16LL * (unsigned int)v48;
          v51 = *(_QWORD *)v47;
          if ( v303 == *(__int64 **)v47 )
            goto LABEL_67;
          v47 = v227;
        }
      }
    }
  }
  v53 = (__int64 *)v303[7];
  v54 = v303 + 6;
  if ( v303 + 6 != v53 )
  {
    while ( 1 )
    {
      v55 = (unsigned __int8 *)(v53 - 3);
      if ( !v53 )
        v55 = 0;
      if ( (unsigned __int8)sub_B46970(v55) )
        break;
      v53 = (__int64 *)v53[1];
      if ( v54 == v53 )
        goto LABEL_79;
    }
    if ( v53 != v54 )
      goto LABEL_145;
  }
LABEL_79:
  v56 = v303[6] & 0xFFFFFFFFFFFFFFF8LL;
  if ( v54 == (__int64 *)v56 )
    goto LABEL_491;
  if ( !v56 )
    BUG();
  v293 = (_QWORD *)(v56 - 24);
  if ( (unsigned int)*(unsigned __int8 *)(v56 - 24) - 30 > 0xA )
LABEL_491:
    BUG();
  v57 = *(_BYTE *)(v56 - 24);
  if ( v57 != 32 )
  {
    if ( v57 != 31
      || (*(_DWORD *)(v56 - 20) & 0x7FFFFFF) != 3
      || *sub_2958930(*(_BYTE **)(v56 - 120)) <= 0x15u
      || !(unsigned __int8)sub_29645B0((_QWORD *)a3, v293, v305, v306, (__int64)v298, v311) )
    {
      goto LABEL_145;
    }
    v82 = sub_986580((__int64)v303);
    v84 = *(_DWORD *)(v82 + 4) & 0x7FFFFFF;
    if ( (_DWORD)v84 == 3 )
      goto LABEL_128;
    v303 = *(__int64 **)(v82 - 32);
    v280 = a3 + 56;
    goto LABEL_126;
  }
  v58 = *(__int64 **)(v56 - 32);
  v276 = (_BYTE *)*v58;
  if ( *(_BYTE *)*v58 <= 0x15u || !(unsigned __int8)sub_D48480(a3, *v58, v47, v48) )
    goto LABEL_145;
  v60 = 0;
  v307 = *(_QWORD *)(v56 + 16);
  v320 = v322;
  v321 = 0x400000000LL;
  v280 = a3 + 56;
  if ( (*(_DWORD *)(v56 - 20) & 0x7FFFFFFu) >> 1 != 1 )
  {
    v299 = ((*(_DWORD *)(v56 - 20) & 0x7FFFFFFu) >> 1) - 1;
    do
    {
      v61 = 32;
      if ( (_DWORD)v60 != -2 )
        v61 = 32LL * (unsigned int)(2 * v60 + 3);
      v62 = *(_QWORD *)(v56 - 32);
      v63 = *(_QWORD *)(v62 + v61);
      if ( !(unsigned __int8)sub_B19060(v280, v63, v62, v59) )
      {
        if ( (unsigned __int8)sub_2957D10(a3, v307, v63, v59) )
        {
          v64 = (_BYTE *)sub_986580(v63);
          if ( *v64 != 36
            || (v283 = v64, (v178 = sub_AA5030(v63, 1)) == 0)
            || (v59 = (__int64)v283, v283 != (_BYTE *)(v178 - 24)) )
          {
            v67 = (unsigned int)v321;
            v59 = HIDWORD(v321);
            v68 = (unsigned int)v321 + 1LL;
            if ( v68 > HIDWORD(v321) )
            {
              sub_C8D5F0((__int64)&v320, v322, v68, 4u, v65, v66);
              v67 = (unsigned int)v321;
            }
            *(_DWORD *)&v320[4 * v67] = v60;
            LODWORD(v321) = v321 + 1;
          }
        }
      }
      ++v60;
    }
    while ( v299 != v60 );
  }
  v315 = 0;
  v317 = sub_B54550((__int64)v293, 0);
  v69 = *(_QWORD *)(*(_QWORD *)(v56 - 32) + 32LL);
  if ( !(unsigned __int8)sub_B19060(v280, v69, v70, v71) )
  {
    if ( (unsigned __int8)sub_2957D10(a3, v307, v69, v72) )
    {
      v179 = (_BYTE *)sub_986580(v69);
      if ( *v179 != 36 || (v266 = sub_AA5030(v69, 1)) == 0 || v179 != (_BYTE *)(v266 - 24) )
      {
        v315 = *(__int64 **)(*(_QWORD *)(v56 - 32) + 32LL);
        goto LABEL_98;
      }
    }
  }
  if ( (_DWORD)v321 )
  {
LABEL_98:
    if ( v311 && byte_4F8F8E8[0] )
      nullsub_390();
    if ( v315 )
    {
      v74 = sub_2958C70((__int64)v315, v306);
      if ( v74 )
      {
        v75 = (__int64 *)a3;
        if ( (__int64 *)a3 != v74 )
        {
          while ( 1 )
          {
            v75 = (__int64 *)*v75;
            if ( v74 == v75 )
              break;
            if ( !v75 )
              goto LABEL_272;
          }
        }
      }
    }
    else
    {
LABEL_272:
      v74 = (__int64 *)a3;
    }
    v76 = v320;
    v77 = &v320[4 * (unsigned int)v321];
    if ( v320 != (_BYTE *)v77 )
    {
      do
      {
        v78 = 32;
        if ( *v76 != -2 )
          v78 = 32LL * (unsigned int)(2 * *v76 + 3);
        v79 = sub_2958C70(*(_QWORD *)(*(_QWORD *)(v56 - 32) + v78), v306);
        v80 = v79;
        if ( v79 )
        {
          if ( v74 != v79 && v74 )
          {
            v81 = v74;
            while ( 1 )
            {
              v81 = (__int64 *)*v81;
              if ( v80 == v81 )
                break;
              if ( !v81 )
                goto LABEL_110;
            }
            v74 = v80;
          }
        }
        else
        {
          v74 = 0;
        }
LABEL_110:
        ++v76;
      }
      while ( v77 != v76 );
    }
    if ( v298 )
    {
      if ( v74 )
        sub_DAC210((__int64)v298, (unsigned __int64)v74);
      else
        sub_DAC8B0((__int64)v298, (_QWORD *)a3);
    }
    if ( v315 )
      sub_AC2B30(*(_QWORD *)(v56 - 32) + 32LL, 0);
    v354 = &v356;
    v355 = 0x400000000LL;
    if ( (unsigned int)v321 > 4uLL )
    {
      v251 = sub_C8D7D0((__int64)&v354, (__int64)&v356, (unsigned int)v321, 0x18u, (unsigned __int64 *)&v344, v73);
      v252 = v354;
      v253 = &v354[3 * (unsigned int)v355];
      if ( v354 != v253 )
      {
        v254 = (_QWORD *)v251;
        do
        {
          if ( v254 )
          {
            *v254 = *v252;
            v254[1] = v252[1];
            v254[2] = v252[2];
          }
          v252 += 3;
          v254 += 3;
        }
        while ( v253 != v252 );
        v253 = v354;
      }
      v255 = (int)v344;
      if ( v253 != &v356 )
        _libc_free((unsigned __int64)v253);
      v354 = (__int64 *)v251;
      HIDWORD(v355) = v255;
    }
    v337 = 0;
    v338 = 0;
    v334 = v56 - 24;
    sub_B540B0(&v334);
    v127 = &v320[4 * (unsigned int)v321];
    v301 = (unsigned __int64)v320;
    if ( v320 != v127 )
    {
      do
      {
        v136 = *((_DWORD *)v127 - 1);
        v137 = 2 * (v136 + 1);
        if ( v136 == -2 )
        {
          v344 = (unsigned __int64 *)sub_B543C0((__int64)&v334, 0);
          v129 = 32;
        }
        else
        {
          v344 = (unsigned __int64 *)sub_B543C0((__int64)&v334, v136 + 1);
          v129 = 32LL * (v137 + 1);
        }
        v130 = *(_QWORD *)(v56 - 32);
        v131 = *(_QWORD *)(v130 + 32LL * v137);
        v132 = *(_QWORD *)(v130 + v129);
        v133 = v355;
        if ( HIDWORD(v355) <= (unsigned int)v355 )
        {
          v282 = (unsigned __int64 *)v132;
          v170 = sub_C8D7D0((__int64)&v354, (__int64)&v356, 0, 0x18u, &v339, v128);
          v171 = 3LL * (unsigned int)v355;
          v172 = (unsigned __int64 **)(v171 * 8 + v170);
          if ( v171 * 8 + v170 )
          {
            v173 = v344;
            v172[2] = (unsigned __int64 *)v131;
            *v172 = v173;
            v172[1] = v282;
            v171 = 3LL * (unsigned int)v355;
          }
          v174 = v354;
          v175 = &v354[v171];
          if ( v354 != v175 )
          {
            v176 = (_QWORD *)v170;
            do
            {
              if ( v176 )
              {
                *v176 = *v174;
                v176[1] = v174[1];
                v176[2] = v174[2];
              }
              v174 += 3;
              v176 += 3;
            }
            while ( v175 != v174 );
            v175 = v354;
          }
          v177 = v339;
          if ( v175 != &v356 )
            _libc_free((unsigned __int64)v175);
          LODWORD(v355) = v355 + 1;
          v354 = (__int64 *)v170;
          HIDWORD(v355) = v177;
        }
        else
        {
          v134 = &v354[3 * (unsigned int)v355];
          if ( v134 )
          {
            v135 = v344;
            v134[1] = v132;
            v134[2] = v131;
            *v134 = (__int64)v135;
            v133 = v355;
          }
          LODWORD(v355) = v133 + 1;
        }
        v127 -= 4;
        sub_B541A0((__int64)&v334, (__int64)v293, v136);
      }
      while ( (_BYTE *)v301 != v127 );
    }
    v138 = (*(_DWORD *)(v56 - 20) & 0x7FFFFFFu) >> 1;
    if ( v138 == 1 )
    {
      if ( v315 )
        goto LABEL_235;
      v281 = *(__int64 **)(*(_QWORD *)(v56 - 32) + 32LL);
LABEL_236:
      v302 = sub_D4B130(a3);
      v146 = *(__int64 **)(a3 + 32);
      v347 = 257;
      v272 = sub_F41C30(v302, *v146, v305, v306, v311, (void **)&v344);
      v147 = (_QWORD *)sub_986580(v302);
      sub_B43D60(v147);
      sub_B43C20((__int64)&v344, v302);
      v148 = v355;
      v149 = v345;
      v274 = v344;
      v150 = sub_BD2DA0(80);
      v151 = v150;
      if ( v150 )
        sub_B53A60(v150, (__int64)v276, v272, v148, (__int64)v274, v149);
      v152 = (void **)(v151 + 48);
      v153 = *(unsigned __int64 **)(v334 + 48);
      v344 = v153;
      if ( v153 )
      {
        sub_B96E90((__int64)&v344, (__int64)v153, 1);
        if ( v152 == (void **)&v344 )
        {
          if ( v344 )
            sub_B91220((__int64)&v344, (__int64)v344);
          goto LABEL_242;
        }
        v225 = *(_QWORD *)(v151 + 48);
        if ( !v225 )
        {
LABEL_380:
          v226 = (unsigned __int8 *)v344;
          *(_QWORD *)(v151 + 48) = v344;
          if ( v226 )
            sub_B976B0((__int64)&v344, v226, v151 + 48);
          goto LABEL_242;
        }
      }
      else if ( v152 == (void **)&v344 || (v225 = *(_QWORD *)(v151 + 48)) == 0 )
      {
LABEL_242:
        v339 = v151;
        v342 = 0;
        v343 = 0;
        sub_B540B0(&v339);
        v323 = 0;
        v324 = &v328;
        v325 = 2;
        v326 = 0;
        v327 = 1;
        v329 = 0;
        v330 = 1;
        v331 = -4096;
        v333 = -4096;
        if ( v315 )
        {
          v157 = v315[2];
          if ( v157 )
          {
            while ( (unsigned __int8)(**(_BYTE **)(v157 + 24) - 30) > 0xAu )
            {
              v157 = *(_QWORD *)(v157 + 8);
              if ( !v157 )
                goto LABEL_356;
            }
            v158 = v285;
            v347 = 257;
            LOWORD(v158) = 1;
            v285 = v158;
            v159 = (__int64 *)sub_F36960((__int64)v315, (__int64 *)v315[7], v158, v305, v306, v311, (void **)&v344, 0);
            sub_2959A40((__int64)v315, (__int64)v159, v307, v302, 1);
            *sub_295E220((__int64)&v329, (__int64 *)&v315) = v159;
            v315 = v159;
            v155 = v269;
          }
          else
          {
LABEL_356:
            sub_D695C0((__int64)&v344, (__int64)&v323, v315, (__int64)v154, v155, v156);
            sub_29584C0((__int64)v315, v302);
          }
          v160 = (__int64)v354;
          v161 = &v354[3 * (unsigned int)v355];
          if ( v354 == v161 )
            goto LABEL_282;
        }
        else
        {
          v160 = (__int64)v354;
          v161 = &v354[3 * (unsigned int)v355];
          if ( v161 == v354 )
            goto LABEL_421;
        }
        v277 = v56;
        v162 = v271;
        while ( 1 )
        {
          v168 = (__int64 *)*(v161 - 2);
          v169 = v168[2];
          v316 = v168;
          if ( !v169 )
          {
LABEL_353:
            sub_D695C0((__int64)&v344, (__int64)&v323, v168, (__int64)v154, v155, v156);
            if ( (_BYTE)v347 )
              sub_29584C0((__int64)v316, v302);
            goto LABEL_253;
          }
          while ( 1 )
          {
            v154 = (__int64 *)((unsigned int)**(unsigned __int8 **)(v169 + 24) - 30);
            if ( (unsigned __int8)(**(_BYTE **)(v169 + 24) - 30) <= 0xAu )
              break;
            v169 = *(_QWORD *)(v169 + 8);
            if ( !v169 )
              goto LABEL_353;
          }
          if ( (v330 & 1) != 0 )
          {
            v165 = 1;
            v164 = &v331;
          }
          else
          {
            v163 = v332;
            v164 = (__int64 *)v331;
            if ( !v332 )
            {
              v216 = v330;
              ++v329;
              v344 = 0;
              v217 = ((unsigned int)v330 >> 1) + 1;
LABEL_358:
              v218 = 3 * v163;
              goto LABEL_359;
            }
            v165 = v332 - 1;
          }
          v155 = v165 & (((unsigned int)v168 >> 9) ^ ((unsigned int)v168 >> 4));
          v154 = &v164[2 * v155];
          v156 = *v154;
          if ( v168 != (__int64 *)*v154 )
            break;
LABEL_251:
          v166 = v154[1];
          v167 = v154 + 1;
          if ( !v166 )
            goto LABEL_364;
LABEL_252:
          *(v161 - 2) = v166;
LABEL_253:
          v161 -= 3;
          if ( (__int64 *)v160 == v161 )
          {
            v180 = (__int64)v354;
            v271 = v162;
            v56 = v277;
            v181 = &v354[3 * (unsigned int)v355];
            if ( v354 != v181 )
            {
              v182 = v181 - 3;
              do
              {
                v183 = v182[1];
                v184 = (void **)v182[2];
                v185 = v182;
                v186 = *v182;
                v182 -= 3;
                sub_B541D0((__int64)&v339, v184, v183, v186);
              }
              while ( v185 != (__int64 *)v180 );
              v56 = v277;
            }
LABEL_282:
            if ( v315 )
            {
              sub_AC2B30(*(_QWORD *)(v339 - 8) + 32LL, (__int64)v315);
              sub_B543F0((__int64)&v339, 0, v317);
              v187 = (*(_DWORD *)(v56 - 20) & 0x7FFFFFFu) >> 1;
              if ( v187 != 1 )
              {
                v278 = v56;
                v188 = 0;
                v275 = v187 - 1;
                do
                {
                  v189 = v188 + 1;
                  if ( (_DWORD)v188 == -2 )
                    v189 = 0;
                  ++v188;
                  v319 = sub_B543C0((__int64)&v334, v189);
                  sub_B541D0(
                    (__int64)&v339,
                    *(void ***)(*(_QWORD *)(v278 - 32) + 32LL * (unsigned int)(2 * v188)),
                    v272,
                    v319);
                }
                while ( v275 != v188 );
                v56 = v278;
              }
              goto LABEL_289;
            }
LABEL_421:
            if ( !BYTE4(v317) )
            {
              if ( v281 )
              {
                v256 = *(_DWORD *)(v56 - 20);
                v190 = *(_QWORD *)(v56 + 16);
                v193 = 1;
                v257 = (v256 & 0x7FFFFFFu) >> 1;
                v192 = v257 - 1;
                if ( v257 == 1 )
                  goto LABEL_295;
                goto LABEL_294;
              }
              goto LABEL_300;
            }
            v239 = v317;
            v240 = v317;
            v241 = (*(_DWORD *)(v56 - 20) & 0x7FFFFFFu) >> 1;
            v242 = v241 - 1;
            if ( v241 != 1 )
            {
              v243 = 0;
              do
              {
                v244 = v243 + 1;
                if ( (_DWORD)v243 == -2 )
                  v244 = 0;
                ++v243;
                v344 = (unsigned __int64 *)sub_B543C0((__int64)&v334, v244);
                v239 += (int)v344;
              }
              while ( v242 != v243 );
              v240 = v239;
            }
            LODWORD(v344) = v240;
            BYTE4(v344) = 1;
            sub_B543F0((__int64)&v339, 0, (unsigned __int64)v344);
LABEL_289:
            if ( !v281 )
            {
              if ( v315 )
              {
                v258 = (*(_DWORD *)(v56 - 20) & 0x7FFFFFFu) >> 1;
                v259 = v258 - 1;
                v260 = v258 - 2;
                if ( v258 )
                {
                  v261 = 32LL * (2 * v259 + 1);
                }
                else
                {
                  v259 = 0;
                  v261 = 32;
                }
                sub_AC2B30(*(_QWORD *)(v56 - 32) + 32LL, *(_QWORD *)(*(_QWORD *)(v56 - 32) + v261));
                v318 = sub_B543C0((__int64)&v334, v259);
                sub_B543F0((__int64)&v334, 0, v318);
                sub_B541A0((__int64)&v334, (__int64)v293, v260);
              }
              goto LABEL_300;
            }
            v190 = *(_QWORD *)(v56 + 16);
            v191 = (*(_DWORD *)(v56 - 20) & 0x7FFFFFFu) >> 1;
            v192 = v191 - 1;
            if ( v191 == 1 )
              goto LABEL_295;
            v193 = 1;
            if ( v315 )
            {
              if ( v192 != 1 )
                goto LABEL_293;
              goto LABEL_295;
            }
LABEL_294:
            while ( 1 )
            {
              sub_AA5980((__int64)v281, v190, 1u);
              if ( v193 == v192 )
                break;
LABEL_293:
              ++v193;
            }
LABEL_295:
            sub_B43C20((__int64)&v344, v190);
            v194 = sub_F340F0((__int64)v281, (__int64)v344, v345);
            v195 = *(unsigned __int64 **)(v334 + 48);
            v344 = v195;
            if ( !v195 )
            {
              v196 = (__int64)(v194 + 6);
              if ( v194 + 6 == &v344 )
                goto LABEL_299;
              v223 = v194[6];
              if ( !v223 )
                goto LABEL_299;
LABEL_375:
              sub_B91220(v196, v223);
              goto LABEL_376;
            }
            v196 = (__int64)(v194 + 6);
            sub_B96E90((__int64)&v344, (__int64)v195, 1);
            if ( v194 + 6 == &v344 )
            {
              if ( v344 )
                sub_B91220((__int64)&v344, (__int64)v344);
              goto LABEL_299;
            }
            v223 = v194[6];
            if ( v223 )
              goto LABEL_375;
LABEL_376:
            v224 = (unsigned __int8 *)v344;
            v194[6] = v344;
            if ( v224 )
              sub_B976B0((__int64)&v344, v224, v196);
LABEL_299:
            sub_B54390((__int64)&v334);
LABEL_300:
            v345 = 0x400000000LL;
            v197 = v324;
            v344 = (unsigned __int64 *)v346;
            if ( v327 )
              v198 = &v324[8 * HIDWORD(v325)];
            else
              v198 = &v324[8 * (unsigned int)v325];
            if ( v324 != v198 )
            {
              while ( 1 )
              {
                v199 = *(_QWORD *)v197;
                v200 = v197;
                if ( *(_QWORD *)v197 < 0xFFFFFFFFFFFFFFFELL )
                  break;
                v197 += 8;
                if ( v198 == v197 )
                  goto LABEL_305;
              }
              if ( v197 != v198 )
              {
                v228 = 4;
                v229 = 0;
                while ( 1 )
                {
                  v230 = v199;
                  v231 = v199;
                  v232 = v229;
                  v233 = v230 & 0xFFFFFFFFFFFFFFFBLL;
                  v234 = v231 | 4;
                  if ( (unsigned __int64)v229 + 1 > v228 )
                  {
                    v295 = v234;
                    sub_C8D5F0((__int64)&v344, v346, v229 + 1LL, 0x10u, v155, v156);
                    v232 = (unsigned int)v345;
                    v234 = v295;
                  }
                  v235 = (__int64 *)&v344[2 * v232];
                  v235[1] = v234;
                  *v235 = v307;
                  LODWORD(v345) = v345 + 1;
                  v236 = (unsigned int)v345;
                  if ( (unsigned __int64)(unsigned int)v345 + 1 > HIDWORD(v345) )
                  {
                    sub_C8D5F0((__int64)&v344, v346, (unsigned int)v345 + 1LL, 0x10u, v155, v156);
                    v236 = (unsigned int)v345;
                  }
                  v237 = (__int64 *)&v344[2 * v236];
                  v237[1] = v233;
                  *v237 = v302;
                  v229 = v345 + 1;
                  v238 = v200 + 8;
                  LODWORD(v345) = v345 + 1;
                  if ( v200 + 8 == v198 )
                    break;
                  while ( 1 )
                  {
                    v199 = *(_QWORD *)v238;
                    v200 = v238;
                    if ( *(_QWORD *)v238 < 0xFFFFFFFFFFFFFFFELL )
                      break;
                    v238 += 8;
                    if ( v198 == v238 )
                      goto LABEL_305;
                  }
                  if ( v198 == v238 )
                    break;
                  v228 = HIDWORD(v345);
                }
              }
            }
LABEL_305:
            v201 = v330 & 1;
            if ( !((unsigned int)v330 >> 1) )
            {
              if ( v201 )
              {
                v245 = 4;
                v246 = &v331;
              }
              else
              {
                v246 = (__int64 *)v331;
                v245 = 2LL * v332;
              }
              v203 = &v246[v245];
              v202 = v203;
              goto LABEL_311;
            }
            if ( v201 )
            {
              v202 = &v334;
              v203 = &v331;
              do
              {
LABEL_308:
                if ( *v203 != -4096 && *v203 != -8192 )
                  break;
                v203 += 2;
              }
              while ( v203 != v202 );
LABEL_311:
              if ( !v201 )
              {
                v204 = (__int64 *)v331;
                v205 = v332;
                goto LABEL_313;
              }
              v206 = 4;
              v204 = &v331;
            }
            else
            {
              v205 = v332;
              v204 = (__int64 *)v331;
              v203 = (__int64 *)v331;
              v202 = (__int64 *)(v331 + 16LL * v332);
              if ( (__int64 *)v331 != v202 )
                goto LABEL_308;
LABEL_313:
              v206 = 2 * v205;
            }
            v207 = (__int64)&v204[v206];
            v208 = (unsigned int)v345;
            if ( (__int64 *)v207 != v203 )
            {
              do
              {
                v209 = v203[1];
                v210 = *v203 | 4;
                if ( v208 + 1 > (unsigned __int64)HIDWORD(v345) )
                {
                  v284 = v207;
                  v297 = *v203 | 4;
                  sub_C8D5F0((__int64)&v344, v346, v208 + 1, 0x10u, v207, v156);
                  v208 = (unsigned int)v345;
                  v207 = v284;
                  v210 = v297;
                }
                v211 = (__int64 *)&v344[2 * v208];
                v212 = v209 & 0xFFFFFFFFFFFFFFFBLL;
                *v211 = v307;
                v211[1] = v210;
                LODWORD(v345) = v345 + 1;
                v213 = (unsigned int)v345;
                if ( (unsigned __int64)(unsigned int)v345 + 1 > HIDWORD(v345) )
                {
                  v296 = v207;
                  sub_C8D5F0((__int64)&v344, v346, (unsigned int)v345 + 1LL, 0x10u, v207, v156);
                  v213 = (unsigned int)v345;
                  v207 = v296;
                }
                v214 = (__int64 *)&v344[2 * v213];
                *v214 = v302;
                v214[1] = v212;
                v208 = (unsigned int)(v345 + 1);
                LODWORD(v345) = v345 + 1;
                do
                  v203 += 2;
                while ( v203 != v202 && (*v203 == -4096 || *v203 == -8192) );
              }
              while ( v203 != (__int64 *)v207 );
            }
            if ( v311 )
            {
              sub_D75690(v311, v344, v208, v305, 1);
              if ( byte_4F8F8E8[0] )
                nullsub_390();
              sub_2963C70(a3, v272, v305, v306, v311, (__int64)v298);
              if ( byte_4F8F8E8[0] )
                nullsub_390();
            }
            else
            {
              sub_B26780(v305, v344, v208);
              sub_2963C70(a3, v272, v305, v306, 0, (__int64)v298);
            }
            if ( v344 != (unsigned __int64 *)v346 )
              _libc_free((unsigned __int64)v344);
            if ( (v330 & 1) == 0 )
              sub_C7D6A0(v331, 16LL * v332, 8);
            if ( !v327 )
              _libc_free((unsigned __int64)v324);
            if ( v343 )
            {
              v249 = v339;
              v250 = sub_B53F50((__int64)&v339);
              sub_B99FD0(v249, 2u, v250);
            }
            if ( v342 && v340 != &v341 )
              _libc_free((unsigned __int64)v340);
            if ( v338 )
            {
              v247 = v334;
              v248 = sub_B53F50((__int64)&v334);
              sub_B99FD0(v247, 2u, v248);
            }
            if ( v337 && v335 != &v336 )
              _libc_free((unsigned __int64)v335);
            if ( v354 != &v356 )
              _libc_free((unsigned __int64)v354);
            if ( v320 != v322 )
              _libc_free((unsigned __int64)v320);
            v215 = sub_986580((__int64)v303);
            if ( *(_BYTE *)v215 != 31 || (v84 = *(_DWORD *)(v215 + 4) & 0x7FFFFFF, (_DWORD)v84 == 3) )
            {
LABEL_128:
              a1 = v279;
              if ( !v352 )
                _libc_free(v349);
              goto LABEL_130;
            }
            v303 = *(__int64 **)(v215 - 32);
LABEL_126:
            if ( !(unsigned __int8)sub_B19060(v280, (__int64)v303, v84, v83) )
              goto LABEL_128;
            sub_D695C0((__int64)&v354, (__int64)&v348, v303, v85, v86, v87);
            v292 = v358;
            if ( !(_BYTE)v358 )
              goto LABEL_128;
            goto LABEL_64;
          }
        }
        v221 = 1;
        v222 = 0;
        while ( v156 != -4096 )
        {
          if ( v156 != -8192 || v222 )
            v154 = v222;
          v155 = v165 & (unsigned int)(v221 + v155);
          v156 = v164[2 * (unsigned int)v155];
          if ( v168 == (__int64 *)v156 )
          {
            v154 = &v164[2 * (unsigned int)v155];
            goto LABEL_251;
          }
          ++v221;
          v222 = v154;
          v154 = &v164[2 * (unsigned int)v155];
        }
        v218 = 6;
        v163 = 2;
        if ( !v222 )
          v222 = v154;
        v216 = v330;
        ++v329;
        v344 = (unsigned __int64 *)v222;
        v217 = ((unsigned int)v330 >> 1) + 1;
        if ( (v330 & 1) == 0 )
        {
          v163 = v332;
          goto LABEL_358;
        }
LABEL_359:
        if ( v218 <= 4 * v217 )
        {
          v163 *= 2;
        }
        else if ( v163 - HIDWORD(v330) - v217 > v163 >> 3 )
        {
LABEL_361:
          v219 = v344;
          LODWORD(v330) = (2 * (v216 >> 1) + 2) | v216 & 1;
          if ( *v344 != -4096 )
            --HIDWORD(v330);
          *v344 = (unsigned __int64)v168;
          v167 = (__int64 *)(v219 + 1);
          *v167 = 0;
LABEL_364:
          LOWORD(v162) = 1;
          v347 = 257;
          v220 = sub_F36960((__int64)v316, (__int64 *)v316[7], v162, v305, v306, v311, (void **)&v344, 0);
          *v167 = v220;
          sub_2959A40((__int64)v316, v220, v307, v302, 1);
          v166 = *v167;
          v154 = v270;
          goto LABEL_252;
        }
        sub_295DE30((__int64)&v329, v163);
        sub_295D070((__int64)&v329, (__int64 *)&v316, &v344);
        v168 = v316;
        v216 = v330;
        goto LABEL_361;
      }
      sub_B91220(v151 + 48, v225);
      goto LABEL_380;
    }
    v139 = v138 - 1;
    v140 = v139 - 1;
    if ( (v139 - 1) >> 2 )
    {
      v141 = *(_QWORD *)(v56 - 32);
      v142 = 2;
      v140 = 1;
      v143 = 5;
      while ( 1 )
      {
        v145 = *(_QWORD *)(v141 + 96);
        if ( v145 != *(_QWORD *)(v141 + 32LL * v143) )
          goto LABEL_231;
        v144 = v142;
        if ( v145 != *(_QWORD *)(v141 + 32LL * (v143 + 2)) )
          goto LABEL_232;
        v144 = v140 + 2;
        if ( v145 != *(_QWORD *)(v141 + 32LL * (v143 + 4)) )
          goto LABEL_232;
        v144 = v140 + 3;
        if ( v145 != *(_QWORD *)(v141 + 32LL * (v143 + 6)) )
          goto LABEL_232;
        v140 += 4;
        v143 += 8;
        v142 += 4;
        if ( v140 == 4 * ((v139 - 1) >> 2) + 1 )
        {
          v263 = v139 - v140;
          if ( v139 - v140 == 2 )
            goto LABEL_481;
          if ( v263 == 3 )
            goto LABEL_474;
          if ( v263 != 1 )
            goto LABEL_398;
          v264 = v140;
          goto LABEL_464;
        }
      }
    }
    switch ( v139 )
    {
      case 3LL:
        v141 = *(_QWORD *)(v56 - 32);
        v140 = 1;
LABEL_481:
        v267 = v140;
        break;
      case 4LL:
        v141 = *(_QWORD *)(v56 - 32);
        v140 = 1;
LABEL_474:
        if ( *(_QWORD *)(v141 + 96) != *(_QWORD *)(v141 + 32LL * (unsigned int)(2 * v140 + 3)) )
        {
LABEL_231:
          v144 = v140;
          goto LABEL_232;
        }
        v267 = ++v140;
        if ( v140 == 4294967294LL )
        {
          v144 = 4294967294LL;
          v268 = 32;
LABEL_477:
          if ( *(_QWORD *)(v141 + 96) != *(_QWORD *)(v141 + v268) )
            goto LABEL_232;
          v144 = v140 + 1;
          v264 = v140 + 1;
          if ( v140 == 4294967293LL )
          {
            v265 = 32;
LABEL_465:
            if ( *(_QWORD *)(v141 + 96) == *(_QWORD *)(v141 + v265) )
            {
LABEL_398:
              v281 = *(__int64 **)(v141 + 96);
              if ( !v315 )
              {
LABEL_234:
                if ( *(__int64 **)(v141 + 32) == v281 )
                  goto LABEL_236;
                goto LABEL_235;
              }
              goto LABEL_236;
            }
LABEL_232:
            if ( v139 != v144 )
            {
              v281 = v315;
              if ( !v315 )
                goto LABEL_234;
LABEL_235:
              v281 = 0;
              goto LABEL_236;
            }
            goto LABEL_398;
          }
          ++v140;
LABEL_464:
          v144 = v140;
          v265 = 32LL * (unsigned int)(2 * v264 + 3);
          goto LABEL_465;
        }
        break;
      case 2LL:
        v141 = *(_QWORD *)(v56 - 32);
        v264 = 1;
        goto LABEL_464;
      default:
        v141 = *(_QWORD *)(v56 - 32);
        goto LABEL_398;
    }
    v144 = v140;
    v268 = 32LL * (unsigned int)(2 * v267 + 3);
    goto LABEL_477;
  }
  v25 = v273;
  a1 = v279;
  if ( v320 != v322 )
    _libc_free((unsigned __int64)v320);
LABEL_146:
  if ( !v352 )
    _libc_free(v349);
  if ( v292 )
  {
LABEL_130:
    v88 = 14;
    v89 = "<unnamed loop>";
    v90 = **(_QWORD **)(a3 + 32);
    if ( v90 && (*(_BYTE *)(v90 + 7) & 0x10) != 0 )
    {
      v89 = sub_BD5D20(v90);
      v88 = v262;
    }
    v91 = a6;
    sub_2965DD0(a3, a6, (__int64)v89, v88, 1, 0, 0, 0, 0);
    goto LABEL_134;
  }
LABEL_33:
  if ( !(_BYTE)qword_50065C8 && !v291 )
    goto LABEL_36;
  v29 = *(_QWORD *)(**(_QWORD **)(a3 + 32) + 72LL);
  if ( (unsigned __int8)sub_B2D610(v29, 47) )
    goto LABEL_36;
  v300 = sub_B2D610(v29, 18);
  if ( v300 )
    goto LABEL_36;
  if ( v289 && *(_QWORD *)(v289 + 8) && v290 )
  {
    v98 = a3;
    while ( 1 )
    {
      v99 = sub_FDD2C0(v290, **(_QWORD **)(v98 + 32), 0);
      v355 = v100;
      v354 = (__int64 *)v99;
      if ( !(_BYTE)v100 || !sub_D84450(v289, (unsigned __int64)v354) )
        break;
      v98 = *(_QWORD *)v98;
      if ( !v98 )
      {
        v355 = 0x400000000LL;
        v354 = &v356;
        sub_2957A00((__int64)&v354, (char *)&v356, *(_QWORD *)(a3 + 8), *(_QWORD *)(a3 + 16), v105);
        v106 = v355;
        if ( !(_DWORD)v355 )
        {
LABEL_402:
          if ( v354 != &v356 )
            _libc_free((unsigned __int64)v354);
          goto LABEL_36;
        }
        v310 = v25;
        while ( 1 )
        {
          v107 = v354[v106 - 1];
          LODWORD(v355) = v106 - 1;
          v108 = sub_FDD2C0(v290, **(_QWORD **)(v107 + 32), 0);
          v349 = v109;
          v348 = (__int64 *)v108;
          if ( !(_BYTE)v109 || !sub_D84450(v289, (unsigned __int64)v348) )
            break;
          sub_2957A00(
            (__int64)&v354,
            (char *)&v354[(unsigned int)v355],
            *(_QWORD *)(v107 + 8),
            *(_QWORD *)(v107 + 16),
            *(_QWORD *)(v107 + 16));
          v106 = v355;
          if ( !(_DWORD)v355 )
            goto LABEL_402;
        }
        v25 = v310;
        if ( v354 != &v356 )
          _libc_free((unsigned __int64)v354);
        break;
      }
    }
  }
  v294 = sub_D49210(a3);
  if ( !v294 )
  {
LABEL_36:
    *(_BYTE *)(a1 + 28) = 1;
    *(_QWORD *)(a1 + 8) = a1 + 32;
    *(_QWORD *)a1 = 0;
    *(_QWORD *)(a1 + 16) = 2;
    *(_DWORD *)(a1 + 24) = 0;
    *(_QWORD *)(a1 + 48) = 0;
    *(_QWORD *)(a1 + 56) = a1 + 80;
    *(_QWORD *)(a1 + 64) = 2;
    *(_DWORD *)(a1 + 72) = 0;
    *(_BYTE *)(a1 + 76) = 1;
    sub_AE6EC0(a1, (__int64)&qword_4F82400);
    goto LABEL_37;
  }
  v308 = *(__int64 **)(a3 + 40);
  if ( *(__int64 **)(a3 + 32) != v308 )
  {
    v309 = *(__int64 **)(a3 + 32);
    v304 = a1;
    while ( 1 )
    {
      v101 = *v309;
      v102 = *(_QWORD *)(*v309 + 56);
      v103 = *v309 + 48;
      if ( v102 != v103 )
        break;
LABEL_176:
      if ( v308 == ++v309 )
      {
        a1 = v304;
        v110 = *(_QWORD *)(a3 + 32);
        v308 = *(__int64 **)(a3 + 40);
        goto LABEL_178;
      }
    }
    while ( 1 )
    {
      if ( !v102 )
        BUG();
      if ( *(_BYTE *)(*(_QWORD *)(v102 - 16) + 8LL) == 11 && (unsigned __int8)sub_B463C0(v102 - 24, v101) )
        break;
      if ( (unsigned __int8)(*(_BYTE *)(v102 - 24) - 34) <= 0x33u )
      {
        v104 = 0x8000000000041LL;
        if ( _bittest64(&v104, (unsigned int)*(unsigned __int8 *)(v102 - 24) - 34) )
        {
          if ( (unsigned __int8)sub_DF99B0(v25, v102 - 24) )
            break;
        }
      }
      v102 = *(_QWORD *)(v102 + 8);
      if ( v103 == v102 )
        goto LABEL_176;
    }
    a1 = v304;
    goto LABEL_36;
  }
  v110 = *(_QWORD *)(a3 + 40);
LABEL_178:
  v355 = 0;
  v354 = (__int64 *)a3;
  v111 = (unsigned int)(((__int64)v308 - v110) >> 3);
  v112 = ((((v111 | (v111 >> 1)) >> 2) | v111 | (v111 >> 1)) >> 4) | ((v111 | (v111 >> 1)) >> 2) | v111 | (v111 >> 1);
  v113 = (((v112 >> 8) | v112) >> 16) | (v112 >> 8) | v112;
  if ( (_DWORD)v113 == -1 )
  {
    v358 = 0;
    goto LABEL_459;
  }
  v114 = sub_AF1560(4 * ((int)v113 + 1) / 3u + 1);
  v358 = v114;
  if ( !v114 )
  {
LABEL_459:
    v356 = 0;
    v357 = 0;
    goto LABEL_185;
  }
  v115 = (_QWORD *)sub_C7D670(16LL * v114, 8);
  v357 = 0;
  v356 = (__int64)v115;
  for ( k = &v115[2 * v358]; k != v115; v115 += 2 )
  {
    if ( v115 )
      *v115 = -4096;
  }
  v111 = (unsigned int)((__int64)(*(_QWORD *)(a3 + 40) - *(_QWORD *)(a3 + 32)) >> 3);
LABEL_185:
  v359 = 0;
  v360 = 0;
  v361 = 0;
  sub_D4ACD0((__int64)&v359, v111);
  sub_D4E470((__int64 *)&v354, v306);
  if ( !(unsigned __int8)sub_DFEF30((__int64)&v354, v306, v117, v118, v119, v120) )
  {
    v349 = 0x400000000LL;
    v348 = &v350;
    sub_D474A0(a3, (__int64)&v348);
    v121 = v348;
    v122 = &v348[(unsigned int)v349];
    v123 = v348;
    if ( v348 == v122 )
    {
LABEL_192:
      v300 = v294;
    }
    else
    {
      while ( 1 )
      {
        v124 = sub_AA4FF0(*v123);
        if ( !v124 )
          BUG();
        v125 = *(_BYTE *)(v124 - 24);
        if ( v125 == 39 || v125 == 80 )
          break;
        if ( v122 == ++v123 )
        {
          v121 = v348;
          goto LABEL_192;
        }
      }
      v300 = 0;
      v121 = v348;
    }
    if ( v121 != &v350 )
      _libc_free((unsigned __int64)v121);
  }
  if ( v359 )
    j_j___libc_free_0(v359);
  sub_C7D6A0(v356, 16LL * v358, 8);
  if ( !v300 )
    goto LABEL_36;
  v91 = v305;
  if ( !(unsigned __int8)sub_296DE40(a3, v305, v306, v286, v287, v25, v298, v311, a6) )
    goto LABEL_36;
LABEL_134:
  if ( a5[9] && byte_4F8F8E8[0] )
  {
    v91 = 0;
    nullsub_390();
  }
  sub_22D0390((__int64)&v354, v91, v92, v93, v94, v95);
  if ( a5[9] )
  {
    sub_25DDDB0((__int64)&v360, (__int64)&unk_4F8F810);
    if ( v362 != v363 || !(unsigned __int8)sub_B19060((__int64)&v354, (__int64)&qword_4F82400, v96, v97) )
      sub_AE6EC0((__int64)&v354, (__int64)&unk_4F8F810);
  }
  sub_C8CF70(a1, (void *)(a1 + 32), 2, (__int64)&v358, (__int64)&v354);
  sub_C8CF70(a1 + 48, (void *)(a1 + 80), 2, (__int64)v365, (__int64)&v360);
  if ( !v364 )
    _libc_free(v361);
  if ( !BYTE4(v357) )
    _libc_free(v355);
LABEL_37:
  if ( LOBYTE(v380[95]) )
  {
    LOBYTE(v380[95]) = 0;
    sub_295AB10((_QWORD *)v380[91]);
    v31 = (_QWORD *)v380[63];
    v32 = (_QWORD *)(v380[63] + 24LL * LODWORD(v380[64]));
    if ( (_QWORD *)v380[63] != v32 )
    {
      do
      {
        v32 -= 3;
        sub_D68D70(v32);
      }
      while ( v31 != v32 );
      v32 = (_QWORD *)v380[63];
    }
    if ( v32 != &v380[65] )
      _libc_free((unsigned __int64)v32);
    if ( !BYTE4(v380[54]) )
      _libc_free(v380[52]);
    v33 = (_QWORD *)v380[1];
    v34 = (_QWORD *)(v380[1] + 24LL * LODWORD(v380[2]));
    if ( (_QWORD *)v380[1] != v34 )
    {
      do
      {
        v34 -= 3;
        sub_D68D70(v34);
      }
      while ( v33 != v34 );
      v34 = (_QWORD *)v380[1];
    }
    if ( v34 != &v380[3] )
      _libc_free((unsigned __int64)v34);
  }
  return a1;
}
