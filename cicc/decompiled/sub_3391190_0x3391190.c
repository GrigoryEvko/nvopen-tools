// Function: sub_3391190
// Address: 0x3391190
//
void __fastcall sub_3391190(__int64 a1, unsigned int *a2, __int64 a3)
{
  unsigned __int64 v3; // r13
  __int128 v6; // rax
  __int64 v7; // r8
  __int64 v8; // r9
  __int64 v9; // rsi
  bool v10; // zf
  __int64 v11; // rax
  __int64 v12; // rbx
  __int64 v13; // rax
  unsigned int v14; // eax
  __int64 v15; // rsi
  __int64 v16; // rdx
  __int64 v17; // rbx
  __int128 v18; // rax
  unsigned int v19; // edi
  __int64 v20; // rdi
  unsigned __int16 *v21; // rax
  unsigned int v22; // r12d
  __int64 v23; // r13
  int v24; // r11d
  unsigned int v25; // r12d
  int v26; // eax
  __int64 v27; // r12
  __int128 v28; // rax
  int v29; // r9d
  __int128 v30; // rax
  __int64 v31; // rbx
  int v32; // r11d
  __int64 *v33; // r10
  __int64 v34; // rdx
  __int128 v35; // rax
  __int64 v36; // r8
  __int64 v37; // r9
  unsigned int v38; // edx
  __int64 v39; // rbx
  __int64 v40; // r12
  __int64 v41; // r13
  __int64 v42; // rbx
  __int64 v43; // r11
  unsigned __int64 v44; // rdx
  __int64 v45; // rbx
  __int64 v46; // r12
  __int128 v47; // rax
  int v48; // r9d
  __int64 v49; // rax
  unsigned int v50; // edx
  __int64 v51; // rbx
  __int64 v52; // r12
  __int64 v53; // rsi
  __int64 v54; // r13
  __int64 v55; // rdx
  __int64 v56; // r14
  __int64 v57; // rcx
  __int64 v58; // r8
  __int64 v59; // r9
  __int128 v60; // rax
  int v61; // r9d
  __int64 v62; // rax
  int v63; // edx
  __int64 v64; // rbx
  int v65; // r13d
  __int64 v66; // rbx
  __int64 v67; // rax
  __int64 v68; // rdx
  __int64 v69; // r13
  __int64 v70; // r12
  __int128 v71; // rax
  int v72; // r9d
  unsigned int v73; // edx
  __int64 v74; // r8
  __int64 v75; // r9
  __int64 v76; // rdx
  __int64 v77; // rbx
  __int64 v78; // rsi
  __int64 v79; // rdx
  __int64 v80; // rcx
  __int64 v81; // r8
  __int64 v82; // r9
  __int64 v83; // rax
  __int64 v84; // rdx
  __int64 v85; // r12
  __int64 v86; // rdx
  __int64 v87; // r13
  _QWORD *v88; // rax
  __int128 v89; // rax
  int v90; // r9d
  __int64 v91; // rax
  int v92; // edx
  __int64 v93; // r12
  int v94; // ebx
  __int64 v95; // r15
  unsigned int v96; // edx
  unsigned __int64 v97; // rax
  __int64 v98; // r12
  __int64 v99; // rsi
  __int64 v100; // rax
  __int64 v101; // r11
  unsigned int v102; // edx
  unsigned int v103; // edx
  unsigned __int64 v104; // rax
  __int64 v105; // r12
  __int64 v106; // rsi
  __int64 v107; // rax
  unsigned int v108; // edx
  __int64 v109; // rax
  unsigned __int16 *v110; // rax
  __int128 v111; // rax
  unsigned int v112; // edx
  __int128 v113; // rax
  int v114; // r9d
  unsigned int v115; // edx
  __int128 v116; // [rsp-30h] [rbp-170h]
  __int128 v117; // [rsp-30h] [rbp-170h]
  __int128 v118; // [rsp-30h] [rbp-170h]
  __int128 v119; // [rsp-20h] [rbp-160h]
  __int128 v120; // [rsp-20h] [rbp-160h]
  __int128 v121; // [rsp-20h] [rbp-160h]
  __int128 v122; // [rsp-10h] [rbp-150h]
  __int64 v123; // [rsp+8h] [rbp-138h]
  __int64 v124; // [rsp+8h] [rbp-138h]
  unsigned __int64 v125; // [rsp+10h] [rbp-130h]
  __int64 v126; // [rsp+18h] [rbp-128h]
  __int64 *v127; // [rsp+18h] [rbp-128h]
  int v128; // [rsp+18h] [rbp-128h]
  __int128 v129; // [rsp+20h] [rbp-120h]
  int v130; // [rsp+20h] [rbp-120h]
  __int64 v131; // [rsp+20h] [rbp-120h]
  unsigned int v132; // [rsp+30h] [rbp-110h]
  const void **v133; // [rsp+30h] [rbp-110h]
  int v134; // [rsp+30h] [rbp-110h]
  __int128 v135; // [rsp+30h] [rbp-110h]
  unsigned int v136; // [rsp+30h] [rbp-110h]
  __int64 v137; // [rsp+40h] [rbp-100h]
  __int128 v138; // [rsp+40h] [rbp-100h]
  __int128 v139; // [rsp+40h] [rbp-100h]
  __int64 v140; // [rsp+40h] [rbp-100h]
  __int64 v141; // [rsp+40h] [rbp-100h]
  __int64 v142; // [rsp+50h] [rbp-F0h]
  __int64 v143; // [rsp+58h] [rbp-E8h]
  unsigned int v144; // [rsp+58h] [rbp-E8h]
  int v145; // [rsp+58h] [rbp-E8h]
  __int64 v146; // [rsp+58h] [rbp-E8h]
  __int128 v148; // [rsp+60h] [rbp-E0h]
  __int64 v149; // [rsp+E0h] [rbp-60h] BYREF
  unsigned int v150; // [rsp+E8h] [rbp-58h]
  unsigned __int64 v151; // [rsp+F0h] [rbp-50h] BYREF
  unsigned int v152; // [rsp+F8h] [rbp-48h]
  unsigned __int64 v153; // [rsp+100h] [rbp-40h] BYREF
  unsigned int v154; // [rsp+108h] [rbp-38h]

  *(_QWORD *)&v6 = sub_338B750(a1, *((_QWORD *)a2 + 1));
  v9 = *((_QWORD *)a2 + 7);
  v129 = v6;
  v137 = v6;
  v132 = DWORD2(v6);
  v149 = v9;
  if ( v9 )
    sub_B96E90((__int64)&v149, v9, 1);
  v10 = *a2 == 15;
  v150 = a2[16];
  if ( !v10 )
  {
    v11 = *(_QWORD *)(a1 + 864);
    v12 = *(_QWORD *)(*((_QWORD *)a2 + 1) + 8LL);
    v143 = *(_QWORD *)(v11 + 16);
    v13 = sub_2E79000(*(__int64 **)(v11 + 40));
    v14 = sub_336EEB0(v143, v13, v12, 0);
    v15 = *((_QWORD *)a2 + 2);
    v126 = v16;
    v144 = v14;
    if ( !v15 )
    {
      v39 = *((_QWORD *)a2 + 3);
      if ( v39 != sub_ACD6D0(*(__int64 **)(*(_QWORD *)(a1 + 864) + 64LL)) || *a2 != 17 )
      {
        v40 = *((_QWORD *)a2 + 3);
        v41 = v132;
        v42 = 16LL * v132;
        if ( v40 == sub_ACD720(*(__int64 **)(*(_QWORD *)(a1 + 864) + 64LL)) && *a2 == 17 )
        {
          *(_QWORD *)&v113 = sub_3400BD0(
                               *(_QWORD *)(a1 + 864),
                               1,
                               (unsigned int)&v149,
                               *(unsigned __int16 *)(v42 + *(_QWORD *)(v137 + 48)),
                               *(_QWORD *)(v42 + *(_QWORD *)(v137 + 48) + 8),
                               0,
                               0);
          v137 = sub_3406EB0(
                   *(_QWORD *)(a1 + 864),
                   188,
                   (unsigned int)&v149,
                   *(unsigned __int16 *)(*(_QWORD *)(v137 + 48) + 16LL * v132),
                   *(_QWORD *)(*(_QWORD *)(v137 + 48) + 16LL * v132 + 8),
                   v114,
                   v129,
                   v113);
          v132 = v115;
          v3 = v115;
        }
        else
        {
          v43 = sub_338B750(a1, *((_QWORD *)a2 + 3));
          v125 = v44;
          v45 = *(_QWORD *)(v137 + 48) + v42;
          if ( *(_WORD *)v45 != (_WORD)v144 || *(_QWORD *)(v45 + 8) != v126 && !*(_WORD *)v45 )
          {
            v96 = *(_DWORD *)(a1 + 848);
            v97 = *(_QWORD *)a1;
            v153 = 0;
            v98 = *(_QWORD *)(a1 + 864);
            v154 = v96;
            if ( v97 )
            {
              if ( &v153 != (unsigned __int64 *)(v97 + 48) )
              {
                v99 = *(_QWORD *)(v97 + 48);
                v153 = v99;
                if ( v99 )
                {
                  v141 = v43;
                  sub_B96E90((__int64)&v153, v99, 1);
                  v43 = v141;
                }
              }
            }
            v123 = v43;
            v100 = sub_33FB4C0(v98, v129, *((_QWORD *)&v129 + 1), &v153, v144, v126);
            v101 = v123;
            v137 = v100;
            v136 = v102;
            if ( v153 )
            {
              sub_B91220((__int64)&v153, v153);
              v101 = v123;
            }
            v103 = *(_DWORD *)(a1 + 848);
            v104 = *(_QWORD *)a1;
            v153 = 0;
            v105 = *(_QWORD *)(a1 + 864);
            v154 = v103;
            if ( v104 )
            {
              if ( &v153 != (unsigned __int64 *)(v104 + 48) )
              {
                v106 = *(_QWORD *)(v104 + 48);
                v153 = v106;
                if ( v106 )
                {
                  v124 = v101;
                  sub_B96E90((__int64)&v153, v106, 1);
                  v101 = v124;
                }
              }
            }
            v107 = sub_33FB4C0(v105, v101, v125, &v153, v144, v126);
            v41 = v136;
            v43 = v107;
            v125 = v108 | v125 & 0xFFFFFFFF00000000LL;
            if ( v153 )
            {
              v146 = v107;
              sub_B91220((__int64)&v153, v153);
              v43 = v146;
            }
          }
          v46 = v43;
          *(_QWORD *)&v129 = v137;
          v140 = *(_QWORD *)(a1 + 864);
          *(_QWORD *)&v47 = sub_33ED040(v140, *a2);
          *((_QWORD *)&v119 + 1) = v125;
          *(_QWORD *)&v119 = v46;
          *((_QWORD *)&v116 + 1) = v41 | *((_QWORD *)&v129 + 1) & 0xFFFFFFFF00000000LL;
          *(_QWORD *)&v116 = v129;
          v49 = sub_340F900(v140, 208, (unsigned int)&v149, 2, 0, v48, v116, v119, v47);
          v132 = v50;
          v137 = v49;
          v3 = v50;
        }
      }
      goto LABEL_30;
    }
    v17 = *((_QWORD *)a2 + 1);
    v142 = *((_QWORD *)a2 + 3);
    v133 = (const void **)(v142 + 24);
    *(_QWORD *)&v18 = sub_338B750(a1, v15);
    v19 = DWORD2(v18);
    v138 = v18;
    *((_QWORD *)&v18 + 1) = v18;
    *(_QWORD *)&v18 = v19;
    v20 = *((_QWORD *)a2 + 1);
    v21 = (unsigned __int16 *)(*(_QWORD *)(*((_QWORD *)&v18 + 1) + 48LL) + 16 * v18);
    v22 = *(_DWORD *)(v20 + 32);
    v23 = *((_QWORD *)v21 + 1);
    v24 = *v21;
    if ( v22 <= 0x40 )
    {
      if ( *(_QWORD *)(v20 + 24) != 1LL << ((unsigned __int8)v22 - 1) )
        goto LABEL_8;
    }
    else
    {
      v25 = v22 - 1;
      if ( (*(_QWORD *)(*(_QWORD *)(v20 + 24) + 8LL * (v25 >> 6)) & (1LL << v25)) == 0
        || (v145 = *v21, v26 = sub_C44590(v20 + 24), v24 = v145, v25 != v26) )
      {
LABEL_8:
        v27 = *(_QWORD *)(a1 + 864);
        v127 = (__int64 *)(v17 + 24);
        v130 = v24;
        *(_QWORD *)&v28 = sub_34007B0(v27, (int)v17 + 24, (unsigned int)&v149, v24, v23, 0, 0);
        *(_QWORD *)&v30 = sub_3406EB0(v27, 57, (unsigned int)&v149, v130, v23, v29, v138, v28);
        v31 = *(_QWORD *)(a1 + 864);
        v139 = v30;
        v32 = v130;
        v33 = v127;
        v152 = *(_DWORD *)(v142 + 32);
        if ( v152 > 0x40 )
        {
          sub_C43780((__int64)&v151, v133);
          v32 = v130;
          v33 = v127;
        }
        else
        {
          v151 = *(_QWORD *)(v142 + 24);
        }
        v134 = v32;
        sub_C46B40((__int64)&v151, v33);
        v154 = v152;
        v152 = 0;
        v153 = v151;
        *(_QWORD *)&v135 = sub_34007B0(v31, (unsigned int)&v153, (unsigned int)&v149, v134, v23, 0, 0);
        *((_QWORD *)&v135 + 1) = v34;
        *(_QWORD *)&v35 = sub_33ED040(v31, 13);
        v137 = sub_340F900(v31, 208, (unsigned int)&v149, 2, 0, DWORD2(v135), v139, v135, v35);
        v132 = v38;
        v3 = v38;
        if ( v154 > 0x40 && v153 )
          j_j___libc_free_0_0(v153);
        if ( v152 > 0x40 && v151 )
          j_j___libc_free_0_0(v151);
        goto LABEL_30;
      }
    }
    v66 = *(_QWORD *)(a1 + 864);
    v67 = sub_34007B0(v66, (_DWORD)v133, (unsigned int)&v149, v24, v23, 0, 0);
    v69 = v68;
    v70 = v67;
    *(_QWORD *)&v71 = sub_33ED040(v66, 21);
    *((_QWORD *)&v117 + 1) = v69;
    *(_QWORD *)&v117 = v70;
    v137 = sub_340F900(v66, 208, (unsigned int)&v149, 2, 0, v72, v138, v117, v71);
    v132 = v73;
    v3 = v73;
LABEL_30:
    sub_3373E10(a1, a3, *((_QWORD *)a2 + 4), a2[20], v36, v37);
    v76 = *((_QWORD *)a2 + 5);
    if ( *((_QWORD *)a2 + 4) != v76 )
      sub_3373E10(a1, a3, v76, a2[21], v74, v75);
    sub_2E33470(*(unsigned int **)(a3 + 144), *(unsigned int **)(a3 + 152));
    v77 = *((_QWORD *)a2 + 4);
    if ( v77 == sub_3374B60(a1, a3) )
    {
      v109 = *((_QWORD *)a2 + 4);
      *((_QWORD *)a2 + 4) = *((_QWORD *)a2 + 5);
      *((_QWORD *)a2 + 5) = v109;
      v110 = (unsigned __int16 *)(16LL * v132 + *(_QWORD *)(v137 + 48));
      *(_QWORD *)&v111 = sub_3400BD0(*(_QWORD *)(a1 + 864), 1, (unsigned int)&v149, *v110, *((_QWORD *)v110 + 1), 0, 0);
      v3 = v132 | v3 & 0xFFFFFFFF00000000LL;
      *((_QWORD *)&v118 + 1) = v3;
      *(_QWORD *)&v118 = v137;
      v137 = sub_3406EB0(
               *(_QWORD *)(a1 + 864),
               188,
               (unsigned int)&v149,
               *(unsigned __int16 *)(*(_QWORD *)(v137 + 48) + 16LL * v132),
               *(_QWORD *)(*(_QWORD *)(v137 + 48) + 16LL * v132 + 8),
               0,
               v118,
               v111);
      v132 = v112;
    }
    v78 = *((_QWORD *)a2 + 4);
    v131 = *(_QWORD *)(a1 + 864);
    v128 = (*((_BYTE *)a2 + 88) != 0) << 13;
    *(_QWORD *)&v148 = sub_33EEAD0(v131, v78);
    *((_QWORD *)&v148 + 1) = v79;
    v83 = sub_3373A60(a1, v78, v79, v80, v81, v82);
    *((_QWORD *)&v120 + 1) = v132 | v3 & 0xFFFFFFFF00000000LL;
    *(_QWORD *)&v120 = v137;
    v85 = sub_340EC60(v131, 305, (unsigned int)&v149, 1, 0, v128, v83, v84, v120, v148);
    v87 = v86;
    v153 = *(_QWORD *)a1;
    v88 = sub_337DC20(a1 + 8, (__int64 *)&v153);
    *v88 = v85;
    *((_DWORD *)v88 + 2) = v87;
    *(_QWORD *)&v148 = *(_QWORD *)(a1 + 864);
    *(_QWORD *)&v89 = sub_33EEAD0(v148, *((_QWORD *)a2 + 5));
    *((_QWORD *)&v121 + 1) = v87;
    *(_QWORD *)&v121 = v85;
    v91 = sub_3406EB0(v148, 301, (unsigned int)&v149, 1, 0, v90, v121, v89);
    v93 = v91;
    v94 = v92;
    v95 = *(_QWORD *)(a1 + 864);
    if ( v91 )
    {
      nullsub_1875(v91, v95, 0);
      *(_QWORD *)(v95 + 384) = v93;
      *(_DWORD *)(v95 + 392) = v94;
      sub_33E2B60(v95, 0);
    }
    else
    {
      *(_QWORD *)(v95 + 384) = 0;
      *(_DWORD *)(v95 + 392) = v92;
    }
    if ( v149 )
      sub_B91220((__int64)&v149, v149);
    return;
  }
  sub_3373E10(a1, a3, *((_QWORD *)a2 + 4), a2[20], v7, v8);
  sub_2E33470(*(unsigned int **)(a3 + 144), *(unsigned int **)(a3 + 152));
  v51 = *((_QWORD *)a2 + 4);
  if ( v51 != sub_3374B60(a1, a3) )
  {
    v52 = *(_QWORD *)(a1 + 864);
    v53 = *((_QWORD *)a2 + 4);
    v54 = sub_33EEAD0(v52, v53);
    v56 = v55;
    *(_QWORD *)&v60 = sub_3373A60(a1, v53, v55, v57, v58, v59);
    *((_QWORD *)&v122 + 1) = v56;
    *(_QWORD *)&v122 = v54;
    v62 = sub_3406EB0(v52, 301, (unsigned int)&v149, 1, 0, v61, v60, v122);
    v64 = v62;
    v65 = v63;
    if ( v62 )
    {
      nullsub_1875(v62, v52, 0);
      *(_QWORD *)(v52 + 384) = v64;
      *(_DWORD *)(v52 + 392) = v65;
      sub_33E2B60(v52, 0);
    }
    else
    {
      *(_QWORD *)(v52 + 384) = 0;
      *(_DWORD *)(v52 + 392) = v63;
    }
  }
  if ( v149 )
    sub_B91220((__int64)&v149, v149);
}
