// Function: sub_1B306C0
// Address: 0x1b306c0
//
void __fastcall sub_1B306C0(__int64 *a1)
{
  __int64 v2; // rbx
  __int64 v3; // rax
  unsigned __int64 v4; // rdx
  unsigned __int64 *v5; // rdi
  int v6; // r13d
  unsigned int v7; // eax
  unsigned __int64 v8; // r8
  __int64 v9; // rax
  unsigned __int64 v10; // r10
  unsigned __int64 *v11; // rax
  unsigned __int64 *v12; // rcx
  unsigned __int64 *v13; // rdx
  unsigned __int64 *v14; // rdx
  __int64 v15; // rax
  unsigned __int64 v16; // rax
  unsigned __int64 v17; // rax
  unsigned __int64 v18; // rax
  unsigned __int64 v19; // rax
  _BYTE *v20; // rax
  unsigned __int64 v21; // rax
  __int64 v22; // rax
  unsigned __int64 v23; // rax
  unsigned __int64 v24; // rax
  __int64 *v25; // rdi
  __int64 v26; // rdx
  _BYTE *v27; // rsi
  _BYTE *v28; // r8
  unsigned __int64 v29; // r14
  __int64 v30; // rax
  unsigned __int64 v31; // rcx
  unsigned __int64 v32; // rdx
  _BYTE *v33; // rax
  char v34; // di
  int v35; // r9d
  unsigned __int64 v36; // rcx
  __int64 v37; // r8
  unsigned __int64 v38; // r14
  __int64 v39; // rax
  __int64 v40; // rdi
  unsigned __int64 v41; // rdx
  __int64 v42; // rax
  char v43; // si
  unsigned __int64 v44; // r15
  unsigned __int64 v45; // rax
  __int64 v46; // rdx
  __int64 v47; // rcx
  __int64 *v48; // r13
  __int64 v49; // r14
  unsigned __int64 v50; // rsi
  char v51; // al
  __int64 *v52; // rax
  char v53; // dl
  __int64 v54; // r14
  __int64 *v55; // rax
  __int64 *v56; // rsi
  __int64 *v57; // rdi
  char v58; // si
  __int64 v59; // r13
  __int64 v60; // rbx
  __int64 v61; // r13
  __int64 v62; // rsi
  __int64 v63; // rax
  int v64; // r9d
  int v65; // [rsp+8h] [rbp-4C8h]
  unsigned __int64 v66; // [rsp+10h] [rbp-4C0h]
  unsigned __int64 v67; // [rsp+18h] [rbp-4B8h]
  __int64 v68; // [rsp+20h] [rbp-4B0h] BYREF
  _BYTE *v69; // [rsp+28h] [rbp-4A8h]
  _BYTE *v70; // [rsp+30h] [rbp-4A0h]
  __int64 v71; // [rsp+38h] [rbp-498h]
  int v72; // [rsp+40h] [rbp-490h]
  _BYTE v73[72]; // [rsp+48h] [rbp-488h] BYREF
  _QWORD v74[16]; // [rsp+90h] [rbp-440h] BYREF
  __int64 v75; // [rsp+110h] [rbp-3C0h] BYREF
  _QWORD *v76; // [rsp+118h] [rbp-3B8h]
  _QWORD *v77; // [rsp+120h] [rbp-3B0h]
  __int64 v78; // [rsp+128h] [rbp-3A8h]
  int v79; // [rsp+130h] [rbp-3A0h]
  _QWORD v80[8]; // [rsp+138h] [rbp-398h] BYREF
  unsigned __int64 v81; // [rsp+178h] [rbp-358h] BYREF
  unsigned __int64 v82; // [rsp+180h] [rbp-350h]
  unsigned __int64 v83; // [rsp+188h] [rbp-348h]
  __int64 v84; // [rsp+190h] [rbp-340h] BYREF
  __int64 *v85; // [rsp+198h] [rbp-338h]
  __int64 *v86; // [rsp+1A0h] [rbp-330h]
  unsigned int v87; // [rsp+1A8h] [rbp-328h]
  unsigned int v88; // [rsp+1ACh] [rbp-324h]
  int v89; // [rsp+1B0h] [rbp-320h]
  _BYTE v90[64]; // [rsp+1B8h] [rbp-318h] BYREF
  unsigned __int64 v91; // [rsp+1F8h] [rbp-2D8h] BYREF
  unsigned __int64 v92; // [rsp+200h] [rbp-2D0h]
  unsigned __int64 v93; // [rsp+208h] [rbp-2C8h]
  __int64 v94; // [rsp+210h] [rbp-2C0h] BYREF
  __int64 v95; // [rsp+218h] [rbp-2B8h]
  unsigned __int64 v96; // [rsp+220h] [rbp-2B0h]
  _BYTE v97[64]; // [rsp+238h] [rbp-298h] BYREF
  __int64 v98; // [rsp+278h] [rbp-258h]
  unsigned __int64 v99; // [rsp+280h] [rbp-250h]
  unsigned __int64 v100; // [rsp+288h] [rbp-248h]
  unsigned __int64 *v101; // [rsp+290h] [rbp-240h] BYREF
  __int64 v102; // [rsp+298h] [rbp-238h]
  unsigned __int64 v103[3]; // [rsp+2A0h] [rbp-230h] BYREF
  char v104[64]; // [rsp+2B8h] [rbp-218h] BYREF
  unsigned __int64 v105; // [rsp+2F8h] [rbp-1D8h]
  _BYTE *v106; // [rsp+300h] [rbp-1D0h]
  unsigned __int64 v107; // [rsp+308h] [rbp-1C8h]
  _QWORD v108[2]; // [rsp+310h] [rbp-1C0h] BYREF
  unsigned __int64 v109; // [rsp+320h] [rbp-1B0h]
  char v110[64]; // [rsp+338h] [rbp-198h] BYREF
  __int64 v111; // [rsp+378h] [rbp-158h]
  unsigned __int64 v112; // [rsp+380h] [rbp-150h]
  unsigned __int64 v113; // [rsp+388h] [rbp-148h]

  v2 = a1[3];
  if ( *(_BYTE *)(v2 + 72) )
  {
    *(_DWORD *)(v2 + 76) = 0;
    v2 = a1[3];
  }
  else
  {
    HIDWORD(v102) = 32;
    v101 = v103;
    v3 = *(_QWORD *)(v2 + 56);
    if ( v3 )
    {
      v4 = *(_QWORD *)(v3 + 24);
      v5 = v103;
      v103[0] = *(_QWORD *)(v2 + 56);
      v6 = 1;
      LODWORD(v102) = 1;
      v103[1] = v4;
      *(_DWORD *)(v3 + 48) = 0;
      v7 = 1;
      do
      {
        while ( 1 )
        {
          v64 = v6++;
          v12 = &v5[2 * v7 - 2];
          v13 = (unsigned __int64 *)v12[1];
          if ( v13 != *(unsigned __int64 **)(*v12 + 32) )
            break;
          --v7;
          *(_DWORD *)(*v12 + 52) = v64;
          LODWORD(v102) = v7;
          if ( !v7 )
            goto LABEL_9;
        }
        v8 = *v13;
        v12[1] = (unsigned __int64)(v13 + 1);
        v9 = (unsigned int)v102;
        v10 = *(_QWORD *)(v8 + 24);
        if ( (unsigned int)v102 >= HIDWORD(v102) )
        {
          v65 = v64;
          v66 = *(_QWORD *)(v8 + 24);
          v67 = v8;
          sub_16CD150((__int64)&v101, v103, 0, 16, v8, v64);
          v5 = v101;
          v9 = (unsigned int)v102;
          v64 = v65;
          v10 = v66;
          v8 = v67;
        }
        v11 = &v5[2 * v9];
        *v11 = v8;
        v11[1] = v10;
        LODWORD(v102) = v102 + 1;
        v7 = v102;
        *(_DWORD *)(v8 + 48) = v64;
        v5 = v101;
      }
      while ( v7 );
LABEL_9:
      *(_DWORD *)(v2 + 76) = 0;
      *(_BYTE *)(v2 + 72) = 1;
      if ( v5 != v103 )
        _libc_free((unsigned __int64)v5);
      v2 = a1[3];
    }
  }
  v14 = *(unsigned __int64 **)(v2 + 56);
  v69 = v73;
  v70 = v73;
  memset(v74, 0, sizeof(v74));
  v74[1] = &v74[5];
  v74[2] = &v74[5];
  v76 = v80;
  v77 = v80;
  v78 = 0x100000008LL;
  v80[0] = v14;
  v101 = v14;
  v68 = 0;
  v71 = 8;
  v72 = 0;
  LODWORD(v74[3]) = 8;
  v81 = 0;
  v82 = 0;
  v83 = 0;
  v79 = 0;
  v75 = 1;
  LOBYTE(v103[0]) = 0;
  sub_13B8390(&v81, (__int64)&v101);
  sub_16CCEE0(&v94, (__int64)v97, 8, (__int64)v74);
  v15 = v74[13];
  memset(&v74[13], 0, 24);
  v98 = v15;
  v99 = v74[14];
  v100 = v74[15];
  sub_16CCEE0(&v84, (__int64)v90, 8, (__int64)&v75);
  v16 = v81;
  v81 = 0;
  v91 = v16;
  v17 = v82;
  v82 = 0;
  v92 = v17;
  v18 = v83;
  v83 = 0;
  v93 = v18;
  sub_16CCEE0(&v101, (__int64)v104, 8, (__int64)&v84);
  v19 = v91;
  v91 = 0;
  v105 = v19;
  v20 = (_BYTE *)v92;
  v92 = 0;
  v106 = v20;
  v21 = v93;
  v93 = 0;
  v107 = v21;
  sub_16CCEE0(v108, (__int64)v110, 8, (__int64)&v94);
  v22 = v98;
  v98 = 0;
  v111 = v22;
  v23 = v99;
  v99 = 0;
  v112 = v23;
  v24 = v100;
  v100 = 0;
  v113 = v24;
  if ( v91 )
    j_j___libc_free_0(v91, v93 - v91);
  if ( v86 != v85 )
    _libc_free((unsigned __int64)v86);
  if ( v98 )
    j_j___libc_free_0(v98, v100 - v98);
  if ( v96 != v95 )
    _libc_free(v96);
  if ( v81 )
    j_j___libc_free_0(v81, v83 - v81);
  if ( v77 != v76 )
    _libc_free((unsigned __int64)v77);
  if ( v74[13] )
    j_j___libc_free_0(v74[13], v74[15] - v74[13]);
  if ( v74[2] != v74[1] )
    _libc_free(v74[2]);
  v25 = &v84;
  sub_16CCCB0(&v84, (__int64)v90, (__int64)&v101);
  v27 = v106;
  v28 = (_BYTE *)v105;
  v91 = 0;
  v92 = 0;
  v93 = 0;
  v29 = (unsigned __int64)&v106[-v105];
  if ( v106 == (_BYTE *)v105 )
  {
    v31 = 0;
  }
  else
  {
    if ( v29 > 0x7FFFFFFFFFFFFFF8LL )
      goto LABEL_118;
    v30 = sub_22077B0(&v106[-v105]);
    v27 = v106;
    v28 = (_BYTE *)v105;
    v31 = v30;
  }
  v91 = v31;
  v92 = v31;
  v93 = v31 + v29;
  if ( v28 != v27 )
  {
    v32 = v31;
    v33 = v28;
    do
    {
      if ( v32 )
      {
        *(_QWORD *)v32 = *(_QWORD *)v33;
        v34 = v33[16];
        *(_BYTE *)(v32 + 16) = v34;
        if ( v34 )
          *(_QWORD *)(v32 + 8) = *((_QWORD *)v33 + 1);
      }
      v33 += 24;
      v32 += 24LL;
    }
    while ( v33 != v27 );
    v31 += 8 * ((unsigned __int64)(v33 - 24 - v28) >> 3) + 24;
  }
  v27 = v97;
  v25 = &v94;
  v92 = v31;
  sub_16CCCB0(&v94, (__int64)v97, (__int64)v108);
  v36 = v112;
  v37 = v111;
  v98 = 0;
  v99 = 0;
  v100 = 0;
  v38 = v112 - v111;
  if ( v112 != v111 )
  {
    if ( v38 <= 0x7FFFFFFFFFFFFFF8LL )
    {
      v39 = sub_22077B0(v112 - v111);
      v36 = v112;
      v37 = v111;
      v40 = v39;
      goto LABEL_41;
    }
LABEL_118:
    sub_4261EA(v25, v27, v26);
  }
  v40 = 0;
LABEL_41:
  v98 = v40;
  v41 = v40;
  v99 = v40;
  v100 = v40 + v38;
  if ( v36 != v37 )
  {
    v42 = v37;
    do
    {
      if ( v41 )
      {
        *(_QWORD *)v41 = *(_QWORD *)v42;
        v43 = *(_BYTE *)(v42 + 16);
        *(_BYTE *)(v41 + 16) = v43;
        if ( v43 )
          *(_QWORD *)(v41 + 8) = *(_QWORD *)(v42 + 8);
      }
      v42 += 24;
      v41 += 24LL;
    }
    while ( v36 != v42 );
    v41 = v40 + 8 * ((v36 - 24 - v37) >> 3) + 24;
  }
  v44 = v92;
  v45 = v91;
  v99 = v41;
  v46 = v41 - v40;
  v47 = v92 - v91;
  if ( v92 - v91 == v46 )
    goto LABEL_68;
  do
  {
LABEL_49:
    v48 = *(__int64 **)(v44 - 24);
    v49 = *v48;
    v50 = sub_157EBA0(*v48);
    v51 = *(_BYTE *)(v50 + 16);
    if ( v51 == 26 )
    {
      if ( (*(_DWORD *)(v50 + 20) & 0xFFFFFFF) == 3 && *(_QWORD *)(v50 - 48) != *(_QWORD *)(v50 - 24) )
      {
        sub_1B2F7E0(a1, v50, v49, &v68, v37, v35);
        v44 = v92;
        v48 = *(__int64 **)(v92 - 24);
      }
    }
    else if ( v51 == 27 )
    {
      sub_1B2FC00((__int64)a1, v50, v49, (__int64)&v68);
      v44 = v92;
LABEL_109:
      v48 = *(__int64 **)(v44 - 24);
    }
    if ( !*(_BYTE *)(v44 - 8) )
    {
      v52 = (__int64 *)v48[3];
      *(_BYTE *)(v44 - 8) = 1;
      *(_QWORD *)(v44 - 16) = v52;
      goto LABEL_57;
    }
    while ( 1 )
    {
      v52 = *(__int64 **)(v44 - 16);
LABEL_57:
      if ( v52 == (__int64 *)v48[4] )
        break;
      *(_QWORD *)(v44 - 16) = v52 + 1;
      v54 = *v52;
      v55 = v85;
      if ( v86 != v85 )
        goto LABEL_55;
      v56 = &v85[v88];
      if ( v85 == v56 )
      {
LABEL_106:
        if ( v88 < v87 )
        {
          ++v88;
          *v56 = v54;
          ++v84;
LABEL_66:
          v75 = v54;
          LOBYTE(v77) = 0;
          sub_13B8390(&v91, (__int64)&v75);
          v45 = v91;
          v44 = v92;
          goto LABEL_67;
        }
LABEL_55:
        sub_16CCBA0((__int64)&v84, v54);
        if ( v53 )
          goto LABEL_66;
      }
      else
      {
        v57 = 0;
        while ( v54 != *v55 )
        {
          if ( *v55 == -2 )
          {
            v57 = v55;
            if ( v55 + 1 == v56 )
              goto LABEL_65;
            ++v55;
          }
          else if ( v56 == ++v55 )
          {
            if ( !v57 )
              goto LABEL_106;
LABEL_65:
            *v57 = v54;
            --v89;
            ++v84;
            goto LABEL_66;
          }
        }
      }
    }
    v92 -= 24LL;
    v45 = v91;
    v44 = v92;
    if ( v92 != v91 )
      goto LABEL_109;
LABEL_67:
    v40 = v98;
    v47 = v44 - v45;
    v46 = v99 - v98;
  }
  while ( v44 - v45 != v99 - v98 );
LABEL_68:
  if ( v45 != v44 )
  {
    v46 = v40;
    while ( *(_QWORD *)v45 == *(_QWORD *)v46 )
    {
      v58 = *(_BYTE *)(v45 + 16);
      v47 = *(unsigned __int8 *)(v46 + 16);
      if ( v58 && (_BYTE)v47 )
      {
        v47 = *(_QWORD *)(v46 + 8);
        if ( *(_QWORD *)(v45 + 8) != v47 )
          goto LABEL_49;
        v45 += 24LL;
        v46 += 24;
        if ( v45 == v44 )
          goto LABEL_75;
      }
      else
      {
        if ( v58 != (_BYTE)v47 )
          goto LABEL_49;
        v45 += 24LL;
        v46 += 24;
        if ( v45 == v44 )
          goto LABEL_75;
      }
    }
    goto LABEL_49;
  }
LABEL_75:
  if ( v40 )
    j_j___libc_free_0(v40, v100 - v40);
  if ( v96 != v95 )
    _libc_free(v96);
  if ( v91 )
    j_j___libc_free_0(v91, v93 - v91);
  if ( v86 != v85 )
    _libc_free((unsigned __int64)v86);
  if ( v111 )
    j_j___libc_free_0(v111, v113 - v111);
  if ( v109 != v108[1] )
    _libc_free(v109);
  if ( v105 )
    j_j___libc_free_0(v105, v107 - v105);
  if ( v103[0] != v102 )
    _libc_free(v103[0]);
  v59 = a1[4];
  if ( !*(_BYTE *)(v59 + 184) )
    sub_14CDF70(a1[4]);
  v60 = *(_QWORD *)(v59 + 8);
  v61 = v60 + 32LL * *(unsigned int *)(v59 + 16);
  while ( v60 != v61 )
  {
    while ( 1 )
    {
      v62 = *(_QWORD *)(v60 + 16);
      if ( v62 )
      {
        if ( *(_BYTE *)(v62 + 16) == 78 )
        {
          v63 = *(_QWORD *)(v62 - 24);
          if ( !*(_BYTE *)(v63 + 16) && (*(_BYTE *)(v63 + 33) & 0x20) != 0 )
            break;
        }
      }
      v60 += 32;
      if ( v60 == v61 )
        goto LABEL_101;
    }
    v60 += 32;
    sub_1B2F000(a1, v62, *(_QWORD *)(v62 + 40), (__int64)&v68);
  }
LABEL_101:
  sub_1B2E010((__int64)a1, (__int64)&v68, v46, v47, v37, v35);
  if ( v70 != v69 )
    _libc_free((unsigned __int64)v70);
}
