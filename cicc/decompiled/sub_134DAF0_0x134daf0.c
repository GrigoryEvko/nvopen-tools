// Function: sub_134DAF0
// Address: 0x134daf0
//
__int64 __fastcall sub_134DAF0(__int64 a1, __int64 a2, __int64 a3, _QWORD *a4)
{
  __int64 *v4; // rdx
  __int64 v5; // rax
  __int64 v6; // rdx
  __int64 v10; // rax
  __int64 v11; // rax
  __int64 v12; // rax
  _QWORD *v13; // r13
  _QWORD *v14; // rax
  _QWORD *v15; // r14
  __int64 *v16; // r15
  __int64 v17; // rax
  __int64 v18; // rax
  _QWORD *v19; // r13
  _QWORD *v20; // rax
  _QWORD *v21; // r14
  __int64 *v22; // r15
  __int64 v23; // rax
  __int64 v24; // rax
  _QWORD *v25; // r13
  _QWORD *v26; // rax
  _QWORD *v27; // r14
  __int64 *v28; // r15
  __int64 v29; // rax
  __int64 v30; // rax
  _QWORD *v31; // r13
  _QWORD *v32; // rax
  _QWORD *v33; // r14
  __int64 *v34; // r15
  __int64 v35; // rax
  __int64 v36; // rax
  _QWORD *v37; // r13
  _QWORD *v38; // rax
  _QWORD *v39; // r14
  __int64 *v40; // r15
  __int64 v41; // rax
  __int64 v42; // rax
  _QWORD *v43; // rbx
  _QWORD *v44; // rax
  _QWORD *v45; // rdx
  char *v46; // rbx
  _QWORD *v48; // rax
  __int64 v49; // rdx
  _QWORD *v50; // rcx
  _QWORD *v51; // r14
  char *v52; // r15
  char *v53; // rcx
  __int64 v54; // rax
  __int64 v55; // rsi
  bool v56; // cf
  unsigned __int64 v57; // rax
  __int64 v58; // rax
  char *v59; // rcx
  _QWORD *v60; // r13
  char *v61; // r14
  __int64 v62; // rdi
  __int64 v63; // rsi
  __int64 v64; // rax
  __int64 v65; // rdi
  unsigned __int64 v66; // rax
  __int64 v67; // r13
  __int64 v68; // rax
  __int64 v69; // r13
  __int64 v70; // rax
  _QWORD *v71; // rsi
  __int64 *v72; // r14
  _QWORD *ii; // r13
  __int64 v74; // rdi
  __int64 *v75; // rdi
  __int64 v76; // rsi
  __int64 v77; // rax
  __int64 v78; // rdi
  unsigned __int64 v79; // rax
  __int64 v80; // r13
  __int64 v81; // rax
  __int64 v82; // r13
  __int64 v83; // rax
  _QWORD *v84; // rsi
  __int64 *v85; // r14
  _QWORD *n; // r13
  __int64 v87; // rdi
  __int64 *v88; // rdi
  __int64 v89; // rsi
  __int64 v90; // rax
  __int64 v91; // rdi
  unsigned __int64 v92; // rax
  __int64 v93; // r13
  __int64 v94; // rax
  __int64 v95; // r13
  __int64 v96; // rax
  _QWORD *v97; // rsi
  __int64 *v98; // r14
  _QWORD *m; // r13
  __int64 v100; // rdi
  __int64 *v101; // rdi
  __int64 v102; // rsi
  __int64 v103; // rax
  __int64 v104; // rdi
  unsigned __int64 v105; // rax
  __int64 v106; // r13
  __int64 v107; // rax
  __int64 v108; // r13
  __int64 v109; // rax
  _QWORD *v110; // rsi
  __int64 *v111; // r14
  _QWORD *k; // r13
  __int64 v113; // rdi
  __int64 *v114; // rdi
  __int64 v115; // rsi
  __int64 v116; // rax
  __int64 v117; // rdi
  unsigned __int64 v118; // rax
  __int64 v119; // r13
  __int64 v120; // rax
  __int64 v121; // r13
  __int64 v122; // rax
  _QWORD *v123; // rsi
  __int64 *v124; // r14
  _QWORD *j; // r13
  __int64 v126; // rdi
  __int64 *v127; // rdi
  __int64 v128; // rsi
  __int64 v129; // rax
  __int64 v130; // rdi
  unsigned __int64 v131; // rax
  __int64 v132; // rax
  _QWORD *v133; // rsi
  _QWORD **v134; // r15
  _QWORD *i; // r13
  _QWORD *v136; // rdi
  _QWORD **v137; // rdi
  __int64 v138; // r13
  __int64 v139; // rax
  __int64 v140; // r13
  __int64 v141; // r13
  __int64 v142; // rax
  __int64 v143; // r13
  _QWORD *v144; // [rsp+10h] [rbp-50h]
  __int64 v145; // [rsp+18h] [rbp-48h]
  __int64 v146; // [rsp+18h] [rbp-48h]
  __int64 v147; // [rsp+18h] [rbp-48h]
  __int64 v148; // [rsp+18h] [rbp-48h]
  __int64 v149; // [rsp+18h] [rbp-48h]
  __int64 v150; // [rsp+18h] [rbp-48h]
  __int64 v151; // [rsp+18h] [rbp-48h]
  _QWORD *v152; // [rsp+18h] [rbp-48h]
  __int64 v153; // [rsp+20h] [rbp-40h]
  __int64 *v154; // [rsp+20h] [rbp-40h]
  __int64 v155; // [rsp+20h] [rbp-40h]
  __int64 *v156; // [rsp+20h] [rbp-40h]
  __int64 v157; // [rsp+20h] [rbp-40h]
  __int64 *v158; // [rsp+20h] [rbp-40h]
  __int64 v159; // [rsp+20h] [rbp-40h]
  __int64 *v160; // [rsp+20h] [rbp-40h]
  __int64 v161; // [rsp+20h] [rbp-40h]
  __int64 *v162; // [rsp+20h] [rbp-40h]
  __int64 v163; // [rsp+20h] [rbp-40h]
  _QWORD **v164; // [rsp+20h] [rbp-40h]
  __int64 v165; // [rsp+20h] [rbp-40h]
  __int64 v166; // [rsp+28h] [rbp-38h]
  _QWORD *v167; // [rsp+28h] [rbp-38h]
  _QWORD *v168; // [rsp+28h] [rbp-38h]
  _QWORD *v169; // [rsp+28h] [rbp-38h]
  _QWORD *v170; // [rsp+28h] [rbp-38h]
  _QWORD *v171; // [rsp+28h] [rbp-38h]
  _QWORD *v172; // [rsp+28h] [rbp-38h]

  v4 = *(__int64 **)(a2 + 8);
  v5 = *v4;
  v6 = v4[1];
  if ( v5 == v6 )
LABEL_237:
    BUG();
  while ( *(_UNKNOWN **)v5 != &unk_4F9B6E8 )
  {
    v5 += 16;
    if ( v6 == v5 )
      goto LABEL_237;
  }
  v10 = (*(__int64 (__fastcall **)(_QWORD, void *))(**(_QWORD **)(v5 + 8) + 104LL))(*(_QWORD *)(v5 + 8), &unk_4F9B6E8);
  *(_QWORD *)(a1 + 8) = 0;
  *(_WORD *)a1 = 0;
  *(_QWORD *)(a1 + 16) = 0;
  *(_QWORD *)(a1 + 24) = 0;
  *(_DWORD *)(a1 + 32) = 0;
  *(_QWORD *)(a1 + 40) = v10 + 360;
  *(_QWORD *)(a1 + 48) = 0;
  *(_QWORD *)(a1 + 56) = 0;
  *(_QWORD *)(a1 + 64) = 0;
  *(_QWORD *)(a1 + 72) = 0;
  *(_QWORD *)(a1 + 80) = 0;
  *(_QWORD *)(a1 + 88) = 0;
  if ( !byte_4F96E60 )
  {
    v48 = (_QWORD *)sub_22077B0(16);
    v50 = v48;
    if ( v48 )
    {
      v48[1] = a4;
      *a4 = a1;
      *v48 = &unk_49E81D0;
    }
    v51 = *(_QWORD **)(a1 + 56);
    if ( v51 != *(_QWORD **)(a1 + 64) )
    {
      if ( v51 )
      {
        *v51 = v48;
        v51 = *(_QWORD **)(a1 + 56);
      }
      *(_QWORD *)(a1 + 56) = v51 + 1;
      goto LABEL_6;
    }
    v128 = (__int64)v51 - *(_QWORD *)(a1 + 48);
    v164 = *(_QWORD ***)(a1 + 48);
    v129 = v128 >> 3;
    if ( v128 >> 3 == 0xFFFFFFFFFFFFFFFLL )
      goto LABEL_236;
    v130 = 1;
    if ( v129 )
      v130 = v128 >> 3;
    v56 = __CFADD__(v130, v129);
    v131 = v130 + v129;
    if ( v56 )
    {
      v141 = 0x7FFFFFFFFFFFFFF8LL;
    }
    else
    {
      if ( !v131 )
      {
        v151 = 0;
        v132 = 8;
        v172 = 0;
LABEL_202:
        v133 = (_QWORD *)((char *)v172 + v128);
        if ( v133 )
          *v133 = v50;
        v134 = v164;
        if ( v51 != v164 )
        {
          for ( i = v172; ; ++i )
          {
            v136 = *v134;
            if ( i )
            {
              *i = v136;
              *v134 = 0;
            }
            else if ( v136 )
            {
              (*(void (__fastcall **)(_QWORD *, _QWORD, __int64, _QWORD *))(*v136 + 8LL))(v136, *v136, v49, v50);
            }
            if ( v51 == ++v134 )
              break;
          }
          v132 = (__int64)(i + 2);
        }
        v137 = v164;
        if ( v164 )
        {
          v165 = v132;
          j_j___libc_free_0(v137, *(_QWORD *)(a1 + 64) - (_QWORD)v137);
          v132 = v165;
        }
        *(_QWORD *)(a1 + 56) = v132;
        *(_QWORD *)(a1 + 48) = v172;
        *(_QWORD *)(a1 + 64) = v151;
        goto LABEL_6;
      }
      if ( v131 > 0xFFFFFFFFFFFFFFFLL )
        v131 = 0xFFFFFFFFFFFFFFFLL;
      v141 = 8 * v131;
    }
    v144 = v50;
    v142 = sub_22077B0(v141);
    v50 = v144;
    v143 = v142 + v141;
    v172 = (_QWORD *)v142;
    v132 = v142 + 8;
    v151 = v143;
    goto LABEL_202;
  }
LABEL_6:
  v11 = sub_160F9A0(*(_QWORD *)(a2 + 8), &unk_4F9B614, 1);
  if ( !v11 )
    goto LABEL_14;
  v12 = (*(__int64 (__fastcall **)(__int64, void *))(*(_QWORD *)v11 + 104LL))(v11, &unk_4F9B614);
  if ( !v12 )
    goto LABEL_14;
  v13 = *(_QWORD **)(v12 + 160);
  v14 = (_QWORD *)sub_22077B0(16);
  v15 = v14;
  if ( v14 )
  {
    v14[1] = v13;
    *v13 = a1;
    *v14 = &unk_49E8240;
  }
  v16 = *(__int64 **)(a1 + 56);
  if ( v16 != *(__int64 **)(a1 + 64) )
  {
    if ( v16 )
    {
      *v16 = (__int64)v14;
      v16 = *(__int64 **)(a1 + 56);
    }
    *(_QWORD *)(a1 + 56) = v16 + 1;
    goto LABEL_14;
  }
  v115 = (__int64)v16 - *(_QWORD *)(a1 + 48);
  v162 = *(__int64 **)(a1 + 48);
  v116 = v115 >> 3;
  if ( v115 >> 3 == 0xFFFFFFFFFFFFFFFLL )
    goto LABEL_236;
  v117 = 1;
  if ( v116 )
    v117 = v115 >> 3;
  v56 = __CFADD__(v117, v116);
  v118 = v117 + v116;
  if ( v56 )
  {
    v119 = 0x7FFFFFFFFFFFFFF8LL;
  }
  else
  {
    if ( !v118 )
    {
      v150 = 0;
      v122 = 8;
      v171 = 0;
      goto LABEL_182;
    }
    if ( v118 > 0xFFFFFFFFFFFFFFFLL )
      v118 = 0xFFFFFFFFFFFFFFFLL;
    v119 = 8 * v118;
  }
  v120 = sub_22077B0(v119);
  v121 = v120 + v119;
  v171 = (_QWORD *)v120;
  v122 = v120 + 8;
  v150 = v121;
LABEL_182:
  v123 = (_QWORD *)((char *)v171 + v115);
  if ( v123 )
    *v123 = v15;
  v124 = v162;
  if ( v16 != v162 )
  {
    for ( j = v171; ; ++j )
    {
      v126 = *v124;
      if ( j )
      {
        *j = v126;
        *v124 = 0;
      }
      else if ( v126 )
      {
        (*(void (__fastcall **)(__int64))(*(_QWORD *)v126 + 8LL))(v126);
      }
      if ( v16 == ++v124 )
        break;
    }
    v122 = (__int64)(j + 2);
  }
  v127 = v162;
  if ( v162 )
  {
    v163 = v122;
    j_j___libc_free_0(v127, *(_QWORD *)(a1 + 64) - (_QWORD)v127);
    v122 = v163;
  }
  *(_QWORD *)(a1 + 56) = v122;
  *(_QWORD *)(a1 + 48) = v171;
  *(_QWORD *)(a1 + 64) = v150;
LABEL_14:
  v17 = sub_160F9A0(*(_QWORD *)(a2 + 8), &unk_4F9D4AC, 1);
  if ( !v17 )
    goto LABEL_22;
  v18 = (*(__int64 (__fastcall **)(__int64, void *))(*(_QWORD *)v17 + 104LL))(v17, &unk_4F9D4AC);
  if ( !v18 )
    goto LABEL_22;
  v19 = *(_QWORD **)(v18 + 160);
  v20 = (_QWORD *)sub_22077B0(16);
  v21 = v20;
  if ( v20 )
  {
    v20[1] = v19;
    *v19 = a1;
    *v20 = &unk_49E82B0;
  }
  v22 = *(__int64 **)(a1 + 56);
  if ( v22 != *(__int64 **)(a1 + 64) )
  {
    if ( v22 )
    {
      *v22 = (__int64)v20;
      v22 = *(__int64 **)(a1 + 56);
    }
    *(_QWORD *)(a1 + 56) = v22 + 1;
    goto LABEL_22;
  }
  v102 = (__int64)v22 - *(_QWORD *)(a1 + 48);
  v160 = *(__int64 **)(a1 + 48);
  v103 = v102 >> 3;
  if ( v102 >> 3 == 0xFFFFFFFFFFFFFFFLL )
    goto LABEL_236;
  v104 = 1;
  if ( v103 )
    v104 = v102 >> 3;
  v56 = __CFADD__(v104, v103);
  v105 = v104 + v103;
  if ( v56 )
  {
    v106 = 0x7FFFFFFFFFFFFFF8LL;
  }
  else
  {
    if ( !v105 )
    {
      v149 = 0;
      v109 = 8;
      v170 = 0;
      goto LABEL_159;
    }
    if ( v105 > 0xFFFFFFFFFFFFFFFLL )
      v105 = 0xFFFFFFFFFFFFFFFLL;
    v106 = 8 * v105;
  }
  v107 = sub_22077B0(v106);
  v108 = v107 + v106;
  v170 = (_QWORD *)v107;
  v109 = v107 + 8;
  v149 = v108;
LABEL_159:
  v110 = (_QWORD *)((char *)v170 + v102);
  if ( v110 )
    *v110 = v21;
  v111 = v160;
  if ( v22 != v160 )
  {
    for ( k = v170; ; ++k )
    {
      v113 = *v111;
      if ( k )
      {
        *k = v113;
        *v111 = 0;
      }
      else if ( v113 )
      {
        (*(void (__fastcall **)(__int64))(*(_QWORD *)v113 + 8LL))(v113);
      }
      if ( v22 == ++v111 )
        break;
    }
    v109 = (__int64)(k + 2);
  }
  v114 = v160;
  if ( v160 )
  {
    v161 = v109;
    j_j___libc_free_0(v114, *(_QWORD *)(a1 + 64) - (_QWORD)v114);
    v109 = v161;
  }
  *(_QWORD *)(a1 + 56) = v109;
  *(_QWORD *)(a1 + 48) = v170;
  *(_QWORD *)(a1 + 64) = v149;
LABEL_22:
  v23 = sub_160F9A0(*(_QWORD *)(a2 + 8), &unk_4F99BD0, 1);
  if ( !v23 )
    goto LABEL_30;
  v24 = (*(__int64 (__fastcall **)(__int64, void *))(*(_QWORD *)v23 + 104LL))(v23, &unk_4F99BD0);
  if ( !v24 )
    goto LABEL_30;
  v25 = *(_QWORD **)(v24 + 160);
  v26 = (_QWORD *)sub_22077B0(16);
  v27 = v26;
  if ( v26 )
  {
    v26[1] = v25;
    *v25 = a1;
    *v26 = &unk_49E8320;
  }
  v28 = *(__int64 **)(a1 + 56);
  if ( v28 != *(__int64 **)(a1 + 64) )
  {
    if ( v28 )
    {
      *v28 = (__int64)v26;
      v28 = *(__int64 **)(a1 + 56);
    }
    *(_QWORD *)(a1 + 56) = v28 + 1;
    goto LABEL_30;
  }
  v89 = (__int64)v28 - *(_QWORD *)(a1 + 48);
  v158 = *(__int64 **)(a1 + 48);
  v90 = v89 >> 3;
  if ( v89 >> 3 == 0xFFFFFFFFFFFFFFFLL )
    goto LABEL_236;
  v91 = 1;
  if ( v90 )
    v91 = v89 >> 3;
  v56 = __CFADD__(v91, v90);
  v92 = v91 + v90;
  if ( v56 )
  {
    v93 = 0x7FFFFFFFFFFFFFF8LL;
  }
  else
  {
    if ( !v92 )
    {
      v148 = 0;
      v96 = 8;
      v169 = 0;
      goto LABEL_136;
    }
    if ( v92 > 0xFFFFFFFFFFFFFFFLL )
      v92 = 0xFFFFFFFFFFFFFFFLL;
    v93 = 8 * v92;
  }
  v94 = sub_22077B0(v93);
  v95 = v94 + v93;
  v169 = (_QWORD *)v94;
  v96 = v94 + 8;
  v148 = v95;
LABEL_136:
  v97 = (_QWORD *)((char *)v169 + v89);
  if ( v97 )
    *v97 = v27;
  v98 = v158;
  if ( v28 != v158 )
  {
    for ( m = v169; ; ++m )
    {
      v100 = *v98;
      if ( m )
      {
        *m = v100;
        *v98 = 0;
      }
      else if ( v100 )
      {
        (*(void (__fastcall **)(__int64))(*(_QWORD *)v100 + 8LL))(v100);
      }
      if ( v28 == ++v98 )
        break;
    }
    v96 = (__int64)(m + 2);
  }
  v101 = v158;
  if ( v158 )
  {
    v159 = v96;
    j_j___libc_free_0(v101, *(_QWORD *)(a1 + 64) - (_QWORD)v101);
    v96 = v159;
  }
  *(_QWORD *)(a1 + 56) = v96;
  *(_QWORD *)(a1 + 48) = v169;
  *(_QWORD *)(a1 + 64) = v148;
LABEL_30:
  v29 = sub_160F9A0(*(_QWORD *)(a2 + 8), &unk_4F98E5C, 1);
  if ( !v29 )
    goto LABEL_38;
  v30 = (*(__int64 (__fastcall **)(__int64, void *))(*(_QWORD *)v29 + 104LL))(v29, &unk_4F98E5C);
  if ( !v30 )
    goto LABEL_38;
  v31 = *(_QWORD **)(v30 + 160);
  v32 = (_QWORD *)sub_22077B0(16);
  v33 = v32;
  if ( v32 )
  {
    v32[1] = v31;
    *v31 = a1;
    *v32 = &unk_49E8390;
  }
  v34 = *(__int64 **)(a1 + 56);
  if ( v34 != *(__int64 **)(a1 + 64) )
  {
    if ( v34 )
    {
      *v34 = (__int64)v32;
      v34 = *(__int64 **)(a1 + 56);
    }
    *(_QWORD *)(a1 + 56) = v34 + 1;
    goto LABEL_38;
  }
  v76 = (__int64)v34 - *(_QWORD *)(a1 + 48);
  v156 = *(__int64 **)(a1 + 48);
  v77 = v76 >> 3;
  if ( v76 >> 3 == 0xFFFFFFFFFFFFFFFLL )
    goto LABEL_236;
  v78 = 1;
  if ( v77 )
    v78 = v76 >> 3;
  v56 = __CFADD__(v78, v77);
  v79 = v78 + v77;
  if ( v56 )
  {
    v80 = 0x7FFFFFFFFFFFFFF8LL;
  }
  else
  {
    if ( !v79 )
    {
      v147 = 0;
      v83 = 8;
      v168 = 0;
      goto LABEL_113;
    }
    if ( v79 > 0xFFFFFFFFFFFFFFFLL )
      v79 = 0xFFFFFFFFFFFFFFFLL;
    v80 = 8 * v79;
  }
  v81 = sub_22077B0(v80);
  v82 = v81 + v80;
  v168 = (_QWORD *)v81;
  v83 = v81 + 8;
  v147 = v82;
LABEL_113:
  v84 = (_QWORD *)((char *)v168 + v76);
  if ( v84 )
    *v84 = v33;
  v85 = v156;
  if ( v34 != v156 )
  {
    for ( n = v168; ; ++n )
    {
      v87 = *v85;
      if ( n )
      {
        *n = v87;
        *v85 = 0;
      }
      else if ( v87 )
      {
        (*(void (__fastcall **)(__int64))(*(_QWORD *)v87 + 8LL))(v87);
      }
      if ( v34 == ++v85 )
        break;
    }
    v83 = (__int64)(n + 2);
  }
  v88 = v156;
  if ( v156 )
  {
    v157 = v83;
    j_j___libc_free_0(v88, *(_QWORD *)(a1 + 64) - (_QWORD)v88);
    v83 = v157;
  }
  *(_QWORD *)(a1 + 56) = v83;
  *(_QWORD *)(a1 + 48) = v168;
  *(_QWORD *)(a1 + 64) = v147;
LABEL_38:
  v35 = sub_160F9A0(*(_QWORD *)(a2 + 8), &unk_4F98A7C, 1);
  if ( !v35 )
    goto LABEL_46;
  v36 = (*(__int64 (__fastcall **)(__int64, void *))(*(_QWORD *)v35 + 104LL))(v35, &unk_4F98A7C);
  if ( !v36 )
    goto LABEL_46;
  v37 = *(_QWORD **)(v36 + 160);
  v38 = (_QWORD *)sub_22077B0(16);
  v39 = v38;
  if ( v38 )
  {
    v38[1] = v37;
    *v37 = a1;
    *v38 = &unk_49E8470;
  }
  v40 = *(__int64 **)(a1 + 56);
  if ( v40 != *(__int64 **)(a1 + 64) )
  {
    if ( v40 )
    {
      *v40 = (__int64)v38;
      v40 = *(__int64 **)(a1 + 56);
    }
    *(_QWORD *)(a1 + 56) = v40 + 1;
    goto LABEL_46;
  }
  v63 = (__int64)v40 - *(_QWORD *)(a1 + 48);
  v154 = *(__int64 **)(a1 + 48);
  v64 = v63 >> 3;
  if ( v63 >> 3 == 0xFFFFFFFFFFFFFFFLL )
    goto LABEL_236;
  v65 = 1;
  if ( v64 )
    v65 = v63 >> 3;
  v56 = __CFADD__(v65, v64);
  v66 = v65 + v64;
  if ( v56 )
  {
    v67 = 0x7FFFFFFFFFFFFFF8LL;
  }
  else
  {
    if ( !v66 )
    {
      v146 = 0;
      v70 = 8;
      v167 = 0;
      goto LABEL_90;
    }
    if ( v66 > 0xFFFFFFFFFFFFFFFLL )
      v66 = 0xFFFFFFFFFFFFFFFLL;
    v67 = 8 * v66;
  }
  v68 = sub_22077B0(v67);
  v69 = v68 + v67;
  v167 = (_QWORD *)v68;
  v70 = v68 + 8;
  v146 = v69;
LABEL_90:
  v71 = (_QWORD *)((char *)v167 + v63);
  if ( v71 )
    *v71 = v39;
  v72 = v154;
  if ( v40 != v154 )
  {
    for ( ii = v167; ; ++ii )
    {
      v74 = *v72;
      if ( ii )
      {
        *ii = v74;
        *v72 = 0;
      }
      else if ( v74 )
      {
        (*(void (__fastcall **)(__int64))(*(_QWORD *)v74 + 8LL))(v74);
      }
      if ( v40 == ++v72 )
        break;
    }
    v70 = (__int64)(ii + 2);
  }
  v75 = v154;
  if ( v154 )
  {
    v155 = v70;
    j_j___libc_free_0(v75, *(_QWORD *)(a1 + 64) - (_QWORD)v75);
    v70 = v155;
  }
  *(_QWORD *)(a1 + 56) = v70;
  *(_QWORD *)(a1 + 48) = v167;
  *(_QWORD *)(a1 + 64) = v146;
LABEL_46:
  v41 = sub_160F9A0(*(_QWORD *)(a2 + 8), &unk_4F98A84, 1);
  if ( !v41 )
    return a1;
  v42 = (*(__int64 (__fastcall **)(__int64, void *))(*(_QWORD *)v41 + 104LL))(v41, &unk_4F98A84);
  if ( !v42 )
    return a1;
  v43 = *(_QWORD **)(v42 + 160);
  v44 = (_QWORD *)sub_22077B0(16);
  v45 = v44;
  if ( v44 )
  {
    v44[1] = v43;
    *v43 = a1;
    *v44 = &unk_49E84E0;
  }
  v46 = *(char **)(a1 + 56);
  if ( v46 != *(char **)(a1 + 64) )
  {
    if ( v46 )
    {
      *(_QWORD *)v46 = v44;
      v46 = *(char **)(a1 + 56);
    }
    *(_QWORD *)(a1 + 56) = v46 + 8;
    return a1;
  }
  v52 = *(char **)(a1 + 48);
  v53 = (char *)(v46 - v52);
  v54 = (v46 - v52) >> 3;
  if ( v54 == 0xFFFFFFFFFFFFFFFLL )
LABEL_236:
    sub_4262D8((__int64)"vector::_M_realloc_insert");
  v55 = 1;
  if ( v54 )
    v55 = (v46 - v52) >> 3;
  v56 = __CFADD__(v55, v54);
  v57 = v55 + v54;
  if ( v56 )
  {
    v138 = 0x7FFFFFFFFFFFFFF8LL;
LABEL_224:
    v152 = v45;
    v139 = sub_22077B0(v138);
    v45 = v152;
    v53 = (char *)(v46 - v52);
    v140 = v139 + v138;
    v166 = v139;
    v58 = v139 + 8;
    v153 = v140;
    goto LABEL_67;
  }
  if ( v57 )
  {
    if ( v57 > 0xFFFFFFFFFFFFFFFLL )
      v57 = 0xFFFFFFFFFFFFFFFLL;
    v138 = 8 * v57;
    goto LABEL_224;
  }
  v153 = 0;
  v58 = 8;
  v166 = 0;
LABEL_67:
  v59 = &v53[v166];
  if ( v59 )
    *(_QWORD *)v59 = v45;
  if ( v46 != v52 )
  {
    v60 = (_QWORD *)v166;
    v61 = v52;
    while ( 1 )
    {
      v62 = *(_QWORD *)v61;
      if ( v60 )
      {
        *v60 = v62;
        *(_QWORD *)v61 = 0;
      }
      else if ( v62 )
      {
        (*(void (__fastcall **)(__int64, __int64, _QWORD *))(*(_QWORD *)v62 + 8LL))(v62, v55, v45);
      }
      v61 += 8;
      if ( v46 == v61 )
        break;
      ++v60;
    }
    v58 = (__int64)(v60 + 2);
  }
  if ( v52 )
  {
    v145 = v58;
    j_j___libc_free_0(v52, *(_QWORD *)(a1 + 64) - (_QWORD)v52);
    v58 = v145;
  }
  *(_QWORD *)(a1 + 56) = v58;
  *(_QWORD *)(a1 + 48) = v166;
  *(_QWORD *)(a1 + 64) = v153;
  return a1;
}
