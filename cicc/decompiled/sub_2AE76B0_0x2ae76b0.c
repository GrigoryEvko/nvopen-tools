// Function: sub_2AE76B0
// Address: 0x2ae76b0
//
void __fastcall sub_2AE76B0(__int64 *a1, __int64 *a2, __int64 a3, __int64 a4)
{
  __int64 v4; // rbx
  __int64 v5; // rax
  int v6; // esi
  unsigned __int64 *v7; // rdi
  int v8; // r13d
  __int64 v9; // rax
  unsigned __int64 v10; // rax
  __int64 *v11; // rbx
  __int64 *v12; // r14
  __int64 v13; // rax
  __int64 v14; // r15
  _QWORD *v15; // rax
  unsigned __int64 v16; // rdi
  unsigned __int64 v17; // rbx
  __int64 v18; // r12
  char v19; // al
  int v20; // edx
  __int64 v21; // rcx
  __int64 v22; // rax
  _QWORD *v23; // r14
  __int64 v24; // r13
  __int64 v25; // rax
  __int64 v26; // r8
  __int64 v27; // r13
  __int64 v28; // r15
  __int64 v29; // rcx
  __int64 v30; // rdx
  _BYTE *v31; // r9
  __int64 v32; // r15
  __int64 *v33; // rbx
  __int64 v34; // rax
  __int64 v35; // rax
  __int64 v36; // r15
  __int64 v37; // r8
  __int64 v38; // r9
  __int64 v39; // rsi
  __int64 v40; // rax
  unsigned __int64 v41; // rcx
  __int64 v42; // rax
  __int64 v43; // rcx
  __int64 v44; // r8
  __int64 v45; // r9
  __int64 v46; // rax
  unsigned __int64 v47; // rdx
  __int64 v48; // rax
  __int64 v49; // rax
  __int64 v50; // rbx
  __int64 v51; // rax
  __int64 v52; // r14
  __int64 v53; // r15
  __int64 *v54; // rdi
  int v55; // eax
  __int64 v56; // rbx
  __int64 (__fastcall *v57)(__int64); // rax
  __int64 v58; // r15
  __int64 v59; // rax
  char v60; // r13
  __int64 v61; // rax
  __int64 *v62; // rax
  int v63; // eax
  int v64; // r13d
  __int64 v65; // rax
  _QWORD *v66; // r14
  __int64 v67; // rcx
  __int64 v68; // rax
  unsigned __int64 v69; // rdx
  __int64 *v70; // rdx
  __int64 v71; // rax
  __int64 *v72; // rsi
  __int64 v73; // rcx
  __int64 v74; // rax
  __int64 *v75; // rax
  __int64 v76; // r15
  char v77; // cl
  char v78; // cl
  char v79; // cl
  char v80; // cl
  __int64 v81; // r13
  __int64 v82; // rax
  __int64 v83; // r12
  __int64 v84; // rbx
  __int64 v85; // r12
  __int64 v86; // rdi
  unsigned __int64 v87; // rdi
  __int64 v88; // r8
  __int64 v89; // r9
  __int64 v90; // rax
  unsigned __int64 v91; // rdx
  __int64 v92; // r12
  __int64 *v93; // rax
  __int64 v94; // rax
  __int64 v95; // rax
  __int64 *v96; // rbx
  __int64 *v97; // r12
  __int64 v98; // rdi
  __int64 v99; // r12
  __int64 (__fastcall *v100)(__int64); // rax
  __int64 v101; // rax
  __int64 v102; // r9
  __int64 v103; // r10
  __int64 v104; // r13
  __int64 v105; // r12
  __int64 v106; // rdx
  unsigned __int64 v107; // rax
  __int64 v108; // r10
  __int64 v109; // rax
  __int64 v110; // rcx
  __int64 v111; // r10
  __int64 v112; // rax
  __int64 v113; // r13
  __int64 v114; // r8
  unsigned int v115; // eax
  unsigned int v116; // ebx
  __int64 v117; // rcx
  __int64 v118; // rax
  __int64 v119; // rsi
  __int64 v120; // rax
  unsigned int v121; // ebx
  __int64 v122; // r15
  __int64 v123; // rdx
  unsigned int v124; // esi
  __int64 v125; // r10
  __int64 v126; // rax
  __int64 v127; // rcx
  __int64 v128; // rsi
  unsigned __int8 v129; // al
  __int64 v130; // r12
  _QWORD **v131; // rdx
  char v132; // al
  char v133; // al
  char v134; // al
  __int64 v135; // rax
  __int64 v136; // [rsp+8h] [rbp-1C8h]
  __int64 v138; // [rsp+20h] [rbp-1B0h]
  char v139; // [rsp+33h] [rbp-19Dh]
  unsigned int v140; // [rsp+34h] [rbp-19Ch]
  __int64 v141; // [rsp+38h] [rbp-198h]
  unsigned __int64 *v143; // [rsp+50h] [rbp-180h]
  __int64 v144; // [rsp+58h] [rbp-178h]
  const void *v145; // [rsp+60h] [rbp-170h]
  __int64 *v146; // [rsp+60h] [rbp-170h]
  __int64 v147; // [rsp+68h] [rbp-168h]
  __int64 v148; // [rsp+68h] [rbp-168h]
  __int64 v149; // [rsp+68h] [rbp-168h]
  unsigned __int64 v150; // [rsp+78h] [rbp-158h]
  __int64 v151; // [rsp+78h] [rbp-158h]
  char v152; // [rsp+80h] [rbp-150h]
  __int64 v153; // [rsp+80h] [rbp-150h]
  __int64 v154; // [rsp+80h] [rbp-150h]
  __int64 v155; // [rsp+80h] [rbp-150h]
  __int64 v156; // [rsp+80h] [rbp-150h]
  __int64 v157; // [rsp+80h] [rbp-150h]
  __int64 v158; // [rsp+80h] [rbp-150h]
  __int64 v159; // [rsp+80h] [rbp-150h]
  int v160; // [rsp+88h] [rbp-148h]
  __int64 i; // [rsp+90h] [rbp-140h]
  __int64 v162; // [rsp+90h] [rbp-140h]
  __int64 v163; // [rsp+90h] [rbp-140h]
  __int64 v164; // [rsp+90h] [rbp-140h]
  __int64 v165; // [rsp+90h] [rbp-140h]
  __int64 v167; // [rsp+A0h] [rbp-130h]
  __int64 v168; // [rsp+A0h] [rbp-130h]
  __int64 v169; // [rsp+A8h] [rbp-128h]
  __int64 v170; // [rsp+A8h] [rbp-128h]
  __int64 v171; // [rsp+A8h] [rbp-128h]
  __int64 v172; // [rsp+A8h] [rbp-128h]
  __int64 v173; // [rsp+A8h] [rbp-128h]
  __int64 v174; // [rsp+A8h] [rbp-128h]
  unsigned __int64 *v175; // [rsp+B0h] [rbp-120h]
  __int64 v176; // [rsp+B0h] [rbp-120h]
  __int64 v177; // [rsp+B0h] [rbp-120h]
  __int64 v178; // [rsp+B0h] [rbp-120h]
  char v179; // [rsp+CFh] [rbp-101h] BYREF
  __int64 v180; // [rsp+D0h] [rbp-100h] BYREF
  __int64 v181; // [rsp+D8h] [rbp-F8h] BYREF
  __int64 v182; // [rsp+E0h] [rbp-F0h] BYREF
  __int64 v183; // [rsp+E8h] [rbp-E8h] BYREF
  __int64 v184[2]; // [rsp+F0h] [rbp-E0h] BYREF
  __int64 v185; // [rsp+100h] [rbp-D0h] BYREF
  __int64 v186; // [rsp+108h] [rbp-C8h]
  _BYTE v187[16]; // [rsp+110h] [rbp-C0h] BYREF
  __int16 v188; // [rsp+120h] [rbp-B0h]
  unsigned __int64 v189; // [rsp+130h] [rbp-A0h] BYREF
  __int64 v190; // [rsp+138h] [rbp-98h]
  __int64 v191; // [rsp+140h] [rbp-90h]
  __int64 v192; // [rsp+148h] [rbp-88h]
  unsigned __int64 *v193; // [rsp+150h] [rbp-80h]
  __int64 v194; // [rsp+158h] [rbp-78h]
  __int64 *v195; // [rsp+160h] [rbp-70h] BYREF
  __int64 v196; // [rsp+168h] [rbp-68h]
  _BYTE v197[96]; // [rsp+170h] [rbp-60h] BYREF

  v140 = a4;
  v139 = BYTE4(a4);
  v136 = sub_2BF3F10(*a2);
  v4 = sub_2BF04D0(v136);
  v5 = *(_QWORD *)(*a2 + 8);
  if ( *(_DWORD *)(v5 + 64) != 1 )
    BUG();
  v138 = **(_QWORD **)(**(_QWORD **)(v5 + 56) + 56LL);
  v195 = (__int64 *)v197;
  v196 = 0x600000000LL;
  v141 = sub_2BF05A0(v4);
  for ( i = *(_QWORD *)(v4 + 120); i != v141; i = *(_QWORD *)(i + 8) )
  {
    if ( !i )
      BUG();
    if ( *(_BYTE *)(i - 16) == 36 && *(_BYTE *)(i + 136) && (v140 != 1 || v139 == 1 || *(_BYTE *)(i + 137)) )
    {
      v144 = *(_QWORD *)(i + 128);
      v6 = *(_DWORD *)(v144 + 40);
      v189 = 0;
      v160 = v6;
      v193 = (unsigned __int64 *)&v195;
      v190 = 0;
      v191 = 0;
      v192 = 0;
      v194 = 0;
      v185 = i - 24;
      sub_2AE7540((__int64)&v189, &v185);
      v7 = v193;
      if ( (_DWORD)v194 )
      {
        v8 = 0;
        v9 = 0;
        do
        {
          v10 = v7[v9];
          v11 = *(__int64 **)(v10 + 112);
          v12 = &v11[*(unsigned int *)(v10 + 120)];
          if ( v12 != v11 )
          {
            do
            {
              v13 = *v11;
              if ( !*v11 )
              {
                v185 = 0;
                BUG();
              }
              v185 = v13 - 40;
              if ( sub_2BF09E0(*(_QWORD *)(v13 + 40)) )
                sub_2AE7540((__int64)&v189, &v185);
              ++v11;
            }
            while ( v12 != v11 );
            v7 = v193;
          }
          v9 = (unsigned int)(v8 + 1);
          v8 = v9;
        }
        while ( (_DWORD)v194 != (_DWORD)v9 );
      }
      else
      {
        v9 = 0;
      }
      v143 = &v7[v9];
      if ( v143 != v7 + 1 )
      {
        v175 = v7 + 1;
        v14 = i - 24;
        while ( 1 )
        {
          v17 = *v175;
          v18 = *(_QWORD *)(*v175 + 80);
          v169 = *(_QWORD *)(*v175 + 136);
          if ( v160 == 16 )
          {
            v62 = *(__int64 **)(v17 + 48);
            v184[0] = *v62;
            v184[1] = v62[1];
            v63 = sub_B45210(v169);
            v183 = 0;
            v188 = 257;
            v64 = v63;
            v65 = sub_22077B0(0xC8u);
            v66 = (_QWORD *)v65;
            if ( v65 )
              sub_2C1AF80(v65, 18, (unsigned int)v184, 2, v64, (unsigned int)&v183, (__int64)&v185);
            sub_9C6650(&v183);
            v66[10] = v18;
            v67 = *(_QWORD *)(v17 + 24);
            v66[4] = v17 + 24;
            v68 = v66[3];
            v69 = (unsigned __int64)(v66 + 3);
            v23 = v66 + 12;
            v67 &= 0xFFFFFFFFFFFFFFF8LL;
            *(v23 - 9) = v67 | v68 & 7;
            *(_QWORD *)(v67 + 8) = v69;
            *(_QWORD *)(v17 + 24) = *(_QWORD *)(v17 + 24) & 7LL | v69;
            goto LABEL_30;
          }
          v19 = *(_BYTE *)(v17 + 8);
          if ( v19 == 25 )
          {
            if ( *(_BYTE *)(i + 136) )
            {
              v15 = *(_QWORD **)(v17 + 48);
              v16 = v17 + 96;
              if ( *v15 == i + 72 )
                sub_2BF1250(v16, v15[2 - (*(_DWORD *)(v17 + 56) & 1u)]);
              else
                sub_2BF1250(v16, *v15);
              goto LABEL_22;
            }
            v20 = 1;
            v21 = 8;
            if ( (unsigned int)(v160 - 6) <= 3 )
              goto LABEL_28;
          }
          else if ( (unsigned int)(v160 - 6) <= 3 )
          {
            goto LABEL_26;
          }
          if ( (unsigned int)(v160 - 12) > 3 )
          {
            v21 = 0;
            v20 = 0;
            goto LABEL_28;
          }
LABEL_26:
          if ( v19 != 23 )
          {
            v20 = 1;
            v21 = 8;
LABEL_28:
            v22 = *(_QWORD *)(v17 + 48);
            v23 = *(_QWORD **)(v22 + v21);
            if ( v23 == (_QWORD *)(v14 + 96) )
              v23 = *(_QWORD **)(v22 + 8LL * (unsigned int)(v20 + 1));
LABEL_30:
            v24 = *(_QWORD *)(v169 + 40);
            v25 = a1[6];
            if ( *(_BYTE *)(v25 + 108) && *(_DWORD *)(v25 + 100)
              || (unsigned __int8)sub_31A6C30(*(_QWORD *)(v25 + 440), *(_QWORD *)(v169 + 40)) )
            {
              v167 = sub_2AB6F10(a3, v24);
            }
            else
            {
              v167 = 0;
            }
            v152 = 0;
            if ( !(unsigned __int8)sub_31A4BE0(*(_QWORD *)(a1[6] + 496)) )
              v152 = *(_BYTE *)(v144 + 65);
            v181 = *(_QWORD *)(v169 + 48);
            if ( v181 )
              sub_2AAAFA0(&v181);
            v27 = sub_22077B0(0xA8u);
            if ( v27 )
            {
              v28 = v14 + 96;
              v182 = v181;
              if ( v181 )
              {
                sub_2AAAFA0(&v182);
                v185 = v28;
                v186 = (__int64)v23;
                v183 = v182;
                if ( v182 )
                {
                  sub_2AAAFA0(&v183);
                  v184[0] = v183;
                  if ( v183 )
                    sub_2AAAFA0(v184);
LABEL_42:
                  v29 = v27 + 64;
                  v30 = 0;
                  v31 = v187;
                  v150 = v17;
                  v32 = v185;
                  *(_QWORD *)v27 = &unk_4A231A8;
                  *(_QWORD *)(v27 + 24) = 0;
                  *(_QWORD *)(v27 + 32) = 0;
                  *(_QWORD *)(v27 + 40) = &unk_4A23170;
                  *(_QWORD *)(v27 + 56) = 0x200000000LL;
                  v147 = v27 + 48;
                  *(_BYTE *)(v27 + 8) = 7;
                  *(_QWORD *)(v27 + 16) = 0;
                  v33 = &v185;
                  v145 = (const void *)(v27 + 64);
                  for ( *(_QWORD *)(v27 + 48) = v27 + 64; ; v29 = *(_QWORD *)(v27 + 48) )
                  {
                    *(_QWORD *)(v29 + 8 * v30) = v32;
                    ++*(_DWORD *)(v27 + 56);
                    v34 = *(unsigned int *)(v32 + 24);
                    if ( v34 + 1 > (unsigned __int64)*(unsigned int *)(v32 + 28) )
                    {
                      sub_C8D5F0(v32 + 16, (const void *)(v32 + 32), v34 + 1, 8u, v26, (__int64)v31);
                      v34 = *(unsigned int *)(v32 + 24);
                    }
                    ++v33;
                    *(_QWORD *)(*(_QWORD *)(v32 + 16) + 8 * v34) = v27 + 40;
                    ++*(_DWORD *)(v32 + 24);
                    if ( v33 == (__int64 *)v187 )
                      break;
                    v30 = *(unsigned int *)(v27 + 56);
                    v32 = *v33;
                    if ( v30 + 1 > (unsigned __int64)*(unsigned int *)(v27 + 60) )
                    {
                      sub_C8D5F0(v147, v145, v30 + 1, 8u, v26, (__int64)v31);
                      v30 = *(unsigned int *)(v27 + 56);
                    }
                  }
                  *(_QWORD *)(v27 + 80) = 0;
                  v17 = v150;
                  *(_QWORD *)(v27 + 40) = &unk_4A23AA8;
                  v35 = v184[0];
                  *(_QWORD *)v27 = &unk_4A23A70;
                  *(_QWORD *)(v27 + 88) = v35;
                  if ( v35 )
                  {
                    sub_2AAAFA0((__int64 *)(v27 + 88));
                    if ( v184[0] )
                      sub_B91220((__int64)v184, v184[0]);
                  }
                  v36 = v27 + 96;
                  sub_2BF0340(v27 + 96, 1, v169, v27);
                  v39 = v183;
                  *(_QWORD *)v27 = &unk_4A231C8;
                  *(_QWORD *)(v27 + 40) = &unk_4A23200;
                  *(_QWORD *)(v27 + 96) = &unk_4A23238;
                  if ( v39 )
                    sub_B91220((__int64)&v183, v39);
                  *(_QWORD *)v27 = &unk_4A24438;
                  *(_QWORD *)(v27 + 96) = &unk_4A244A8;
                  *(_QWORD *)(v27 + 40) = &unk_4A24470;
                  *(_QWORD *)(v27 + 152) = v144;
                  *(_BYTE *)(v27 + 160) = v152;
                  if ( v167 )
                  {
                    v40 = *(unsigned int *)(v27 + 56);
                    v41 = *(unsigned int *)(v27 + 60);
                    *(_BYTE *)(v27 + 161) = 1;
                    if ( v40 + 1 > v41 )
                    {
                      sub_C8D5F0(v147, v145, v40 + 1, 8u, v37, v38);
                      v40 = *(unsigned int *)(v27 + 56);
                    }
                    *(_QWORD *)(*(_QWORD *)(v27 + 48) + 8 * v40) = v167;
                    ++*(_DWORD *)(v27 + 56);
                    v42 = *(unsigned int *)(v167 + 24);
                    if ( v42 + 1 > (unsigned __int64)*(unsigned int *)(v167 + 28) )
                    {
                      sub_C8D5F0(v167 + 16, (const void *)(v167 + 32), v42 + 1, 8u, v37, v38);
                      v42 = *(unsigned int *)(v167 + 24);
                    }
                    *(_QWORD *)(*(_QWORD *)(v167 + 16) + 8 * v42) = v27 + 40;
                    ++*(_DWORD *)(v167 + 24);
                  }
                  else
                  {
                    *(_BYTE *)(v27 + 161) = 0;
                  }
                  if ( v182 )
                    sub_B91220((__int64)&v182, v182);
LABEL_62:
                  if ( v181 )
                    sub_B91220((__int64)&v181, v181);
                  *(_QWORD *)(v27 + 80) = v18;
                  v43 = *(_QWORD *)(v18 + 112);
                  *(_QWORD *)(v27 + 32) = v18 + 112;
                  v43 &= 0xFFFFFFFFFFFFFFF8LL;
                  *(_QWORD *)(v27 + 24) = v43 | *(_QWORD *)(v27 + 24) & 7LL;
                  *(_QWORD *)(v43 + 8) = v27 + 24;
                  *(_QWORD *)(v18 + 112) = *(_QWORD *)(v18 + 112) & 7LL | (v27 + 24);
                  sub_2BF1250(v17 + 96, v36);
                  v46 = (unsigned int)v196;
                  v47 = (unsigned int)v196 + 1LL;
                  if ( v47 > HIDWORD(v196) )
                  {
                    sub_C8D5F0((__int64)&v195, v197, v47, 8u, v44, v45);
                    v46 = (unsigned int)v196;
                  }
                  v14 = v27;
                  v195[v46] = v17;
                  LODWORD(v196) = v196 + 1;
                  goto LABEL_22;
                }
              }
              else
              {
                v185 = v28;
                v186 = (__int64)v23;
                v183 = 0;
              }
              v184[0] = 0;
              goto LABEL_42;
            }
            v36 = 96;
            goto LABEL_62;
          }
LABEL_22:
          if ( v143 == ++v175 )
          {
            v7 = v193;
            break;
          }
        }
      }
      if ( v7 != (unsigned __int64 *)&v195 )
        _libc_free((unsigned __int64)v7);
      sub_C7D6A0(v190, 8LL * (unsigned int)v192, 8);
    }
  }
  v48 = *(_QWORD *)(sub_2BF0520(v136) + 120);
  v146 = a1 + 67;
  if ( !v48 )
    BUG();
  a1[67] = *(_QWORD *)(v48 + 56);
  a1[68] = v48;
  v151 = sub_2BF05A0(v138);
  v49 = sub_2BF3F10(*a2);
  v50 = sub_2BF04D0(v49);
  v51 = sub_2BF05A0(v50);
  v52 = *(_QWORD *)(v50 + 120);
  v168 = v51;
  if ( v52 != v51 )
  {
    while ( 1 )
    {
      if ( !v52 )
        BUG();
      if ( *(_BYTE *)(v52 - 16) != 36 )
        goto LABEL_86;
      v56 = *(_QWORD *)(v52 + 128);
      v57 = *(__int64 (__fastcall **)(__int64))(*(_QWORD *)(v52 - 24) + 40LL);
      if ( v57 == sub_2AA7530 )
        break;
      v176 = v57(v52 - 24);
      v100 = *(__int64 (__fastcall **)(__int64))(*(_QWORD *)(v52 - 24) + 40LL);
      if ( v100 == sub_2AA7530 )
        goto LABEL_91;
      v58 = v100(v52 - 24);
LABEL_92:
      if ( !*(_BYTE *)(v52 + 136) )
      {
        v59 = a1[6];
        v60 = *(_BYTE *)(v59 + 108);
        if ( v60 )
        {
          if ( *(_DWORD *)(v59 + 100) && *(_BYTE *)(sub_2BF0490(v176) + 8) != 8 )
          {
            v128 = sub_2AB6F10(a3, **(_QWORD **)(*a1 + 32));
            v129 = *(_BYTE *)(*(_QWORD *)(*(_QWORD *)(**(_QWORD **)(v52 + 24) + 40LL) + 8LL) + 8LL);
            if ( v129 <= 3u || v129 == 5 || (v129 & 0xFD) == 4 )
              LODWORD(v185) = *(_DWORD *)(v56 + 44);
            else
              v60 = 0;
            if ( (LOWORD(v193) = 257,
                  v184[0] = 0,
                  v58 = sub_2AAF680(v146, v128, v176, v52 + 72, v184, (void **)&v189, v185, v60),
                  sub_9C6650(v184),
                  sub_2BF1090(v176, v58, sub_2AA76C0, &v189),
                  v130 = a1[6],
                  sub_1022EF0(*(_DWORD *)(*(_QWORD *)(v52 + 128) + 40LL)),
                  *(_BYTE *)(v130 + 108))
              && *(_DWORD *)(v130 + 100) == 5
              || (_BYTE)qword_500D4A8
              || (unsigned __int8)sub_DFE3A0(*(_QWORD *)(v130 + 448)) )
            {
              sub_2AAED30(v52 + 16, 1u, v58);
            }
          }
        }
      }
      if ( !*(_DWORD *)(v52 + 32) )
        BUG();
      v171 = *(_QWORD *)(*(_QWORD *)(**(_QWORD **)(v52 + 24) + 40LL) + 8LL);
      if ( v139 )
      {
        if ( !v140 )
          goto LABEL_100;
      }
      else if ( v140 <= 1 )
      {
        goto LABEL_100;
      }
      v162 = *(_QWORD *)(v56 + 56);
      if ( v171 != v162 && (unsigned int)(*(_DWORD *)(v56 + 40) - 17) > 1 )
      {
        v101 = sub_22077B0(0xB0u);
        v103 = v162;
        v104 = v101;
        if ( v101 )
        {
          *(_QWORD *)(v101 + 24) = 0;
          v105 = v101 + 40;
          *(_QWORD *)(v101 + 32) = 0;
          v164 = v101;
          v184[0] = 0;
          *(_BYTE *)(v101 + 8) = 16;
          *(_QWORD *)v101 = &unk_4A231A8;
          v185 = 0;
          *(_QWORD *)(v101 + 16) = 0;
          *(_QWORD *)(v101 + 40) = &unk_4A23170;
          *(_QWORD *)(v101 + 48) = v101 + 64;
          v189 = 0;
          *(_QWORD *)(v101 + 64) = v58;
          *(_QWORD *)(v101 + 56) = 0x200000001LL;
          v106 = *(unsigned int *)(v58 + 24);
          if ( v106 + 1 > (unsigned __int64)*(unsigned int *)(v58 + 28) )
          {
            v154 = v103;
            sub_C8D5F0(v58 + 16, (const void *)(v58 + 32), v106 + 1, 8u, v106 + 1, v102);
            v106 = *(unsigned int *)(v58 + 24);
            v103 = v154;
          }
          *(_QWORD *)(*(_QWORD *)(v58 + 16) + 8 * v106) = v105;
          ++*(_DWORD *)(v58 + 24);
          *(_QWORD *)(v104 + 80) = 0;
          *(_QWORD *)(v104 + 40) = &unk_4A23AA8;
          v107 = v189;
          *(_QWORD *)v104 = &unk_4A23A70;
          *(_QWORD *)(v104 + 88) = v107;
          if ( v107 )
          {
            v155 = v103;
            sub_2AAAFA0((__int64 *)(v104 + 88));
            v103 = v155;
          }
          v156 = v103;
          sub_9C6650(&v189);
          sub_2BF0340(v104 + 96, 1, 0, v104);
          *(_QWORD *)v104 = &unk_4A231C8;
          *(_QWORD *)(v104 + 40) = &unk_4A23200;
          *(_QWORD *)(v104 + 96) = &unk_4A23238;
          sub_9C6650(&v185);
          *(_BYTE *)(v104 + 152) = 7;
          *(_DWORD *)(v104 + 156) = 0;
          *(_QWORD *)v104 = &unk_4A23258;
          *(_QWORD *)(v104 + 40) = &unk_4A23290;
          *(_QWORD *)(v104 + 96) = &unk_4A232C8;
          sub_9C6650(v184);
          *(_DWORD *)(v104 + 160) = 38;
          *(_QWORD *)(v104 + 168) = v156;
          *(_QWORD *)v104 = &unk_4A23F58;
          *(_QWORD *)(v104 + 40) = &unk_4A23F90;
          *(_QWORD *)(v104 + 96) = &unk_4A23FC8;
        }
        else
        {
          v164 = 0;
        }
        if ( *(_BYTE *)(v56 + 64) )
        {
          v125 = sub_22077B0(0xB0u);
          if ( v125 )
          {
            if ( v104 )
              v126 = v104 + 96;
            else
              v126 = 0;
            v185 = v126;
            v159 = v125;
            v183 = 0;
            v184[0] = 0;
            v189 = 0;
            sub_2AAF310(v125, 16, &v185, 1, (__int64 *)&v189, (__int64)&v185);
            sub_9C6650(&v189);
            v127 = v159;
            v149 = v159;
            v158 = v159 + 96;
            sub_2BF0340(v158, 1, 0, v127);
            *(_QWORD *)v149 = &unk_4A231C8;
            *(_QWORD *)(v149 + 40) = &unk_4A23200;
            *(_QWORD *)(v149 + 96) = &unk_4A23238;
            sub_9C6650(v184);
            *(_BYTE *)(v149 + 152) = 7;
            *(_QWORD *)v149 = &unk_4A23258;
            *(_QWORD *)(v149 + 40) = &unk_4A23290;
            *(_QWORD *)(v149 + 96) = &unk_4A232C8;
            *(_DWORD *)(v149 + 156) = 0;
            sub_9C6650(&v183);
            v111 = v149;
            *(_DWORD *)(v149 + 160) = 40;
            *(_QWORD *)v149 = &unk_4A23F58;
            *(_QWORD *)(v149 + 96) = &unk_4A23FC8;
            *(_QWORD *)(v149 + 40) = &unk_4A23F90;
            *(_QWORD *)(v149 + 168) = v171;
            goto LABEL_164;
          }
        }
        else
        {
          v108 = sub_22077B0(0xB0u);
          if ( v108 )
          {
            if ( v104 )
              v109 = v104 + 96;
            else
              v109 = 0;
            v185 = v109;
            v157 = v108;
            v183 = 0;
            v184[0] = 0;
            v189 = 0;
            sub_2AAF310(v108, 16, &v185, 1, (__int64 *)&v189, (__int64)&v185);
            sub_9C6650(&v189);
            v110 = v157;
            v148 = v157;
            v158 = v157 + 96;
            sub_2BF0340(v158, 1, 0, v110);
            *(_QWORD *)v148 = &unk_4A231C8;
            *(_QWORD *)(v148 + 40) = &unk_4A23200;
            *(_QWORD *)(v148 + 96) = &unk_4A23238;
            sub_9C6650(v184);
            *(_BYTE *)(v148 + 152) = 7;
            *(_QWORD *)v148 = &unk_4A23258;
            *(_QWORD *)(v148 + 40) = &unk_4A23290;
            *(_QWORD *)(v148 + 96) = &unk_4A232C8;
            *(_DWORD *)(v148 + 156) = 0;
            sub_9C6650(&v183);
            v111 = v148;
            *(_DWORD *)(v148 + 160) = 39;
            *(_QWORD *)v148 = &unk_4A23F58;
            *(_QWORD *)(v148 + 96) = &unk_4A23FC8;
            *(_QWORD *)(v148 + 40) = &unk_4A23F90;
            *(_QWORD *)(v148 + 168) = v171;
LABEL_164:
            v173 = v111;
            v112 = sub_2BF0490(v58);
            sub_2C19DE0(v164, v112);
            sub_2C19DE0(v173, v104);
            if ( v58 == *(_QWORD *)(*(_QWORD *)(v52 + 24) + 8LL) )
            {
              v131 = (_QWORD **)(*(_QWORD *)(v173 + 16) & 0xFFFFFFFFFFFFFFF8LL);
              if ( (*(_QWORD *)(v173 + 16) & 4) != 0 )
                v131 = (_QWORD **)**v131;
              sub_2AAED30(v52 + 16, 1u, (__int64)v131);
            }
            v58 = v158;
            goto LABEL_100;
          }
        }
        v135 = sub_2BF0490(v58);
        sub_2C19DE0(v164, v135);
        sub_2C19DE0(0, v104);
        if ( v58 == *(_QWORD *)(*(_QWORD *)(v52 + 24) + 8LL) )
          BUG();
        v58 = 0;
      }
LABEL_100:
      v61 = sub_D47930(*a1);
      v180 = *(_QWORD *)(sub_986580(v61) + 48);
      if ( v180 )
      {
        sub_2AAAFA0(&v180);
        v186 = v58;
        v153 = v52 + 72;
        v185 = v52 + 72;
        v181 = v180;
        if ( v180 )
          sub_2AAAFA0(&v181);
      }
      else
      {
        v186 = v58;
        v153 = v52 + 72;
        v185 = v52 + 72;
        v181 = 0;
      }
      LOWORD(v193) = 257;
      v53 = sub_22077B0(0xC8u);
      if ( v53 )
      {
        v182 = v181;
        if ( v181 )
        {
          sub_2AAAFA0(&v182);
          v170 = v53;
          v183 = v182;
          if ( v182 )
          {
            sub_2AAAFA0(&v183);
            v184[0] = v183;
            if ( v183 )
              sub_2AAAFA0(v184);
            goto LABEL_82;
          }
        }
        else
        {
          v170 = v53;
          v183 = 0;
        }
        v184[0] = 0;
LABEL_82:
        sub_2AAF4A0(v53, 4, &v185, 2, v184, (__int64)&v185);
        sub_9C6650(v184);
        *(_BYTE *)(v53 + 152) = 7;
        *(_DWORD *)(v53 + 156) = 0;
        *(_QWORD *)v53 = &unk_4A23258;
        *(_QWORD *)(v53 + 40) = &unk_4A23290;
        *(_QWORD *)(v53 + 96) = &unk_4A232C8;
        sub_9C6650(&v183);
        *(_BYTE *)(v53 + 160) = 81;
        v54 = (__int64 *)(v53 + 168);
        v53 += 96;
        *(_QWORD *)(v53 - 96) = &unk_4A23B70;
        *(_QWORD *)(v53 - 56) = &unk_4A23BB8;
        *(_QWORD *)v53 = &unk_4A23BF0;
        sub_CA0F50(v54, (void **)&v189);
        sub_9C6650(&v182);
        sub_9C6650(&v181);
        goto LABEL_83;
      }
      sub_9C6650(&v181);
      v170 = 0;
LABEL_83:
      sub_2BF1090(v176, v53, sub_2AA76E0, &v179);
      sub_2C19DA0(v170, v138, v151);
      v55 = *(_DWORD *)(v56 + 40);
      if ( (unsigned int)(v55 - 17) <= 1 )
      {
        v70 = *(__int64 **)(v52 + 88);
        v71 = 8LL * *(unsigned int *)(v52 + 96);
        v72 = &v70[(unsigned __int64)v71 / 8];
        v73 = v71 >> 3;
        v74 = v71 >> 5;
        if ( v74 )
        {
          v75 = &v70[4 * v74];
          while ( 1 )
          {
            v76 = *v70;
            v77 = *(_BYTE *)(*v70 - 32);
            if ( v77 == 24 || v77 == 9 && **(_BYTE **)(v76 + 96) == 86 )
              goto LABEL_135;
            v76 = v70[1];
            v78 = *(_BYTE *)(v76 - 32);
            if ( v78 == 24 || v78 == 9 && **(_BYTE **)(v76 + 96) == 86 )
              goto LABEL_135;
            v76 = v70[2];
            v79 = *(_BYTE *)(v76 - 32);
            if ( v79 == 24 || v79 == 9 && **(_BYTE **)(v76 + 96) == 86 )
              goto LABEL_135;
            v76 = v70[3];
            v80 = *(_BYTE *)(v76 - 32);
            if ( v80 == 24 || v80 == 9 && **(_BYTE **)(v76 + 96) == 86 )
              goto LABEL_135;
            v70 += 4;
            if ( v75 == v70 )
            {
              v73 = v72 - v70;
              break;
            }
          }
        }
        if ( v73 != 2 )
        {
          if ( v73 != 3 )
          {
            if ( v73 != 1 )
            {
LABEL_134:
              v76 = *v72;
              if ( !*v72 )
                BUG();
              goto LABEL_135;
            }
LABEL_221:
            v76 = *v70;
            v134 = *(_BYTE *)(*v70 - 32);
            if ( v134 != 24 && (v134 != 9 || **(_BYTE **)(v76 + 96) != 86) )
              goto LABEL_134;
            goto LABEL_135;
          }
          v76 = *v70;
          v132 = *(_BYTE *)(*v70 - 32);
          if ( v132 == 24 || v132 == 9 && **(_BYTE **)(v76 + 96) == 86 )
            goto LABEL_135;
          ++v70;
        }
        v76 = *v70;
        v133 = *(_BYTE *)(*v70 - 32);
        if ( v133 != 24 && (v133 != 9 || **(_BYTE **)(v76 + 96) != 86) )
        {
          ++v70;
          goto LABEL_221;
        }
LABEL_135:
        v172 = v76 - 40;
        v81 = **(_QWORD **)(v76 + 8);
        v82 = sub_2BF0490(v81);
        v83 = v82;
        if ( v82 && *(_DWORD *)(v82 + 56) )
        {
          v121 = 0;
          v165 = v76;
          v122 = v82 + 40;
          do
          {
            while ( *(_QWORD *)(*(_QWORD *)(v83 + 48) + 8LL * v121) != v153 )
            {
              if ( ++v121 == *(_DWORD *)(v83 + 56) )
                goto LABEL_181;
            }
            v123 = 0;
            if ( *(_DWORD *)(v52 + 32) )
              v123 = **(_QWORD **)(v52 + 24);
            v124 = v121++;
            sub_2AAED30(v122, v124, v123);
          }
          while ( v121 != *(_DWORD *)(v83 + 56) );
LABEL_181:
          v76 = v165;
        }
        v84 = a1[67];
        v163 = a1[68];
        a1[67] = *(_QWORD *)(v76 + 40);
        a1[68] = v76 - 16;
        if ( *(_QWORD *)(*(_QWORD *)(v76 + 8) + 8LL) == v153 )
        {
          LOWORD(v193) = 257;
          v185 = 0;
          v81 = sub_2AB0C10(v146, v81, &v185, (void **)&v189);
          sub_9C6650(&v185);
        }
        LOWORD(v193) = 257;
        v185 = 0;
        v85 = sub_2AB0F70(v146, v153, v81, &v185, (void **)&v189);
        sub_9C6650(&v185);
        v86 = *(_QWORD *)(v76 - 24);
        if ( (v86 & 4) != 0 )
          v87 = **(_QWORD **)(v86 & 0xFFFFFFFFFFFFFFF8LL);
        else
          v87 = v86 & 0xFFFFFFFFFFFFFFF8LL;
        sub_2BF1250(v87, v85);
        v90 = (unsigned int)v196;
        v91 = (unsigned int)v196 + 1LL;
        if ( v91 > HIDWORD(v196) )
        {
          sub_C8D5F0((__int64)&v195, v197, v91, 8u, v88, v89);
          v90 = (unsigned int)v196;
        }
        v195[v90] = v172;
        LODWORD(v196) = v196 + 1;
        v92 = *a2;
        v93 = (__int64 *)sub_AA48A0(**(_QWORD **)(*a1 + 32));
        v94 = sub_ACD720(v93);
        v95 = sub_2AC42A0(v92, v94);
        sub_2AAED30(v52 + 16, 0, v95);
        if ( v84 )
        {
          a1[67] = v84;
          a1[68] = v163;
        }
        else
        {
          a1[67] = 0;
          a1[68] = 0;
        }
        goto LABEL_85;
      }
      if ( (unsigned int)(v55 - 19) <= 1 )
      {
        v113 = *a2;
        v114 = *(_QWORD *)(*(_QWORD *)(v56 + 24) + 8LL);
        v115 = *(_DWORD *)(v114 + 8) >> 8;
        v116 = v115 - 1;
        LODWORD(v190) = v115;
        v117 = 1LL << ((unsigned __int8)v115 - 1);
        if ( v115 <= 0x40 )
        {
          v189 = 0;
          goto LABEL_168;
        }
        v178 = 1LL << ((unsigned __int8)v115 - 1);
        v174 = v114;
        sub_C43690((__int64)&v189, 0, 0);
        v117 = v178;
        v114 = v174;
        if ( (unsigned int)v190 <= 0x40 )
LABEL_168:
          v189 |= v117;
        else
          *(_QWORD *)(v189 + 8LL * (v116 >> 6)) |= v178;
        v118 = sub_AD8D80(v114, (__int64)&v189);
        v119 = v118;
        if ( (unsigned int)v190 > 0x40 && v189 )
        {
          v177 = v118;
          j_j___libc_free_0_0(v189);
          v119 = v177;
        }
        v120 = sub_2AC42A0(v113, v119);
        sub_2AAED30(v52 + 16, 0, v120);
      }
LABEL_85:
      sub_9C6650(&v180);
LABEL_86:
      v52 = *(_QWORD *)(v52 + 8);
      if ( v52 == v168 )
        goto LABEL_144;
    }
    v176 = *(_QWORD *)(*(_QWORD *)(v52 + 24) + 8LL);
LABEL_91:
    v58 = *(_QWORD *)(*(_QWORD *)(v52 + 24) + 8LL);
    goto LABEL_92;
  }
LABEL_144:
  v96 = v195;
  v97 = &v195[(unsigned int)v196];
  if ( v97 != v195 )
  {
    do
    {
      v98 = *v96++;
      sub_2C19E60(v98);
    }
    while ( v97 != v96 );
  }
  v99 = *a2;
  sub_2C3AB70(*a2);
  if ( LOBYTE(qword_500D260[17]) )
    sub_2C4B640(v99);
  if ( v195 != (__int64 *)v197 )
    _libc_free((unsigned __int64)v195);
}
