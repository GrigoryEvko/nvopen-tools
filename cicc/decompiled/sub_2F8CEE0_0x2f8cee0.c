// Function: sub_2F8CEE0
// Address: 0x2f8cee0
//
unsigned int *__fastcall sub_2F8CEE0(__int64 a1, __int64 *a2, __int64 a3, __int64 a4, __int64 a5)
{
  __int64 v5; // r9
  __int64 *v6; // r12
  __int64 v7; // rcx
  int v8; // r11d
  __int64 v9; // rax
  __int64 v10; // rsi
  unsigned int v11; // r13d
  unsigned int v12; // ebx
  __int64 v13; // rdx
  __int64 v14; // r15
  __int64 v15; // r10
  unsigned int v16; // r14d
  __int64 v17; // rax
  unsigned int v18; // esi
  __int64 v19; // r8
  int v20; // r15d
  unsigned int v21; // ecx
  _QWORD *v22; // rdx
  _QWORD *v23; // rax
  __int64 v24; // r14
  unsigned int *result; // rax
  unsigned int v26; // r10d
  int v27; // r14d
  __int64 v28; // rdx
  __int64 v29; // r12
  unsigned int *v30; // r15
  unsigned int v31; // eax
  __int64 v32; // rdx
  unsigned int v33; // edx
  __int64 v34; // r8
  __int64 i; // r15
  unsigned int v36; // eax
  unsigned int v37; // eax
  __int64 v38; // rax
  __int64 v39; // rdx
  __int64 v40; // rsi
  _QWORD *v41; // rdx
  __int64 v42; // rcx
  __int64 *v43; // r14
  __int64 v44; // r14
  unsigned int v45; // eax
  int v46; // edx
  __int64 v47; // rdx
  unsigned int v48; // ebx
  int v49; // r15d
  __int64 v50; // r13
  unsigned int v51; // esi
  __int64 v52; // r8
  int v53; // r15d
  unsigned int v54; // ecx
  __int64 *v55; // rdx
  _QWORD *v56; // rax
  __int64 v57; // r14
  int v58; // ecx
  unsigned __int64 v59; // rcx
  unsigned __int64 v60; // r11
  int v61; // eax
  int v62; // eax
  __int64 v63; // r9
  unsigned int v64; // eax
  __int64 *v65; // rdi
  int v66; // ebx
  int v67; // edx
  __int64 v68; // rdx
  __int64 v69; // rax
  __int64 v70; // rdx
  __int64 v71; // rcx
  __int64 v72; // r8
  __int64 v73; // r9
  __int64 v74; // r15
  __int64 v75; // rax
  int v76; // r14d
  unsigned __int64 v77; // rdi
  int v78; // eax
  __int64 v79; // rax
  __int64 v80; // rdx
  __int64 v81; // rcx
  __int64 v82; // r8
  __int64 v83; // r9
  __int64 v84; // r13
  __int64 v85; // rax
  int v86; // r15d
  unsigned __int64 v87; // rdi
  int v88; // r8d
  int v89; // r8d
  __int64 v90; // r11
  __int64 v91; // rdi
  __int64 v92; // rsi
  int v93; // ecx
  _QWORD *v94; // rbx
  int v95; // r8d
  int v96; // r8d
  __int64 v97; // r11
  int v98; // ecx
  __int64 v99; // rdi
  __int64 v100; // rsi
  int v101; // edi
  int v102; // edx
  __int64 v103; // rdx
  int v104; // r8d
  int v105; // r8d
  __int64 v106; // r11
  _QWORD *v107; // r13
  __int64 v108; // rdi
  int v109; // ecx
  __int64 v110; // rsi
  int v111; // r10d
  int v112; // r10d
  __int64 v113; // r13
  __int64 v114; // rdi
  __int64 v115; // rsi
  int v116; // ecx
  _QWORD *v117; // r8
  __int64 v118; // rax
  __int64 v119; // rdx
  __int64 v120; // rcx
  __int64 v121; // r8
  __int64 v122; // r9
  __int64 v123; // r15
  __int64 v124; // rax
  int v125; // eax
  unsigned __int64 v126; // rdi
  unsigned int v127; // [rsp+8h] [rbp-B8h]
  int v128; // [rsp+10h] [rbp-B0h]
  __int64 v129; // [rsp+10h] [rbp-B0h]
  unsigned __int64 v130; // [rsp+18h] [rbp-A8h]
  __int64 v131; // [rsp+18h] [rbp-A8h]
  unsigned int v132; // [rsp+18h] [rbp-A8h]
  __int64 v133; // [rsp+18h] [rbp-A8h]
  __int64 v134; // [rsp+18h] [rbp-A8h]
  __int64 v135; // [rsp+18h] [rbp-A8h]
  unsigned int v136; // [rsp+20h] [rbp-A0h]
  __int64 *v137; // [rsp+20h] [rbp-A0h]
  __int64 v138; // [rsp+20h] [rbp-A0h]
  __int64 v139; // [rsp+20h] [rbp-A0h]
  __int64 v140; // [rsp+20h] [rbp-A0h]
  __int64 v141; // [rsp+20h] [rbp-A0h]
  __int64 v142; // [rsp+20h] [rbp-A0h]
  __int64 v143; // [rsp+20h] [rbp-A0h]
  int v144; // [rsp+20h] [rbp-A0h]
  __int64 v145; // [rsp+20h] [rbp-A0h]
  __int64 v146; // [rsp+20h] [rbp-A0h]
  __int64 v147; // [rsp+20h] [rbp-A0h]
  __int64 v148; // [rsp+28h] [rbp-98h]
  __int64 v149; // [rsp+28h] [rbp-98h]
  __int64 v150; // [rsp+28h] [rbp-98h]
  __int64 v151; // [rsp+28h] [rbp-98h]
  __int64 v152; // [rsp+28h] [rbp-98h]
  __int64 v153; // [rsp+28h] [rbp-98h]
  __int64 v154; // [rsp+28h] [rbp-98h]
  __int64 v155; // [rsp+28h] [rbp-98h]
  __int64 v156; // [rsp+28h] [rbp-98h]
  __int64 v157; // [rsp+28h] [rbp-98h]
  __int64 v158; // [rsp+28h] [rbp-98h]
  __int64 v159; // [rsp+28h] [rbp-98h]
  unsigned __int64 v160; // [rsp+38h] [rbp-88h] BYREF
  __int64 *v161; // [rsp+40h] [rbp-80h] BYREF
  unsigned __int64 v162; // [rsp+48h] [rbp-78h] BYREF
  __int64 v163; // [rsp+50h] [rbp-70h] BYREF
  _BYTE v164[40]; // [rsp+58h] [rbp-68h] BYREF
  unsigned int v165; // [rsp+80h] [rbp-40h]
  unsigned int v166; // [rsp+88h] [rbp-38h]

  v5 = a1;
  v6 = a2;
  v7 = *((unsigned __int8 *)a2 + 12);
  v8 = *((_DWORD *)a2 + 2);
  v136 = *(_DWORD *)(a1 + 16);
  v130 = v136;
  v9 = 1LL << v7;
  v148 = -(1LL << v7);
  if ( (_BYTE)qword_5025228 )
  {
    v10 = *(_QWORD *)(a1 + 8);
    v11 = v148 & (v9 + v8 - 1);
    v12 = v11 - v8;
    v13 = 80LL * v136;
    v14 = v10 + v13;
    if ( v10 + v13 == v10 )
    {
LABEL_13:
      if ( v136 )
        goto LABEL_21;
    }
    else
    {
      v15 = *(_QWORD *)(a1 + 8);
      v128 = v9 - 1;
      while ( 1 )
      {
        v16 = *(_DWORD *)(v15 + 4);
        if ( v16 > v12 )
        {
          v7 = *(unsigned int *)(v15 + 16);
          if ( *((_DWORD *)v6 + 6) <= (unsigned int)v7 )
            v7 = *((unsigned int *)v6 + 6);
          if ( (_DWORD)v7 )
          {
            a5 = v6[2];
            v7 = (unsigned int)v7;
            v17 = 0;
            while ( 1 )
            {
              v13 = *(_QWORD *)(*(_QWORD *)(v15 + 8) + 8 * v17) & *(_QWORD *)(a5 + 8 * v17);
              if ( v13 )
                break;
              if ( (unsigned int)v7 == ++v17 )
                goto LABEL_19;
            }
            v11 = v148 & (v128 + v16 + v8);
            v12 = v11 - v8;
            goto LABEL_12;
          }
LABEL_19:
          if ( v16 >= v11 )
            break;
        }
LABEL_12:
        v15 += 80;
        if ( v15 == v14 )
          goto LABEL_13;
      }
      if ( v136 )
      {
LABEL_21:
        v26 = *(_DWORD *)(v10 + 80LL * v136 - 76);
        if ( v26 >= v11 )
        {
LABEL_22:
          v137 = v6;
          v27 = 0;
          v28 = 0;
          v29 = v5;
          while ( 1 )
          {
            while ( 1 )
            {
              v30 = (unsigned int *)(v10 + 80 * v28);
              if ( *v30 >= v12 || v30[1] <= v12 )
                break;
              LODWORD(v161) = *v30;
              v31 = v30[1];
              v163 = 0x600000000LL;
              HIDWORD(v161) = v31;
              v162 = (unsigned __int64)v164;
              v32 = v30[4];
              if ( (_DWORD)v32 )
                sub_2F8AAD0((__int64)&v162, (__int64)(v30 + 2), v32, v7, a5, v5);
              v33 = v30[18];
              HIDWORD(v161) = v12;
              v166 = v33;
              *v30 = v12;
              sub_2F8C830(v29 + 8, (unsigned __int64)v30, (unsigned __int64)&v161, v7, a5, v5);
              if ( (_BYTE *)v162 != v164 )
                _libc_free(v162);
              v7 = *(unsigned int *)(v29 + 16);
              v28 = (unsigned int)(v27 + 1);
              v10 = *(_QWORD *)(v29 + 8);
              v27 = v28;
              if ( (unsigned int)v28 >= (unsigned int)v7 )
              {
LABEL_33:
                v5 = v29;
                v6 = v137;
                goto LABEL_34;
              }
            }
            if ( *v30 < v11 && v30[1] > v11 )
              break;
            v7 = *(unsigned int *)(v29 + 16);
            v28 = (unsigned int)(v27 + 1);
            v27 = v28;
            if ( (unsigned int)v28 >= (unsigned int)v7 )
              goto LABEL_33;
          }
          v63 = v29;
          v6 = v137;
          LODWORD(v161) = *v30;
          v64 = v30[1];
          v162 = (unsigned __int64)v164;
          HIDWORD(v161) = v64;
          v163 = 0x600000000LL;
          if ( v30[4] )
          {
            v152 = v63;
            sub_2F8AAD0((__int64)&v162, (__int64)(v30 + 2), v28, v7, a5, v63);
            v63 = v152;
          }
          v150 = v63;
          v166 = v30[18];
          *v30 = v11;
          HIDWORD(v161) = v11;
          sub_2F8C830(v63 + 8, (unsigned __int64)v30, (unsigned __int64)&v161, v7, a5, v63);
          v5 = v150;
          if ( (_BYTE *)v162 != v164 )
          {
            _libc_free(v162);
            v5 = v150;
          }
          v7 = *(unsigned int *)(v5 + 16);
          v10 = *(_QWORD *)(v5 + 8);
LABEL_34:
          v34 = v10 + 80 * v7;
          if ( v34 != v10 )
          {
            for ( i = v10 + 8; ; i += 80 )
            {
              v36 = *(_DWORD *)(i - 4);
              if ( v36 <= v12 || *(_DWORD *)(i - 8) >= v11 )
                goto LABEL_36;
              v37 = *((_DWORD *)v6 + 20);
              if ( *(_DWORD *)(i + 64) < v37 )
              {
                v58 = *(_DWORD *)(i + 64) & 0x3F;
                if ( v58 )
                  *(_QWORD *)(*(_QWORD *)i + 8LL * *(unsigned int *)(i + 8) - 8) &= ~(-1LL << v58);
                v59 = *(unsigned int *)(i + 8);
                *(_DWORD *)(i + 64) = v37;
                v60 = (v37 + 63) >> 6;
                if ( v60 != v59 )
                {
                  if ( v60 >= v59 )
                  {
                    v149 = v60 - v59;
                    if ( v60 > *(unsigned int *)(i + 12) )
                    {
                      v134 = v5;
                      v145 = v34;
                      sub_C8D5F0(i, (const void *)(i + 16), v60, 8u, v34, v5);
                      v59 = *(unsigned int *)(i + 8);
                      v5 = v134;
                      v34 = v145;
                    }
                    if ( 8 * v149 )
                    {
                      v131 = v5;
                      v138 = v34;
                      memset((void *)(*(_QWORD *)i + 8 * v59), 0, 8 * v149);
                      LODWORD(v59) = *(_DWORD *)(i + 8);
                      v5 = v131;
                      v34 = v138;
                    }
                    v62 = *(_DWORD *)(i + 64);
                    *(_DWORD *)(i + 8) = v149 + v59;
                    v61 = v62 & 0x3F;
                    if ( !v61 )
                      goto LABEL_42;
LABEL_72:
                    *(_QWORD *)(*(_QWORD *)i + 8LL * *(unsigned int *)(i + 8) - 8) &= ~(-1LL << v61);
                    goto LABEL_42;
                  }
                  *(_DWORD *)(i + 8) = (v37 + 63) >> 6;
                }
                v61 = v37 & 0x3F;
                if ( v61 )
                  goto LABEL_72;
              }
LABEL_42:
              v38 = 0;
              v39 = *((unsigned int *)v6 + 6);
              v40 = 8 * v39;
              if ( (_DWORD)v39 )
              {
                do
                {
                  v41 = (_QWORD *)(v38 + *(_QWORD *)i);
                  v42 = *(_QWORD *)(v6[2] + v38);
                  v38 += 8;
                  *v41 |= v42;
                }
                while ( v40 != v38 );
              }
              v36 = *(_DWORD *)(i - 4);
LABEL_36:
              if ( v36 >= v11 || v34 == i + 72 )
                break;
            }
          }
LABEL_15:
          v18 = *(_DWORD *)(v5 + 2048);
          if ( v18 )
          {
            v19 = *(_QWORD *)(v5 + 2032);
            v20 = 1;
            v21 = (v18 - 1) & (((unsigned int)*v6 >> 9) ^ ((unsigned int)*v6 >> 4));
            v22 = (_QWORD *)(v19 + 16LL * v21);
            v23 = 0;
            v24 = *v22;
            if ( *v22 == *v6 )
            {
LABEL_17:
              result = (unsigned int *)(v22 + 1);
LABEL_18:
              *result = v11;
              return result;
            }
            while ( v24 != -4096 )
            {
              if ( v24 == -8192 && !v23 )
                v23 = v22;
              v21 = (v18 - 1) & (v20 + v21);
              v22 = (_QWORD *)(v19 + 16LL * v21);
              v24 = *v22;
              if ( *v6 == *v22 )
                goto LABEL_17;
              ++v20;
            }
            v66 = *(_DWORD *)(v5 + 2040);
            if ( !v23 )
              v23 = v22;
            ++*(_QWORD *)(v5 + 2024);
            v67 = v66 + 1;
            if ( 4 * (v66 + 1) < 3 * v18 )
            {
              if ( v18 - *(_DWORD *)(v5 + 2044) - v67 > v18 >> 3 )
              {
LABEL_103:
                *(_DWORD *)(v5 + 2040) = v67;
                if ( *v23 != -4096 )
                  --*(_DWORD *)(v5 + 2044);
                v68 = *v6;
                result = (unsigned int *)(v23 + 1);
                *result = 0;
                *((_QWORD *)result - 1) = v68;
                goto LABEL_18;
              }
              v157 = v5;
              sub_A429D0(v5 + 2024, v18);
              v5 = v157;
              v95 = *(_DWORD *)(v157 + 2048);
              if ( v95 )
              {
                v96 = v95 - 1;
                v97 = *(_QWORD *)(v157 + 2032);
                v67 = *(_DWORD *)(v157 + 2040) + 1;
                v94 = 0;
                v98 = 1;
                LODWORD(v99) = v96 & (((unsigned int)*v6 >> 9) ^ ((unsigned int)*v6 >> 4));
                v23 = (_QWORD *)(v97 + 16LL * (unsigned int)v99);
                v100 = *v23;
                if ( *v23 == *v6 )
                  goto LABEL_103;
                while ( v100 != -4096 )
                {
                  if ( !v94 && v100 == -8192 )
                    v94 = v23;
                  v99 = v96 & (unsigned int)(v99 + v98);
                  v23 = (_QWORD *)(v97 + 16 * v99);
                  v100 = *v23;
                  if ( *v6 == *v23 )
                    goto LABEL_103;
                  ++v98;
                }
                goto LABEL_125;
              }
              goto LABEL_185;
            }
          }
          else
          {
            ++*(_QWORD *)(v5 + 2024);
          }
          v156 = v5;
          sub_A429D0(v5 + 2024, 2 * v18);
          v5 = v156;
          v88 = *(_DWORD *)(v156 + 2048);
          if ( v88 )
          {
            v89 = v88 - 1;
            v90 = *(_QWORD *)(v156 + 2032);
            v67 = *(_DWORD *)(v156 + 2040) + 1;
            LODWORD(v91) = v89 & (((unsigned int)*v6 >> 9) ^ ((unsigned int)*v6 >> 4));
            v23 = (_QWORD *)(v90 + 16LL * (unsigned int)v91);
            v92 = *v23;
            if ( *v23 == *v6 )
              goto LABEL_103;
            v93 = 1;
            v94 = 0;
            while ( v92 != -4096 )
            {
              if ( v92 == -8192 && !v94 )
                v94 = v23;
              v91 = v89 & (unsigned int)(v91 + v93);
              v23 = (_QWORD *)(v90 + 16 * v91);
              v92 = *v23;
              if ( *v6 == *v23 )
                goto LABEL_103;
              ++v93;
            }
LABEL_125:
            if ( v94 )
              v23 = v94;
            goto LABEL_103;
          }
LABEL_185:
          ++*(_DWORD *)(v5 + 2040);
          BUG();
        }
LABEL_46:
        v43 = (__int64 *)(a1 + 8);
        if ( v12 > v26 )
        {
          v165 = 0;
          v161 = &v163;
          v162 = 0x600000000LL;
          if ( v136 >= *(_DWORD *)(a1 + 20) )
          {
            v127 = v26;
            v143 = a1 + 24;
            v118 = sub_C8D7D0(a1 + 8, a1 + 24, 0, 0x50u, &v160, a1);
            v122 = a1;
            v123 = v118;
            v124 = v118 + 80LL * *(unsigned int *)(a1 + 16);
            if ( v124 )
            {
              *(_DWORD *)(v124 + 4) = v12;
              *(_QWORD *)(v124 + 8) = v124 + 24;
              *(_DWORD *)v124 = v127;
              *(_QWORD *)(v124 + 16) = 0x600000000LL;
              v121 = (unsigned int)v162;
              if ( (_DWORD)v162 )
              {
                v129 = v124;
                sub_2F8AAD0(v124 + 8, (__int64)&v161, v124 + 24, v120, (unsigned int)v162, a1);
                v122 = a1;
                v124 = v129;
              }
              v119 = v165;
              *(_DWORD *)(v124 + 72) = v165;
            }
            v133 = v122;
            sub_2F8C750(v43, v123, v119, v120, v121, v122);
            v5 = v133;
            v125 = v160;
            v126 = *(_QWORD *)(v133 + 8);
            if ( v143 != v126 )
            {
              v144 = v160;
              _libc_free(v126);
              v5 = v133;
              v125 = v144;
            }
            ++*(_DWORD *)(v5 + 16);
            v65 = v161;
            *(_QWORD *)(v5 + 8) = v123;
            *(_DWORD *)(v5 + 20) = v125;
          }
          else
          {
            v65 = &v163;
            if ( v14 )
            {
              *(_DWORD *)v14 = v26;
              *(_DWORD *)(v14 + 4) = v12;
              *(_QWORD *)(v14 + 8) = v14 + 24;
              *(_QWORD *)(v14 + 16) = 0x600000000LL;
              if ( (_DWORD)v162 )
              {
                v139 = v5;
                sub_2F8AAD0(v14 + 8, (__int64)&v161, v13, v7, a5, v5);
                v5 = v139;
              }
              *(_DWORD *)(v14 + 72) = v165;
              v65 = v161;
              v136 = *(_DWORD *)(v5 + 16);
            }
            *(_DWORD *)(v5 + 16) = v136 + 1;
          }
          if ( v65 != &v163 )
          {
            v151 = v5;
            _libc_free((unsigned __int64)v65);
            v5 = v151;
          }
          v26 = v12;
          v136 = *(_DWORD *)(v5 + 16);
          v130 = v136;
        }
        if ( v130 >= *(unsigned int *)(v5 + 20) )
        {
          v140 = v5;
          v132 = v26;
          v154 = v5 + 24;
          v69 = sub_C8D7D0((__int64)v43, v5 + 24, 0, 0x50u, (unsigned __int64 *)&v161, v5);
          v73 = v140;
          v74 = v69;
          v75 = v69 + 80LL * *(unsigned int *)(v140 + 16);
          if ( v75 )
          {
            *(_DWORD *)(v75 + 4) = v11;
            *(_QWORD *)(v75 + 8) = v75 + 24;
            *(_DWORD *)v75 = v132;
            *(_QWORD *)(v75 + 16) = 0x600000000LL;
            if ( *((_DWORD *)v6 + 6) )
            {
              v135 = v140;
              v147 = v75;
              sub_2F8AAD0(v75 + 8, (__int64)(v6 + 2), v75 + 24, v71, v72, v73);
              v73 = v135;
              v75 = v147;
            }
            v70 = *((unsigned int *)v6 + 20);
            *(_DWORD *)(v75 + 72) = v70;
          }
          v141 = v73;
          sub_2F8C750(v43, v74, v70, v71, v72, v73);
          v5 = v141;
          v76 = (int)v161;
          v77 = *(_QWORD *)(v141 + 8);
          if ( v154 != v77 )
          {
            _libc_free(v77);
            v5 = v141;
          }
          v78 = *(_DWORD *)(v5 + 16);
          *(_QWORD *)(v5 + 8) = v74;
          *(_DWORD *)(v5 + 20) = v76;
          v45 = v78 + 1;
          *(_DWORD *)(v5 + 16) = v45;
        }
        else
        {
          v44 = *(_QWORD *)(v5 + 8) + 80 * v130;
          if ( v44 )
          {
            *(_DWORD *)v44 = v26;
            *(_QWORD *)(v44 + 8) = v44 + 24;
            *(_DWORD *)(v44 + 4) = v11;
            *(_QWORD *)(v44 + 16) = 0x600000000LL;
            v7 = *((unsigned int *)v6 + 6);
            if ( (_DWORD)v7 )
            {
              v153 = v5;
              sub_2F8AAD0(v44 + 8, (__int64)(v6 + 2), v13, v7, a5, v5);
              v5 = v153;
            }
            *(_DWORD *)(v44 + 72) = *((_DWORD *)v6 + 20);
            v136 = *(_DWORD *)(v5 + 16);
          }
          v45 = v136 + 1;
          *(_DWORD *)(v5 + 16) = v136 + 1;
        }
        if ( v45 )
        {
          v10 = *(_QWORD *)(v5 + 8);
          goto LABEL_22;
        }
        goto LABEL_15;
      }
    }
    if ( !v11 )
      goto LABEL_15;
    v26 = 0;
    goto LABEL_46;
  }
  v46 = 0;
  if ( v136 )
    v46 = *(_DWORD *)(*(_QWORD *)(a1 + 8) + 80LL * v136 - 76);
  v47 = (unsigned int)(v8 + v46);
  v48 = v148 & (v9 + v47 - 1);
  v49 = v48 - v8;
  if ( *(_DWORD *)(a1 + 20) <= v136 )
  {
    v155 = a1 + 24;
    v79 = sub_C8D7D0(a1 + 8, a1 + 24, 0, 0x50u, (unsigned __int64 *)&v161, a1);
    v83 = a1;
    v84 = v79;
    v85 = v79 + 80LL * *(unsigned int *)(a1 + 16);
    if ( v85 )
    {
      *(_DWORD *)v85 = v49;
      *(_DWORD *)(v85 + 4) = v48;
      *(_QWORD *)(v85 + 8) = v85 + 24;
      *(_QWORD *)(v85 + 16) = 0x600000000LL;
      if ( *((_DWORD *)a2 + 6) )
      {
        v146 = v85;
        sub_2F8AAD0(v85 + 8, (__int64)(a2 + 2), v85 + 24, v81, v82, a1);
        v83 = a1;
        v85 = v146;
      }
      v80 = *((unsigned int *)a2 + 20);
      *(_DWORD *)(v85 + 72) = v80;
    }
    v142 = v83;
    sub_2F8C750((__int64 *)(a1 + 8), v84, v80, v81, v82, v83);
    v5 = v142;
    v86 = (int)v161;
    v87 = *(_QWORD *)(v142 + 8);
    if ( v155 != v87 )
    {
      _libc_free(v87);
      v5 = v142;
    }
    ++*(_DWORD *)(v5 + 16);
    *(_QWORD *)(v5 + 8) = v84;
    *(_DWORD *)(v5 + 20) = v86;
  }
  else
  {
    v50 = *(_QWORD *)(a1 + 8) + 80LL * v136;
    if ( v50 )
    {
      *(_DWORD *)v50 = v49;
      *(_QWORD *)(v50 + 8) = v50 + 24;
      *(_DWORD *)(v50 + 4) = v48;
      *(_QWORD *)(v50 + 16) = 0x600000000LL;
      if ( *((_DWORD *)a2 + 6) )
      {
        sub_2F8AAD0(v50 + 8, (__int64)(a2 + 2), v47, v136, a5, a1);
        v5 = a1;
      }
      *(_DWORD *)(v50 + 72) = *((_DWORD *)a2 + 20);
      v136 = *(_DWORD *)(v5 + 16);
    }
    *(_DWORD *)(v5 + 16) = v136 + 1;
  }
  v51 = *(_DWORD *)(v5 + 2048);
  if ( !v51 )
  {
    ++*(_QWORD *)(v5 + 2024);
    goto LABEL_156;
  }
  v52 = *(_QWORD *)(v5 + 2032);
  v53 = 1;
  v54 = (v51 - 1) & (((unsigned int)*v6 >> 9) ^ ((unsigned int)*v6 >> 4));
  v55 = (__int64 *)(v52 + 16LL * v54);
  v56 = 0;
  v57 = *v55;
  if ( *v55 == *v6 )
  {
LABEL_65:
    *((_DWORD *)v55 + 2) = v48;
    return (unsigned int *)(v55 + 1);
  }
  while ( v57 != -4096 )
  {
    if ( v57 == -8192 && !v56 )
      v56 = v55;
    v54 = (v51 - 1) & (v53 + v54);
    v55 = (__int64 *)(v52 + 16LL * v54);
    v57 = *v55;
    if ( *v6 == *v55 )
      goto LABEL_65;
    ++v53;
  }
  v101 = *(_DWORD *)(v5 + 2040);
  if ( !v56 )
    v56 = v55;
  ++*(_QWORD *)(v5 + 2024);
  v102 = v101 + 1;
  if ( 4 * (v101 + 1) >= 3 * v51 )
  {
LABEL_156:
    v159 = v5;
    sub_A429D0(v5 + 2024, 2 * v51);
    v5 = v159;
    v111 = *(_DWORD *)(v159 + 2048);
    if ( v111 )
    {
      v112 = v111 - 1;
      v113 = *(_QWORD *)(v159 + 2032);
      LODWORD(v114) = v112 & (((unsigned int)*v6 >> 9) ^ ((unsigned int)*v6 >> 4));
      v102 = *(_DWORD *)(v159 + 2040) + 1;
      v56 = (_QWORD *)(v113 + 16LL * (unsigned int)v114);
      v115 = *v56;
      if ( *v56 != *v6 )
      {
        v116 = 1;
        v117 = 0;
        while ( v115 != -4096 )
        {
          if ( !v117 && v115 == -8192 )
            v117 = v56;
          v114 = v112 & (unsigned int)(v114 + v116);
          v56 = (_QWORD *)(v113 + 16 * v114);
          v115 = *v56;
          if ( *v6 == *v56 )
            goto LABEL_146;
          ++v116;
        }
        if ( v117 )
          v56 = v117;
      }
      goto LABEL_146;
    }
    goto LABEL_186;
  }
  if ( v51 - *(_DWORD *)(v5 + 2044) - v102 <= v51 >> 3 )
  {
    v158 = v5;
    sub_A429D0(v5 + 2024, v51);
    v5 = v158;
    v104 = *(_DWORD *)(v158 + 2048);
    if ( v104 )
    {
      v105 = v104 - 1;
      v106 = *(_QWORD *)(v158 + 2032);
      v107 = 0;
      LODWORD(v108) = v105 & (((unsigned int)*v6 >> 9) ^ ((unsigned int)*v6 >> 4));
      v102 = *(_DWORD *)(v158 + 2040) + 1;
      v109 = 1;
      v56 = (_QWORD *)(v106 + 16LL * (unsigned int)v108);
      v110 = *v56;
      if ( *v6 != *v56 )
      {
        while ( v110 != -4096 )
        {
          if ( !v107 && v110 == -8192 )
            v107 = v56;
          v108 = v105 & (unsigned int)(v108 + v109);
          v56 = (_QWORD *)(v106 + 16 * v108);
          v110 = *v56;
          if ( *v6 == *v56 )
            goto LABEL_146;
          ++v109;
        }
        if ( v107 )
          v56 = v107;
      }
      goto LABEL_146;
    }
LABEL_186:
    ++*(_DWORD *)(v5 + 2040);
    BUG();
  }
LABEL_146:
  *(_DWORD *)(v5 + 2040) = v102;
  if ( *v56 != -4096 )
    --*(_DWORD *)(v5 + 2044);
  v103 = *v6;
  result = (unsigned int *)(v56 + 1);
  *result = 0;
  *((_QWORD *)result - 1) = v103;
  *result = v48;
  return result;
}
