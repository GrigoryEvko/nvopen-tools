// Function: sub_D2C610
// Address: 0xd2c610
//
__int64 ***__fastcall sub_D2C610(__int64 ***a1, __int64 a2, __int64 *a3, __int64 a4)
{
  __int64 ***i; // r14
  __int64 *v7; // r12
  __int64 *v8; // r12
  __int64 v9; // rax
  __int64 v10; // rsi
  __int64 v11; // rax
  __int64 *v12; // r15
  __int64 v13; // rdi
  __int64 v14; // rsi
  __int64 v15; // rax
  int v16; // ecx
  __int64 v17; // r9
  int v18; // ecx
  unsigned int v19; // r8d
  __int64 *v20; // rdx
  __int64 v21; // r11
  __int64 v22; // r8
  unsigned int v23; // edi
  __int64 *v24; // rdx
  __int64 v25; // r11
  __int64 v26; // rdx
  __int64 *v27; // r12
  __int64 *v28; // rbx
  unsigned int v29; // esi
  unsigned int v30; // ecx
  __int64 *v31; // r13
  __int64 v32; // rdi
  __int64 *v33; // rax
  signed __int64 v34; // r15
  __int64 *v35; // r12
  __int64 v36; // rdx
  __int64 v37; // rax
  unsigned __int64 v38; // rdx
  unsigned int v39; // eax
  __int64 v40; // rdx
  char *v41; // rax
  __int64 v43; // rcx
  __int64 v44; // rsi
  int v45; // edi
  int v46; // edi
  unsigned int v47; // r8d
  __int64 *v48; // rdx
  __int64 v49; // r11
  unsigned int v50; // ecx
  __int64 *v51; // rdx
  __int64 v52; // r11
  __int64 v53; // rdx
  __int64 v54; // rcx
  __int64 v55; // rsi
  int v56; // edi
  int v57; // edi
  unsigned int v58; // r8d
  __int64 *v59; // rdx
  __int64 v60; // r11
  unsigned int v61; // ecx
  __int64 *v62; // rdx
  __int64 v63; // r11
  __int64 v64; // rdx
  __int64 v65; // rdi
  __int64 v66; // rdx
  int v67; // esi
  __int64 v68; // rcx
  int v69; // esi
  unsigned int v70; // r8d
  __int64 *v71; // rax
  __int64 v72; // r9
  unsigned int v73; // edi
  __int64 *v74; // rax
  __int64 v75; // rax
  int v76; // edx
  int v77; // edx
  int v78; // edx
  int v79; // edx
  int v80; // edx
  int v81; // edx
  int v82; // eax
  int v83; // eax
  unsigned int v84; // r12d
  _BYTE *v85; // rax
  int v86; // r14d
  __int64 v87; // rdx
  __int64 *v88; // rbx
  __int64 v89; // rdx
  _QWORD *v90; // rdi
  __int64 *v91; // r8
  unsigned __int64 v92; // r9
  __int64 v93; // rsi
  __int64 v94; // rax
  int v95; // ecx
  __int64 *v96; // rdx
  __int64 *v97; // rax
  unsigned int v98; // ecx
  unsigned int v99; // eax
  int v100; // r12d
  unsigned int v101; // r13d
  unsigned __int64 *v102; // rdx
  unsigned __int64 v103; // r15
  _QWORD *v104; // rax
  _QWORD *v105; // rsi
  __int64 v106; // rcx
  unsigned __int64 v107; // rbx
  int v108; // edx
  int v109; // edx
  __int64 v110; // rcx
  int v111; // edx
  __int64 *v112; // rdi
  __int64 v113; // rdx
  __int64 v114; // rax
  unsigned __int64 v115; // rdx
  int v116; // edx
  __int64 v117; // rax
  __int64 v118; // rax
  char *v119; // r10
  __int64 **v120; // rsi
  __int64 v121; // rdi
  __int64 v122; // rax
  __int64 **v123; // r11
  unsigned __int64 v124; // rdx
  const __m128i *v125; // r15
  __m128i *v126; // rax
  int v127; // r8d
  __int64 v128; // r13
  int v129; // r13d
  _QWORD *v130; // r12
  __int64 v131; // rdx
  unsigned __int64 v132; // rbx
  _QWORD *v133; // rdi
  __int64 v134; // r8
  __int64 v135; // r9
  __int64 v136; // rax
  size_t v137; // r9
  __int64 v138; // r12
  __int64 v139; // rdx
  __int64 v140; // rdi
  __int64 v141; // rdx
  int v142; // eax
  __int64 **v143; // r15
  _QWORD *v144; // r8
  __int64 v145; // r12
  void *v146; // rdi
  __int64 v147; // rax
  __int64 v148; // rcx
  __int64 **v149; // r10
  size_t v150; // rdx
  __int64 v151; // rcx
  unsigned int v152; // eax
  __int64 j; // rax
  _QWORD *v154; // rdx
  char *v155; // r15
  __int64 v156; // r14
  int v157; // r12d
  __int64 *v158; // rbx
  _QWORD *v159; // rax
  __int64 v160; // rdx
  __int64 *v161; // r8
  __int64 *v162; // r13
  __int64 *v163; // r14
  __int64 v164; // rsi
  __int64 *v165; // rax
  __int64 v166; // rdx
  __int64 v167; // rcx
  int v168; // edi
  __int64 v169; // r12
  int v170; // r15d
  signed __int64 v171; // r15
  int v172; // r10d
  int v173; // r10d
  int v174; // r10d
  __int64 v175; // rax
  int v176; // r10d
  int v177; // r10d
  int v178; // r10d
  int v179; // r10d
  int v180; // r10d
  __int64 v181; // rax
  __int64 *v182; // rcx
  const __m128i *v183; // rbx
  __m128i *v184; // rax
  __int64 v185; // rdi
  char *v186; // rdi
  void *v187; // r11
  unsigned __int64 v188; // rdx
  char *v189; // rdi
  signed __int64 v190; // rbx
  __int64 **v191; // [rsp+10h] [rbp-1A0h]
  __int64 **v192; // [rsp+10h] [rbp-1A0h]
  _DWORD *v193; // [rsp+18h] [rbp-198h]
  _QWORD *v194; // [rsp+18h] [rbp-198h]
  char *v195; // [rsp+20h] [rbp-190h]
  __int64 v196; // [rsp+30h] [rbp-180h]
  unsigned int *v197; // [rsp+30h] [rbp-180h]
  __int64 **v198; // [rsp+30h] [rbp-180h]
  __int64 v199; // [rsp+38h] [rbp-178h]
  __int64 **v200; // [rsp+38h] [rbp-178h]
  __int64 v201; // [rsp+40h] [rbp-170h]
  __int64 v202; // [rsp+40h] [rbp-170h]
  size_t v203; // [rsp+40h] [rbp-170h]
  __int64 ***v204; // [rsp+40h] [rbp-170h]
  void *src; // [rsp+48h] [rbp-168h]
  __int64 srca; // [rsp+48h] [rbp-168h]
  __int64 **srcd; // [rsp+48h] [rbp-168h]
  void *srcb; // [rsp+48h] [rbp-168h]
  __int64 **srcc; // [rsp+48h] [rbp-168h]
  __int64 v210; // [rsp+50h] [rbp-160h]
  __int64 v212; // [rsp+60h] [rbp-150h]
  void *dest; // [rsp+68h] [rbp-148h]
  __int64 *v214; // [rsp+70h] [rbp-140h] BYREF
  _QWORD *v215; // [rsp+78h] [rbp-138h]
  _QWORD *v216; // [rsp+80h] [rbp-130h]
  char *v217; // [rsp+90h] [rbp-120h] BYREF
  __int64 v218; // [rsp+98h] [rbp-118h]
  _BYTE v219[32]; // [rsp+A0h] [rbp-110h] BYREF
  _BYTE *v220; // [rsp+C0h] [rbp-F0h] BYREF
  __int64 v221; // [rsp+C8h] [rbp-E8h]
  _BYTE v222[64]; // [rsp+D0h] [rbp-E0h] BYREF
  __int64 *v223; // [rsp+110h] [rbp-A0h] BYREF
  __int64 v224; // [rsp+118h] [rbp-98h]
  _BYTE v225[144]; // [rsp+120h] [rbp-90h] BYREF

  i = a1;
  v7 = a3;
  src = a1 + 2;
  *a1 = (__int64 **)(a1 + 2);
  a1[1] = (__int64 **)0x100000000LL;
  v212 = 16 * a4;
  dest = &a3[2 * a4];
  if ( a3 != dest )
  {
    v8 = a3;
    do
    {
      v9 = *v8;
      v10 = v8[1];
      v8 += 2;
      sub_D23E00(v9 + 24, v10);
    }
    while ( dest != v8 );
    v7 = a3;
  }
  v223 = (__int64 *)a2;
  v11 = v212 >> 4;
  if ( v212 >> 6 > 0 )
  {
    v12 = &a3[8 * (v212 >> 6)];
    while ( 1 )
    {
      v13 = *v7;
      v14 = v7[1];
      if ( *v7 == v14
        || (v15 = *(_QWORD *)a2, v16 = *(_DWORD *)(*(_QWORD *)a2 + 328LL),
                                 v17 = *(_QWORD *)(*(_QWORD *)a2 + 312LL),
                                 !v16) )
      {
        v43 = v7[2];
        v44 = v7[3];
        if ( v43 == v44 )
          goto LABEL_43;
        v15 = *(_QWORD *)a2;
        v45 = *(_DWORD *)(*(_QWORD *)a2 + 328LL);
        v17 = *(_QWORD *)(*(_QWORD *)a2 + 312LL);
        if ( !v45 )
          goto LABEL_43;
      }
      else
      {
        v18 = v16 - 1;
        v19 = v18 & (((unsigned int)v13 >> 9) ^ ((unsigned int)v13 >> 4));
        v20 = (__int64 *)(v17 + 16LL * v19);
        v21 = *v20;
        if ( v13 == *v20 )
        {
LABEL_10:
          v22 = v20[1];
        }
        else
        {
          v76 = 1;
          while ( v21 != -4096 )
          {
            v177 = v76 + 1;
            v19 = v18 & (v76 + v19);
            v20 = (__int64 *)(v17 + 16LL * v19);
            v21 = *v20;
            if ( v13 == *v20 )
              goto LABEL_10;
            v76 = v177;
          }
          v22 = 0;
        }
        v23 = v18 & (((unsigned int)v14 >> 9) ^ ((unsigned int)v14 >> 4));
        v24 = (__int64 *)(v17 + 16LL * v23);
        v25 = *v24;
        if ( *v24 == v14 )
        {
LABEL_12:
          v26 = v24[1];
        }
        else
        {
          v77 = 1;
          while ( v25 != -4096 )
          {
            v178 = v77 + 1;
            v23 = v18 & (v77 + v23);
            v24 = (__int64 *)(v17 + 16LL * v23);
            v25 = *v24;
            if ( *v24 == v14 )
              goto LABEL_12;
            v77 = v178;
          }
          v26 = 0;
        }
        if ( v26 != v22 )
          goto LABEL_14;
        v43 = v7[2];
        v44 = v7[3];
        if ( v44 == v43 )
        {
LABEL_43:
          v54 = v7[4];
          v55 = v7[5];
          if ( v54 == v55 )
            goto LABEL_58;
          v15 = *(_QWORD *)a2;
          v56 = *(_DWORD *)(*(_QWORD *)a2 + 328LL);
          v17 = *(_QWORD *)(*(_QWORD *)a2 + 312LL);
          if ( !v56 )
            goto LABEL_51;
          goto LABEL_45;
        }
        v17 = *(_QWORD *)(v15 + 312);
        v45 = *(_DWORD *)(v15 + 328);
      }
      v46 = v45 - 1;
      v47 = v46 & (((unsigned int)v43 >> 9) ^ ((unsigned int)v43 >> 4));
      v48 = (__int64 *)(v17 + 16LL * v47);
      v49 = *v48;
      if ( *v48 == v43 )
      {
LABEL_38:
        v22 = v48[1];
      }
      else
      {
        v79 = 1;
        while ( v49 != -4096 )
        {
          v176 = v79 + 1;
          v47 = v46 & (v79 + v47);
          v48 = (__int64 *)(v17 + 16LL * v47);
          v49 = *v48;
          if ( *v48 == v43 )
            goto LABEL_38;
          v79 = v176;
        }
        v22 = 0;
      }
      v50 = v46 & (((unsigned int)v44 >> 9) ^ ((unsigned int)v44 >> 4));
      v51 = (__int64 *)(v17 + 16LL * v50);
      v52 = *v51;
      if ( *v51 == v44 )
      {
LABEL_40:
        v53 = v51[1];
      }
      else
      {
        v78 = 1;
        while ( v52 != -4096 )
        {
          v172 = v78 + 1;
          v50 = v46 & (v78 + v50);
          v51 = (__int64 *)(v17 + 16LL * v50);
          v52 = *v51;
          if ( *v51 == v44 )
            goto LABEL_40;
          v78 = v172;
        }
        v53 = 0;
      }
      if ( v53 != v22 )
      {
        v7 += 2;
        goto LABEL_14;
      }
      v54 = v7[4];
      v55 = v7[5];
      if ( v55 == v54 )
      {
LABEL_58:
        v65 = v7[6];
        v66 = v7[7];
        if ( v66 == v65 )
          goto LABEL_51;
        v67 = *(_DWORD *)(*(_QWORD *)a2 + 328LL);
        v68 = *(_QWORD *)(*(_QWORD *)a2 + 312LL);
        if ( !v67 )
          goto LABEL_51;
        goto LABEL_60;
      }
      v17 = *(_QWORD *)(v15 + 312);
      v56 = *(_DWORD *)(v15 + 328);
LABEL_45:
      v57 = v56 - 1;
      v58 = v57 & (((unsigned int)v54 >> 9) ^ ((unsigned int)v54 >> 4));
      v59 = (__int64 *)(v17 + 16LL * v58);
      v60 = *v59;
      if ( v54 == *v59 )
      {
LABEL_46:
        v22 = v59[1];
      }
      else
      {
        v81 = 1;
        while ( v60 != -4096 )
        {
          v173 = v81 + 1;
          v58 = v57 & (v81 + v58);
          v59 = (__int64 *)(v17 + 16LL * v58);
          v60 = *v59;
          if ( v54 == *v59 )
            goto LABEL_46;
          v81 = v173;
        }
        v22 = 0;
      }
      v61 = v57 & (((unsigned int)v55 >> 9) ^ ((unsigned int)v55 >> 4));
      v62 = (__int64 *)(v17 + 16LL * v61);
      v63 = *v62;
      if ( *v62 == v55 )
      {
LABEL_48:
        v64 = v62[1];
      }
      else
      {
        v80 = 1;
        while ( v63 != -4096 )
        {
          v179 = v80 + 1;
          v61 = v57 & (v80 + v61);
          v62 = (__int64 *)(v17 + 16LL * v61);
          v63 = *v62;
          if ( *v62 == v55 )
            goto LABEL_48;
          v80 = v179;
        }
        v64 = 0;
      }
      if ( v22 != v64 )
      {
        v7 += 4;
        goto LABEL_14;
      }
      v65 = v7[6];
      v66 = v7[7];
      if ( v66 == v65 )
        goto LABEL_51;
      v68 = *(_QWORD *)(v15 + 312);
      v67 = *(_DWORD *)(v15 + 328);
LABEL_60:
      v69 = v67 - 1;
      v70 = v69 & (((unsigned int)v65 >> 9) ^ ((unsigned int)v65 >> 4));
      v71 = (__int64 *)(v68 + 16LL * v70);
      v72 = *v71;
      if ( *v71 == v65 )
      {
LABEL_61:
        v22 = v71[1];
      }
      else
      {
        v83 = 1;
        while ( v72 != -4096 )
        {
          v180 = v83 + 1;
          v181 = v69 & (v70 + v83);
          v70 = v181;
          v71 = (__int64 *)(v68 + 16 * v181);
          v72 = *v71;
          if ( *v71 == v65 )
            goto LABEL_61;
          v83 = v180;
        }
        v22 = 0;
      }
      v73 = v69 & (((unsigned int)v66 >> 9) ^ ((unsigned int)v66 >> 4));
      v74 = (__int64 *)(v68 + 16LL * v73);
      v17 = *v74;
      if ( *v74 == v66 )
      {
LABEL_63:
        v75 = v74[1];
      }
      else
      {
        v82 = 1;
        while ( v17 != -4096 )
        {
          v174 = v82 + 1;
          v175 = v69 & (v73 + v82);
          v73 = v175;
          v74 = (__int64 *)(v68 + 16 * v175);
          v17 = *v74;
          if ( *v74 == v66 )
            goto LABEL_63;
          v82 = v174;
        }
        v75 = 0;
      }
      if ( v75 != v22 )
      {
        v7 += 6;
        goto LABEL_14;
      }
LABEL_51:
      v7 += 8;
      if ( v12 == v7 )
      {
        v11 = ((_BYTE *)dest - (_BYTE *)v7) >> 4;
        break;
      }
    }
  }
  if ( v11 == 2 )
  {
LABEL_205:
    if ( sub_D23CB0(&v223, *v7, v7[1]) )
    {
      v7 += 2;
LABEL_56:
      if ( sub_D23CB0(&v223, *v7, v7[1]) )
        return i;
      goto LABEL_14;
    }
    goto LABEL_14;
  }
  if ( v11 != 3 )
  {
    if ( v11 != 1 )
      return i;
    goto LABEL_56;
  }
  if ( sub_D23CB0(&v223, *v7, v7[1]) )
  {
    v7 += 2;
    goto LABEL_205;
  }
LABEL_14:
  if ( dest == v7 )
    return i;
  v27 = *(__int64 **)(a2 + 8);
  v220 = v222;
  v221 = 0x800000000LL;
  v28 = &v27[*(unsigned int *)(a2 + 16)];
  if ( v27 == v28 )
  {
    v85 = v222;
    v84 = 0;
    v30 = 0;
  }
  else
  {
    v29 = 8;
    v30 = 0;
    dest = &v220;
    v210 = a2;
    v31 = v27;
    while ( 1 )
    {
      v32 = *v31;
      v33 = *(__int64 **)(*v31 + 8);
      v34 = 8LL * *(unsigned int *)(*v31 + 16);
      v35 = &v33[(unsigned __int64)v34 / 8];
      if ( v33 != &v33[(unsigned __int64)v34 / 8] )
      {
        do
        {
          v36 = *v33++;
          *(_QWORD *)(v36 + 16) = 0;
        }
        while ( v35 != v33 );
        v35 = *(__int64 **)(v32 + 8);
        v34 = 8LL * *(unsigned int *)(v32 + 16);
      }
      v37 = v30;
      v38 = (v34 >> 3) + v30;
      if ( v38 > v29 )
      {
        sub_C8D5F0((__int64)dest, v222, v38, 8u, v22, v17);
        v37 = (unsigned int)v221;
      }
      if ( v34 )
      {
        memcpy(&v220[8 * v37], v35, v34);
        LODWORD(v37) = v221;
      }
      v39 = (v34 >> 3) + v37;
      ++v31;
      LODWORD(v221) = v39;
      v30 = v39;
      if ( v28 == v31 )
        break;
      v29 = HIDWORD(v221);
    }
    v84 = v39;
    a2 = v210;
    v85 = v220;
  }
  v201 = (__int64)i;
  v86 = 0;
  v223 = (__int64 *)v225;
  v217 = v219;
  v224 = 0x400000000LL;
  v218 = 0x400000000LL;
  dest = &v214;
  v199 = a2;
  while ( 1 )
  {
    v87 = v30--;
    v88 = *(__int64 **)&v85[8 * v87 - 8];
    LODWORD(v221) = v30;
    if ( !*((_DWORD *)v88 + 4) )
    {
      v88[2] = 0x100000001LL;
      v90 = sub_D23BF0((__int64)(v88 + 3));
      v93 = v89;
      v94 = (unsigned int)v224;
      v95 = v224;
      if ( (unsigned int)v224 >= (unsigned __int64)HIDWORD(v224) )
      {
        v92 = (unsigned int)v224 + 1LL;
        v214 = v88;
        v182 = v223;
        v215 = v90;
        v183 = (const __m128i *)dest;
        v216 = (_QWORD *)v89;
        if ( HIDWORD(v224) < v92 )
        {
          if ( v223 > dest || dest >= &v223[3 * (unsigned int)v224] )
          {
            sub_C8D5F0((__int64)&v223, v225, v92, 0x18u, (__int64)v91, v92);
            v182 = v223;
            v94 = (unsigned int)v224;
            v183 = (const __m128i *)dest;
          }
          else
          {
            v190 = (_BYTE *)dest - (_BYTE *)v223;
            sub_C8D5F0((__int64)&v223, v225, v92, 0x18u, (__int64)v91, v92);
            v182 = v223;
            v94 = (unsigned int)v224;
            v183 = (const __m128i *)((char *)v223 + v190);
          }
        }
        v184 = (__m128i *)&v182[3 * v94];
        *v184 = _mm_loadu_si128(v183);
        v184[1].m128i_i64[0] = v183[1].m128i_i64[0];
        v96 = v223;
        v98 = v224 + 1;
        LODWORD(v224) = v224 + 1;
      }
      else
      {
        v96 = v223;
        v97 = &v223[3 * (unsigned int)v224];
        if ( v97 )
        {
          *v97 = (__int64)v88;
          v97[1] = (__int64)v90;
          v97[2] = v93;
          v95 = v224;
          v96 = v223;
        }
        v98 = v95 + 1;
        LODWORD(v224) = v98;
      }
      v99 = v84;
      v100 = 2;
      v101 = v99;
      while ( 1 )
      {
        v102 = (unsigned __int64 *)&v96[3 * v98 - 3];
        v103 = *v102;
        v104 = (_QWORD *)v102[1];
        v105 = (_QWORD *)v102[2];
        LODWORD(v224) = v98 - 1;
        v106 = *(_QWORD *)(v103 + 24) + 8LL * *(unsigned int *)(v103 + 32);
        while ( (_QWORD *)v106 != v104 )
        {
          v107 = *v104 & 0xFFFFFFFFFFFFFFF8LL;
          v108 = *(_DWORD *)(v107 + 16);
          if ( v108 )
          {
            ++v104;
            if ( v108 == -1 )
            {
              for ( ; v105 != v104; ++v104 )
              {
                if ( (*v104 & 0xFFFFFFFFFFFFFFF8LL) != 0 && *(_QWORD *)(*v104 & 0xFFFFFFFFFFFFFFF8LL) )
                  break;
              }
            }
            else
            {
              v109 = *(_DWORD *)(v107 + 20);
              if ( v109 >= 0 && v109 < *(_DWORD *)(v103 + 20) )
                *(_DWORD *)(v103 + 20) = v109;
              while ( v105 != v104
                   && ((*v104 & 0xFFFFFFFFFFFFFFF8LL) == 0 || !*(_QWORD *)(*v104 & 0xFFFFFFFFFFFFFFF8LL)) )
                ++v104;
            }
          }
          else
          {
            v110 = (unsigned int)v224;
            v91 = v223;
            v92 = HIDWORD(v224);
            v111 = v224;
            v112 = &v223[3 * (unsigned int)v224];
            if ( (unsigned int)v224 >= (unsigned __int64)HIDWORD(v224) )
            {
              v124 = (unsigned int)v224 + 1LL;
              v214 = (__int64 *)v103;
              v125 = (const __m128i *)dest;
              v215 = v104;
              v216 = v105;
              if ( HIDWORD(v224) < v124 )
              {
                if ( v223 > dest || v112 <= dest )
                {
                  sub_C8D5F0((__int64)&v223, v225, v124, 0x18u, (__int64)v223, HIDWORD(v224));
                  v91 = v223;
                  v110 = (unsigned int)v224;
                  v125 = (const __m128i *)dest;
                }
                else
                {
                  v171 = (_BYTE *)dest - (_BYTE *)v223;
                  sub_C8D5F0((__int64)&v223, v225, v124, 0x18u, (__int64)v223, HIDWORD(v224));
                  v91 = v223;
                  v110 = (unsigned int)v224;
                  v125 = (const __m128i *)((char *)v223 + v171);
                }
              }
              v126 = (__m128i *)&v91[3 * v110];
              *v126 = _mm_loadu_si128(v125);
              v126[1].m128i_i64[0] = v125[1].m128i_i64[0];
              LODWORD(v224) = v224 + 1;
            }
            else
            {
              if ( v112 )
              {
                *v112 = v103;
                v112[1] = (__int64)v104;
                v112[2] = (__int64)v105;
                v111 = v224;
              }
              LODWORD(v224) = v111 + 1;
            }
            v104 = *(_QWORD **)(v107 + 24);
            v113 = *(unsigned int *)(v107 + 32);
            *(_DWORD *)(v107 + 16) = v100;
            *(_DWORD *)(v107 + 20) = v100;
            v105 = &v104[v113];
            if ( v104 == v105 )
            {
LABEL_132:
              v103 = v107;
              ++v100;
              break;
            }
            while ( (*v104 & 0xFFFFFFFFFFFFFFF8LL) == 0 || !*(_QWORD *)(*v104 & 0xFFFFFFFFFFFFFFF8LL) )
            {
              if ( v105 == ++v104 )
                goto LABEL_132;
            }
            v106 = (__int64)v105;
            v103 = v107;
            ++v100;
          }
        }
        v114 = (unsigned int)v218;
        v115 = (unsigned int)v218 + 1LL;
        if ( v115 > HIDWORD(v218) )
        {
          sub_C8D5F0((__int64)&v217, v219, v115, 8u, (__int64)v91, v92);
          v114 = (unsigned int)v218;
        }
        *(_QWORD *)&v217[8 * v114] = v103;
        v116 = *(_DWORD *)(v103 + 16);
        v117 = (unsigned int)(v218 + 1);
        LODWORD(v218) = v218 + 1;
        if ( *(_DWORD *)(v103 + 20) != v116 )
        {
          v98 = v224;
          if ( !(_DWORD)v224 )
            goto LABEL_156;
          goto LABEL_137;
        }
        v118 = 8 * v117;
        v119 = v217;
        v120 = (__int64 **)&v217[v118];
        v121 = v118 >> 3;
        v122 = v118 >> 5;
        if ( v122 )
        {
          v123 = &v120[-4 * v122];
          v41 = (char *)v120;
          while ( 1 )
          {
            v91 = (__int64 *)*((_QWORD *)v41 - 1);
            if ( v116 > *((_DWORD *)v91 + 4) )
              break;
            *((_DWORD *)v91 + 4) = -1;
            *((_DWORD *)v91 + 5) = v86;
            v91 = (__int64 *)*((_QWORD *)v41 - 2);
            if ( v116 > *((_DWORD *)v91 + 4) )
            {
              v41 -= 8;
              v121 = ((char *)v120 - v41) >> 3;
              goto LABEL_154;
            }
            *((_DWORD *)v91 + 4) = -1;
            *((_DWORD *)v91 + 5) = v86;
            v91 = (__int64 *)*((_QWORD *)v41 - 3);
            if ( v116 > *((_DWORD *)v91 + 4) )
            {
              v41 -= 16;
              v121 = ((char *)v120 - v41) >> 3;
              goto LABEL_154;
            }
            *((_DWORD *)v91 + 4) = -1;
            *((_DWORD *)v91 + 5) = v86;
            v91 = (__int64 *)*((_QWORD *)v41 - 4);
            if ( v116 > *((_DWORD *)v91 + 4) )
            {
              v41 -= 24;
              v121 = ((char *)v120 - v41) >> 3;
              goto LABEL_154;
            }
            v41 -= 32;
            *((_DWORD *)v91 + 4) = -1;
            *((_DWORD *)v91 + 5) = v86;
            if ( v123 == (__int64 **)v41 )
            {
              v92 = (v41 - v119) >> 3;
              goto LABEL_226;
            }
          }
LABEL_153:
          v121 = ((char *)v120 - v41) >> 3;
          goto LABEL_154;
        }
        v92 = v121;
        v41 = (char *)v120;
LABEL_226:
        if ( v92 != 2 )
        {
          if ( v92 != 3 )
          {
            if ( v92 != 1 )
              goto LABEL_229;
            goto LABEL_152;
          }
          v92 = *((_QWORD *)v41 - 1);
          if ( v116 > *(_DWORD *)(v92 + 16) )
            goto LABEL_153;
          *(_DWORD *)(v92 + 16) = -1;
          v41 -= 8;
          *(_DWORD *)(v92 + 20) = v86;
        }
        v92 = *((_QWORD *)v41 - 1);
        if ( v116 > *(_DWORD *)(v92 + 16) )
          goto LABEL_153;
        *(_DWORD *)(v92 + 16) = -1;
        v41 -= 8;
        *(_DWORD *)(v92 + 20) = v86;
LABEL_152:
        v92 = *((_QWORD *)v41 - 1);
        if ( v116 > *(_DWORD *)(v92 + 16) )
          goto LABEL_153;
        *(_DWORD *)(v92 + 16) = -1;
        *(_DWORD *)(v92 + 20) = v86;
LABEL_229:
        v41 = v119;
LABEL_154:
        if ( v101 == v121 )
        {
          for ( i = (__int64 ***)v201; v120 != (__int64 **)v41; *(_DWORD *)(v40 + 20) = -1 )
          {
            v40 = *(_QWORD *)v41;
            v41 += 8;
          }
          goto LABEL_28;
        }
        ++v86;
        v98 = v224;
        LODWORD(v218) = (v41 - v119) >> 3;
        if ( !(_DWORD)v224 )
        {
LABEL_156:
          v30 = v221;
          v84 = v101;
          if ( (_DWORD)v221 )
            goto LABEL_99;
          goto LABEL_157;
        }
LABEL_137:
        v96 = v223;
      }
    }
    if ( !v30 )
      break;
LABEL_99:
    v85 = v220;
  }
LABEL_157:
  v127 = v86;
  v128 = v199;
  i = (__int64 ***)v201;
  if ( v127 )
  {
    LODWORD(dest) = v127;
    v129 = 0;
    do
    {
      v130 = *(_QWORD **)v199;
      v131 = *(_QWORD *)(*(_QWORD *)v199 + 336LL);
      v130[52] += 136LL;
      v132 = (v131 + 7) & 0xFFFFFFFFFFFFFFF8LL;
      if ( v130[43] >= v132 + 136 && v131 )
      {
        v130[42] = v132 + 136;
        v133 = (_QWORD *)((v131 + 7) & 0xFFFFFFFFFFFFFFF8LL);
      }
      else
      {
        v133 = (_QWORD *)sub_9D1E70((__int64)(v130 + 42), 136, 136, 3);
        v132 = (unsigned __int64)v133;
      }
      sub_D23F30(v133, (__int64)v130);
      v136 = *(unsigned int *)(v201 + 8);
      if ( v136 + 1 > (unsigned __int64)*(unsigned int *)(v201 + 12) )
      {
        sub_C8D5F0(v201, src, v136 + 1, 8u, v134, v135);
        v136 = *(unsigned int *)(v201 + 8);
      }
      ++v129;
      *(_QWORD *)(*(_QWORD *)v201 + 8 * v136) = v132;
      ++*(_DWORD *)(v201 + 8);
    }
    while ( (_DWORD)dest != v129 );
    v128 = v199;
  }
  sub_D248B0(&v214, (__int64 *)(*(_QWORD *)v128 + 576LL), v128);
  v138 = *(_QWORD *)v128;
  v139 = *(_QWORD *)(*(_QWORD *)v128 + 432LL);
  v195 = (char *)*((int *)v216 + 2);
  v140 = v139 + 8LL * (_QWORD)v195;
  v141 = v139 + 8LL * *(unsigned int *)(*(_QWORD *)v128 + 440LL);
  v202 = 8LL * (_QWORD)v195;
  v142 = *(_DWORD *)(*(_QWORD *)v128 + 440LL);
  if ( v141 != v140 + 8 )
  {
    memmove((void *)v140, (const void *)(v140 + 8), v141 - (v140 + 8));
    v142 = *(_DWORD *)(v138 + 440);
  }
  *(_DWORD *)(v138 + 440) = v142 - 1;
  v143 = *i;
  v144 = *(_QWORD **)v128;
  v145 = 8LL * *((unsigned int *)i + 2);
  v146 = (void *)(*(_QWORD *)v128 + 432LL);
  v200 = &(*i)[(unsigned __int64)v145 / 8];
  v147 = *(unsigned int *)(*(_QWORD *)v128 + 440LL);
  v148 = v145 >> 3;
  srca = v145 >> 3;
  v120 = (__int64 **)(8 * v147);
  if ( v202 == 8 * v147 )
  {
    if ( v147 + v148 > (unsigned __int64)*((unsigned int *)v144 + 111) )
    {
      dest = *(void **)v128;
      sub_C8D5F0((__int64)v146, v144 + 56, v147 + v148, 8u, (__int64)v144, v137);
      v144 = dest;
      v147 = *((unsigned int *)dest + 110);
      v120 = (__int64 **)(8 * v147);
    }
    if ( v143 != v200 )
    {
      v185 = v144[54];
      dest = v144;
      v186 = (char *)v120 + v185;
      v120 = v143;
      memcpy(v186, v143, v145);
      v144 = dest;
      LODWORD(v147) = *((_DWORD *)dest + 110);
    }
    *((_DWORD *)v144 + 110) = srca + v147;
  }
  else
  {
    if ( v147 + srca > (unsigned __int64)*((unsigned int *)v144 + 111) )
    {
      v197 = *(unsigned int **)v128;
      dest = (void *)(*(_QWORD *)v128 + 432LL);
      sub_C8D5F0((__int64)v146, v144 + 56, v147 + srca, 8u, (__int64)v144, v137);
      v144 = v197;
      v146 = dest;
      v147 = v197[110];
      v120 = (__int64 **)(8 * v147);
    }
    v137 = v144[54];
    v149 = (__int64 **)(v137 + v202);
    dest = (char *)v120 + v137;
    v150 = (size_t)&v120[v202 / 0xFFFFFFFFFFFFFFF8LL];
    v151 = (__int64)&v120[v202 / 0xFFFFFFFFFFFFFFF8LL] >> 3;
    if ( v145 <= (unsigned __int64)&v120[v202 / 0xFFFFFFFFFFFFFFF8LL] )
    {
      v187 = dest;
      v198 = &v120[v145 / 0xFFFFFFFFFFFFFFF8LL];
      srcc = (__int64 **)((char *)&v120[v145 / 0xFFFFFFFFFFFFFFF8LL] + v137);
      v137 = v145;
      v188 = (v145 >> 3) + v147;
      if ( v188 > *((unsigned int *)v144 + 111) )
      {
        v192 = v149;
        v194 = v144;
        sub_C8D5F0((__int64)v146, v144 + 56, v188, 8u, (__int64)v144, v145);
        v144 = v194;
        v137 = v145;
        v149 = v192;
        v147 = *((unsigned int *)v194 + 110);
        v187 = (void *)(v194[54] + 8 * v147);
      }
      v120 = srcc;
      if ( dest != srcc )
      {
        v191 = v149;
        v193 = v144;
        memmove(v187, srcc, v137);
        v144 = v193;
        v149 = v191;
        LODWORD(v147) = v193[110];
      }
      *((_DWORD *)v144 + 110) = (v145 >> 3) + v147;
      if ( v149 != srcc )
      {
        v189 = (char *)dest;
        v120 = v149;
        dest = v149;
        memmove(
          (void *)(v189 - (char *)&v198[v202 / 0xFFFFFFFFFFFFFFF8LL]),
          v149,
          (size_t)&v198[v202 / 0xFFFFFFFFFFFFFFF8LL]);
        v149 = (__int64 **)dest;
      }
      if ( v143 != v200 )
      {
        v120 = v143;
        memmove(v149, v143, v145);
      }
    }
    else
    {
      v152 = srca + v147;
      *((_DWORD *)v144 + 110) = v152;
      if ( v149 != dest )
      {
        v120 = (__int64 **)(v137 + v202);
        v196 = v151;
        v203 = v150;
        srcd = v149;
        memcpy((void *)(v137 + 8LL * v152 - v150), v149, v150);
        v151 = v196;
        v150 = v203;
        v149 = srcd;
      }
      if ( v151 )
      {
        for ( j = 0; j != v151; ++j )
        {
          v120 = (__int64 **)v143[j];
          v149[j] = (__int64 *)v120;
        }
        v143 = (__int64 **)((char *)v143 + v150);
      }
      if ( v200 != v143 )
      {
        v120 = v143;
        memcpy(dest, v143, (char *)v200 - (char *)v143);
      }
    }
  }
  v154 = *(_QWORD **)v128;
  v155 = v195;
  dest = (void *)*(int *)(*(_QWORD *)v128 + 440LL);
  if ( v195 != dest )
  {
    v204 = i;
    while ( 1 )
    {
      v156 = (__int64)(v154 + 72);
      v157 = (int)v155;
      v158 = (__int64 *)(v154[54] + 8LL * (int)v155);
      v120 = (__int64 **)v158;
      if ( (unsigned __int8)sub_D24D10((__int64)(v154 + 72), v158, &v214) )
      {
        ++v155;
        *((_DWORD *)v214 + 2) = v157;
        if ( dest == v155 )
          goto LABEL_186;
      }
      else
      {
        v120 = (__int64 **)v158;
        ++v155;
        v159 = sub_D27750(v156, v158, v214);
        v160 = *v158;
        *(_DWORD *)++v159 = 0;
        *(v159 - 1) = v160;
        *(_DWORD *)v159 = v157;
        if ( dest == v155 )
        {
LABEL_186:
          i = v204;
          break;
        }
      }
      v154 = *(_QWORD **)v128;
    }
  }
  v161 = *(__int64 **)(v128 + 8);
  dest = &v161[*(unsigned int *)(v128 + 16)];
  if ( dest != v161 )
  {
    srcb = (void *)v128;
    v162 = (__int64 *)i;
    v163 = v161;
    do
    {
      v164 = *v163;
      v214 = (__int64 *)v164;
      v165 = *(__int64 **)(v164 + 8);
      v166 = *v165;
      v167 = (__int64)&v165[*(unsigned int *)(v164 + 16)];
      v168 = *(_DWORD *)(*v165 + 20);
      if ( (__int64 *)v167 != v165 )
      {
        while ( 1 )
        {
          ++v165;
          *(_DWORD *)(v166 + 20) = -1;
          if ( (__int64 *)v167 == v165 )
            break;
          v166 = *v165;
        }
      }
      ++v163;
      v169 = *(_QWORD *)(*v162 + 8LL * v168);
      v170 = *(_DWORD *)(v169 + 16);
      sub_D24960(v169 + 8, v164, *v162, v167, (__int64)v161, v137);
      v120 = &v214;
      *(_DWORD *)sub_D25AF0(v169 + 56, (__int64 *)&v214) = v170;
      *v214 = v169;
    }
    while ( dest != v163 );
    i = (__int64 ***)v162;
    v128 = (__int64)srcb;
  }
  *(_QWORD *)v128 = 0;
  *(_DWORD *)(v128 + 16) = 0;
  sub_D24EE0(v128 + 56);
  v119 = v217;
LABEL_28:
  if ( v119 != v219 )
    _libc_free(v119, v120);
  if ( v223 != (__int64 *)v225 )
    _libc_free(v223, v120);
  if ( v220 != v222 )
    _libc_free(v220, v120);
  return i;
}
