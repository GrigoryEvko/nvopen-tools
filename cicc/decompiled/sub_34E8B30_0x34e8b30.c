// Function: sub_34E8B30
// Address: 0x34e8b30
//
void __fastcall sub_34E8B30(
        __int64 *a1,
        __int64 *a2,
        __int64 a3,
        __int64 a4,
        __int64 a5,
        unsigned __int64 *a6,
        __int64 a7,
        __int64 a8)
{
  unsigned __int64 *v8; // r13
  unsigned __int64 *v9; // r12
  __int64 v10; // rbx
  __int64 v11; // rax
  __int64 *v12; // rax
  __int64 v13; // r10
  __int64 v14; // r11
  __int64 *v15; // r8
  __int64 v16; // r15
  __int64 v17; // r11
  int v18; // ecx
  __int64 v19; // rbx
  __int64 *v20; // r15
  unsigned __int64 *v21; // r14
  unsigned __int64 v22; // rdx
  unsigned __int64 v23; // rdi
  __int64 v24; // rsi
  unsigned __int64 *v25; // rax
  unsigned __int64 *v26; // r14
  unsigned __int64 *v27; // rbx
  unsigned __int64 *i; // r15
  unsigned __int64 v29; // rdi
  unsigned __int64 v30; // rdx
  unsigned int v31; // r8d
  int v32; // esi
  unsigned __int64 v33; // rax
  unsigned int v34; // edi
  int v35; // ecx
  unsigned __int64 v36; // rdi
  __int64 v37; // rbx
  unsigned __int64 *v38; // r14
  __int64 v39; // r12
  unsigned __int64 v40; // rax
  unsigned __int64 v41; // rdi
  __int64 *v42; // r15
  unsigned __int64 *v43; // r14
  __int64 v44; // rbx
  unsigned __int64 v45; // rdx
  unsigned __int64 v46; // rdi
  __int64 v47; // rcx
  unsigned __int64 *v48; // rbx
  __int64 *v49; // r14
  unsigned __int64 v50; // rdi
  unsigned __int64 v51; // rdx
  unsigned int v52; // r8d
  int v53; // esi
  unsigned __int64 v54; // rax
  unsigned int v55; // edi
  int v56; // ecx
  unsigned __int64 v57; // rdi
  unsigned __int8 v58; // cl
  unsigned __int64 *v59; // r12
  __int64 *v60; // rbx
  __int64 v61; // r13
  unsigned __int64 v62; // rsi
  unsigned __int64 v63; // rdi
  __int64 v64; // rax
  __int64 v65; // r13
  unsigned __int64 *v66; // r12
  unsigned __int64 *v67; // rbx
  unsigned __int64 v68; // rcx
  unsigned __int64 v69; // rdi
  unsigned __int64 *v70; // rcx
  __int64 v71; // r12
  __int64 *v72; // rbx
  unsigned __int64 *v73; // r13
  __int64 v74; // rsi
  unsigned __int64 v75; // rdi
  __int64 v76; // r11
  __int64 *v77; // rax
  __int64 v78; // rax
  unsigned __int64 *v79; // r12
  unsigned __int64 *v80; // rbx
  __int64 v81; // r13
  unsigned __int64 v82; // rax
  unsigned __int64 v83; // rdi
  __int64 v84; // rdx
  __int64 v85; // rdx
  __int64 v86; // r13
  char *v87; // r12
  __int64 v88; // rbx
  __int64 v89; // rcx
  unsigned __int64 v90; // rdi
  unsigned __int64 *v91; // rbx
  unsigned __int64 *v92; // r12
  __int64 v93; // r13
  unsigned __int64 v94; // rsi
  unsigned __int64 v95; // rdi
  __int64 v96; // r11
  unsigned __int8 v97; // cl
  __int64 v98; // r12
  unsigned __int64 *v99; // rbx
  unsigned __int64 *v100; // r13
  unsigned __int64 v101; // rax
  unsigned __int64 v102; // rdi
  __int64 v103; // r12
  unsigned __int64 *v104; // rbx
  __int64 v105; // r13
  unsigned __int64 v106; // rax
  unsigned __int64 v107; // rdi
  unsigned __int64 *v108; // [rsp+0h] [rbp-A0h]
  unsigned __int64 *v109; // [rsp+8h] [rbp-98h]
  unsigned __int64 *v110; // [rsp+8h] [rbp-98h]
  __int64 v111; // [rsp+8h] [rbp-98h]
  __int64 v112; // [rsp+10h] [rbp-90h]
  __int64 v113; // [rsp+10h] [rbp-90h]
  __int64 v114; // [rsp+10h] [rbp-90h]
  int v115; // [rsp+18h] [rbp-88h]
  unsigned __int64 *v116; // [rsp+18h] [rbp-88h]
  unsigned __int64 *v117; // [rsp+18h] [rbp-88h]
  int v118; // [rsp+18h] [rbp-88h]
  unsigned __int64 *v119; // [rsp+18h] [rbp-88h]
  __int64 v120; // [rsp+20h] [rbp-80h]
  __int64 v121; // [rsp+20h] [rbp-80h]
  __int64 v122; // [rsp+20h] [rbp-80h]
  __int64 v123; // [rsp+20h] [rbp-80h]
  unsigned __int64 *v124; // [rsp+20h] [rbp-80h]
  __int64 *v125; // [rsp+28h] [rbp-78h]
  __int64 v126; // [rsp+28h] [rbp-78h]
  int v127; // [rsp+28h] [rbp-78h]
  __int64 v128; // [rsp+28h] [rbp-78h]
  __int64 v129; // [rsp+28h] [rbp-78h]
  __int64 v130; // [rsp+28h] [rbp-78h]
  __int64 v131; // [rsp+30h] [rbp-70h]
  int v132; // [rsp+30h] [rbp-70h]
  __int64 v133; // [rsp+30h] [rbp-70h]
  __int64 v134; // [rsp+30h] [rbp-70h]
  int v135; // [rsp+30h] [rbp-70h]
  int v136; // [rsp+30h] [rbp-70h]
  __int64 v137; // [rsp+38h] [rbp-68h]
  __int64 v138; // [rsp+38h] [rbp-68h]
  __int64 v139; // [rsp+38h] [rbp-68h]
  __int64 v140; // [rsp+38h] [rbp-68h]
  __int64 v141; // [rsp+38h] [rbp-68h]
  __int64 v142; // [rsp+40h] [rbp-60h]
  __int64 v143; // [rsp+48h] [rbp-58h]
  __int64 *v144; // [rsp+48h] [rbp-58h]
  __int64 *v145; // [rsp+50h] [rbp-50h]
  __int64 *v146; // [rsp+58h] [rbp-48h]
  __int64 *v147; // [rsp+58h] [rbp-48h]
  __int64 v148; // [rsp+60h] [rbp-40h]
  __int64 v149; // [rsp+60h] [rbp-40h]
  __int64 v150; // [rsp+68h] [rbp-38h]

  while ( 1 )
  {
    v8 = a6;
    v9 = (unsigned __int64 *)a1;
    v10 = a5;
    v150 = a3;
    v11 = a7;
    if ( a5 <= a7 )
      v11 = a5;
    if ( v11 >= a4 )
      break;
    if ( a5 <= a7 )
    {
      v148 = a3 - (_QWORD)a2;
      v19 = (a3 - (__int64)a2) >> 3;
      if ( a3 - (__int64)a2 <= 0 )
        return;
      v147 = a2;
      v20 = a2;
      v21 = a6;
      do
      {
        v22 = *v20;
        *v20 = 0;
        v23 = *v21;
        *v21 = v22;
        if ( v23 )
          j_j___libc_free_0(v23);
        ++v20;
        ++v21;
        --v19;
      }
      while ( v19 );
      v24 = v148;
      if ( v148 <= 0 )
        v24 = 8;
      v25 = (unsigned __int64 *)((char *)v8 + v24);
      if ( v147 != (__int64 *)v9 )
      {
        if ( v8 == v25 )
          return;
        v26 = (unsigned __int64 *)(v147 - 1);
        v27 = v25 - 1;
        for ( i = (unsigned __int64 *)(v150 - 8); ; --i )
        {
          v30 = *v27;
          v31 = *(_DWORD *)(*v27 + 8);
          v32 = *(_DWORD *)(*v27 + 12);
          if ( v31 == 7 )
            v32 = -(*(_DWORD *)(v30 + 16) + v32);
          v33 = *v26;
          v34 = *(_DWORD *)(*v26 + 8);
          v35 = *(_DWORD *)(*v26 + 12);
          if ( v34 == 7 )
            v35 = -(*(_DWORD *)(v33 + 16) + v35);
          if ( v32 > v35
            || v32 == v35
            && ((v97 = *(_BYTE *)(v30 + 20), (v97 & 1) == 0) && (*(_BYTE *)(v33 + 20) & 1) != 0
             || ((*(_BYTE *)(v33 + 20) ^ v97) & 1) == 0
             && (v31 < v34
              || v31 == v34
              && *(_DWORD *)(*(_QWORD *)(*(_QWORD *)v30 + 16LL) + 24LL) < *(_DWORD *)(*(_QWORD *)(*(_QWORD *)v33 + 16LL)
                                                                                    + 24LL))) )
          {
            *v26 = 0;
            v36 = *i;
            *i = v33;
            if ( v36 )
              j_j___libc_free_0(v36);
            if ( v26 == v9 )
            {
              v98 = v27 + 1 - v8;
              if ( (char *)(v27 + 1) - (char *)v8 > 0 )
              {
                v99 = &v27[-v98];
                v100 = &i[-v98];
                do
                {
                  v101 = v99[v98];
                  v99[v98] = 0;
                  v102 = v100[v98 - 1];
                  v100[v98 - 1] = v101;
                  if ( v102 )
                    j_j___libc_free_0(v102);
                  --v98;
                }
                while ( v98 );
              }
              return;
            }
            --v26;
          }
          else
          {
            *v27 = 0;
            v29 = *i;
            *i = v30;
            if ( v29 )
              j_j___libc_free_0(v29);
            if ( v8 == v27 )
              return;
            --v27;
          }
        }
      }
      v103 = v24 >> 3;
      if ( v24 > 0 )
      {
        v104 = &v25[-v103];
        v105 = -8 * v103 + v150;
        do
        {
          v106 = v104[v103 - 1];
          v104[v103 - 1] = 0;
          v107 = *(_QWORD *)(v105 + 8 * v103 - 8);
          *(_QWORD *)(v105 + 8 * v103 - 8) = v106;
          if ( v107 )
            j_j___libc_free_0(v107);
          --v103;
        }
        while ( v103 );
      }
      return;
    }
    if ( a5 >= a4 )
    {
      v133 = a4;
      v16 = a5 / 2;
      v145 = &a2[a5 / 2];
      v77 = sub_34E75A0(a1, (__int64)a2, v145);
      v14 = v133;
      v15 = a2;
      v146 = v77;
      v13 = (__int64)a2;
      v143 = v77 - a1;
    }
    else
    {
      v137 = a4;
      v143 = a4 / 2;
      v146 = &a1[a4 / 2];
      v12 = sub_34E74C0(a2, a3, v146);
      v13 = (__int64)a2;
      v14 = v137;
      v145 = v12;
      v15 = a2;
      v16 = v12 - a2;
    }
    v142 = v14 - v143;
    if ( v14 - v143 > v16 && a7 >= v16 )
    {
      v17 = (__int64)v146;
      if ( !v16 )
        goto LABEL_10;
      v134 = v13 - (_QWORD)v146;
      v78 = (v13 - (__int64)v146) >> 3;
      v140 = (__int64)v145 - v13;
      v122 = v78;
      if ( (__int64)v145 - v13 <= 0 )
      {
        if ( v134 <= 0 )
          goto LABEL_10;
        v141 = 0;
        v129 = 0;
LABEL_103:
        v85 = v122;
        v135 = (int)v9;
        v123 = v10;
        v119 = v8;
        v86 = v78;
        v85 *= -8;
        v87 = (char *)v145 + v85;
        v88 = v85 + v13;
        do
        {
          v89 = *(_QWORD *)(v88 + 8 * v86 - 8);
          *(_QWORD *)(v88 + 8 * v86 - 8) = 0;
          v90 = *(_QWORD *)&v87[8 * v86 - 8];
          *(_QWORD *)&v87[8 * v86 - 8] = v89;
          if ( v90 )
            j_j___libc_free_0(v90);
          --v86;
        }
        while ( v86 );
        LODWORD(v9) = v135;
        v10 = v123;
        v8 = v119;
      }
      else
      {
        v128 = (v13 - (__int64)v146) >> 3;
        v114 = v13;
        v118 = (int)a1;
        v79 = v8;
        v111 = v10;
        v80 = (unsigned __int64 *)v13;
        v108 = v8;
        v81 = ((__int64)v145 - v13) >> 3;
        do
        {
          v82 = *v80;
          *v80 = 0;
          v83 = *v79;
          *v79 = v82;
          if ( v83 )
            j_j___libc_free_0(v83);
          ++v80;
          ++v79;
          --v81;
        }
        while ( v81 );
        v84 = 8;
        v78 = v128;
        LODWORD(v9) = v118;
        v13 = v114;
        v10 = v111;
        v8 = v108;
        if ( v140 > 0 )
          v84 = v140;
        v129 = v84;
        v141 = v84 >> 3;
        if ( v134 > 0 )
          goto LABEL_103;
      }
      if ( v129 <= 0 )
      {
        v17 = (__int64)v146;
      }
      else
      {
        v136 = (int)v9;
        v130 = v10;
        v91 = v8;
        v124 = v8;
        v92 = (unsigned __int64 *)v146;
        v93 = v141;
        do
        {
          v94 = *v91;
          *v91 = 0;
          v95 = *v92;
          *v92 = v94;
          if ( v95 )
            j_j___libc_free_0(v95);
          ++v91;
          ++v92;
          --v93;
        }
        while ( v93 );
        LODWORD(v9) = v136;
        v10 = v130;
        v8 = v124;
        v96 = v141;
        if ( v141 <= 0 )
          v96 = 1;
        v17 = (__int64)&v146[v96];
      }
      goto LABEL_10;
    }
    if ( a7 < v142 )
    {
      v17 = sub_34E6400((__int64)v146, v13, (__int64)v145);
      goto LABEL_10;
    }
    v17 = (__int64)v145;
    if ( !v142 )
      goto LABEL_10;
    v131 = (__int64)v145 - v13;
    v138 = v13 - (_QWORD)v146;
    v120 = ((__int64)v145 - v13) >> 3;
    if ( v13 - (__int64)v146 <= 0 )
    {
      if ( v131 <= 0 )
        goto LABEL_10;
      v116 = v8;
      v139 = 0;
      v126 = 0;
    }
    else
    {
      v125 = v15;
      v115 = (int)a1;
      v59 = v8;
      v112 = v10;
      v60 = v146;
      v109 = v8;
      v61 = (v13 - (__int64)v146) >> 3;
      do
      {
        v62 = *v60;
        *v60 = 0;
        v63 = *v59;
        *v59 = v62;
        if ( v63 )
          j_j___libc_free_0(v63);
        ++v60;
        ++v59;
        --v61;
      }
      while ( v61 );
      v64 = 8;
      v15 = v125;
      v8 = v109;
      LODWORD(v9) = v115;
      v10 = v112;
      if ( v138 > 0 )
        v64 = v138;
      v126 = v64;
      v116 = (unsigned __int64 *)((char *)v109 + v64);
      v139 = v64 >> 3;
      if ( v131 <= 0 )
        goto LABEL_85;
    }
    v110 = v8;
    v65 = v120;
    v132 = (int)v9;
    v113 = v10;
    v66 = (unsigned __int64 *)v146;
    v67 = (unsigned __int64 *)v15;
    do
    {
      v68 = *v67;
      *v67 = 0;
      v69 = *v66;
      *v66 = v68;
      if ( v69 )
        j_j___libc_free_0(v69);
      ++v67;
      ++v66;
      --v65;
    }
    while ( v65 );
    LODWORD(v9) = v132;
    v10 = v113;
    v8 = v110;
LABEL_85:
    if ( v126 <= 0 )
    {
      v17 = (__int64)v145;
    }
    else
    {
      v70 = v116;
      v127 = (int)v9;
      v121 = v10;
      v117 = v8;
      v71 = v139;
      v72 = &v145[-v139];
      v73 = &v70[-v139];
      do
      {
        v74 = v73[v71 - 1];
        v73[v71 - 1] = 0;
        v75 = v72[v71 - 1];
        v72[v71 - 1] = v74;
        if ( v75 )
          j_j___libc_free_0(v75);
        --v71;
      }
      while ( v71 );
      v76 = 0x1FFFFFFFFFFFFFFFLL;
      LODWORD(v9) = v127;
      if ( v139 > 0 )
        v76 = -1 * v139;
      v10 = v121;
      v8 = v117;
      v17 = (__int64)&v145[v76];
    }
LABEL_10:
    v18 = v143;
    v144 = (__int64 *)v17;
    sub_34E8B30((_DWORD)v9, (_DWORD)v146, v17, v18, v16, (_DWORD)v8, a7, a8);
    a4 = v142;
    a6 = v8;
    a5 = v10 - v16;
    a2 = v145;
    a3 = v150;
    a1 = v144;
  }
  v42 = a1;
  v43 = a6;
  v149 = (char *)a2 - (char *)a1;
  v44 = a2 - a1;
  if ( (char *)a2 - (char *)a1 > 0 )
  {
    do
    {
      v45 = *v42;
      *v42 = 0;
      v46 = *v43;
      *v43 = v45;
      if ( v46 )
        j_j___libc_free_0(v46);
      ++v42;
      ++v43;
      --v44;
    }
    while ( v44 );
    v47 = v149;
    if ( v149 <= 0 )
      v47 = 8;
    v48 = (unsigned __int64 *)((char *)v8 + v47);
    if ( v8 != (unsigned __int64 *)((char *)v8 + v47) )
    {
      v49 = a2;
      while ( v49 != (__int64 *)v150 )
      {
        v51 = *v49;
        v52 = *(_DWORD *)(*v49 + 8);
        v53 = *(_DWORD *)(*v49 + 12);
        if ( v52 == 7 )
          v53 = -(*(_DWORD *)(v51 + 16) + v53);
        v54 = *v8;
        v55 = *(_DWORD *)(*v8 + 8);
        v56 = *(_DWORD *)(*v8 + 12);
        if ( v55 == 7 )
          v56 = -(*(_DWORD *)(v54 + 16) + v56);
        if ( v53 > v56
          || v53 == v56
          && ((v58 = *(_BYTE *)(v51 + 20), (v58 & 1) == 0) && (*(_BYTE *)(v54 + 20) & 1) != 0
           || ((*(_BYTE *)(v54 + 20) ^ v58) & 1) == 0
           && (v52 < v55
            || v52 == v55
            && *(_DWORD *)(*(_QWORD *)(*(_QWORD *)v51 + 16LL) + 24LL) < *(_DWORD *)(*(_QWORD *)(*(_QWORD *)v54 + 16LL)
                                                                                  + 24LL))) )
        {
          *v49 = 0;
          v57 = *v9;
          *v9 = v51;
          if ( v57 )
            j_j___libc_free_0(v57);
          ++v49;
        }
        else
        {
          *v8 = 0;
          v50 = *v9;
          *v9 = v54;
          if ( v50 )
            j_j___libc_free_0(v50);
          ++v8;
        }
        ++v9;
        if ( v8 == v48 )
          return;
      }
      v37 = (char *)v48 - (char *)v8;
      v38 = v9;
      v39 = v37 >> 3;
      if ( v37 > 0 )
      {
        do
        {
          v40 = *v8;
          *v8 = 0;
          v41 = *v38;
          *v38 = v40;
          if ( v41 )
            j_j___libc_free_0(v41);
          ++v8;
          ++v38;
          --v39;
        }
        while ( v39 );
      }
    }
  }
}
