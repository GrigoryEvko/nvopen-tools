// Function: sub_1520420
// Address: 0x1520420
//
__int64 __fastcall sub_1520420(__int64 a1, __int64 a2, __int64 a3, __int64 a4, unsigned __int64 a5)
{
  _QWORD *v6; // r14
  __int64 v7; // rbx
  __int64 v8; // r13
  __int64 v9; // r11
  __int64 v10; // r10
  __int64 v11; // r9
  unsigned int v12; // r12d
  _BYTE *v13; // rdx
  char *v14; // rdx
  int v15; // edi
  char *v16; // r10
  int v17; // eax
  int v18; // edx
  char *v19; // rdi
  unsigned int v20; // eax
  unsigned int *v21; // rax
  __int64 v22; // rdx
  unsigned int *v23; // rdx
  unsigned int *v24; // rcx
  char *v25; // rdx
  int v26; // edi
  char *v27; // r10
  int v28; // eax
  char *v29; // r12
  char *v30; // rbx
  unsigned int v31; // edx
  int v32; // edi
  unsigned int v33; // r14d
  unsigned int v34; // edx
  int v35; // edx
  unsigned __int64 v36; // rax
  int v37; // ebx
  __int64 v38; // r12
  _DWORD *v39; // rax
  _DWORD *i; // rdx
  char v41; // al
  _QWORD *m; // rdx
  unsigned __int64 *v43; // rbx
  unsigned __int64 *j; // r12
  __int64 v45; // r11
  unsigned int v46; // edx
  unsigned __int64 *v47; // rax
  __int64 v48; // rax
  __int64 v49; // rax
  _QWORD *k; // rax
  __int64 *v51; // rbx
  __int64 *v52; // r12
  __int64 v53; // r13
  __int64 v54; // rax
  __int64 *v55; // r12
  __int64 *v56; // rbx
  __int64 v57; // rdi
  char v58; // dl
  unsigned int v59; // eax
  char v60; // dl
  unsigned int v61; // eax
  __int64 *v62; // rbx
  __int64 v63; // rdx
  __int64 *v64; // r13
  unsigned __int64 *v65; // r12
  __int64 v66; // rax
  unsigned int v67; // edx
  __int64 v68; // rdi
  _QWORD *v69; // rbx
  __int64 v70; // r12
  _QWORD *n; // r12
  __int64 v72; // rdi
  unsigned int v73; // eax
  char v74; // dl
  _DWORD *v75; // rbx
  __int64 v76; // r12
  _DWORD *v77; // r12
  int v78; // edi
  char *v79; // rax
  unsigned int v80; // edx
  unsigned int v81; // ecx
  int v82; // edi
  unsigned int v83; // edx
  int v84; // eax
  __int64 v85; // rax
  __int64 v86; // rdx
  _BYTE *v87; // rdi
  unsigned int v88; // eax
  void *v89; // rdi
  size_t v90; // rdx
  __int64 jj; // r12
  __int64 v92; // r12
  __int64 v93; // rax
  __int64 v94; // rdx
  _QWORD *v95; // rax
  _QWORD *v96; // rdi
  _QWORD *v97; // rdx
  __int64 *v98; // rdx
  __int64 v99; // rax
  int v101; // r10d
  int v102; // ecx
  unsigned int v103; // edx
  unsigned __int64 v104; // r11
  unsigned int v105; // r14d
  int v106; // edi
  int v107; // ecx
  __int64 v108; // rbx
  __int64 v109; // rax
  int v110; // ecx
  unsigned int v111; // edx
  unsigned __int64 v112; // r11
  int v113; // edi
  unsigned __int64 *v114; // rsi
  int v115; // ecx
  unsigned int v116; // ecx
  __int64 v117; // rdx
  __int64 v118; // rbx
  int v119; // eax
  char *v120; // rdx
  bool v121; // zf
  _QWORD *v122; // rax
  __int64 v123; // rdx
  unsigned int v124; // edx
  unsigned int v125; // ebx
  char v126; // al
  __int64 v127; // rdi
  __int64 v128; // rax
  __int64 v129; // rax
  _QWORD *v130; // rax
  __int64 v131; // rax
  _DWORD *v132; // rax
  __int64 v133; // rdx
  _DWORD *ii; // rdx
  unsigned int v135; // eax
  unsigned int v136; // ebx
  char v137; // al
  __int64 v138; // rdi
  __int64 v139; // rax
  int v140; // edi
  _DWORD *v141; // rax
  __int64 v142; // rdx
  _DWORD *v143; // rdx
  _QWORD *v144; // [rsp+0h] [rbp-80h]
  _QWORD *v145; // [rsp+0h] [rbp-80h]
  _QWORD *v146; // [rsp+0h] [rbp-80h]
  _QWORD *v147; // [rsp+0h] [rbp-80h]
  int v148; // [rsp+8h] [rbp-78h]
  int v149; // [rsp+8h] [rbp-78h]
  __int64 v150; // [rsp+8h] [rbp-78h]
  __int64 v151; // [rsp+8h] [rbp-78h]
  __int64 v152; // [rsp+8h] [rbp-78h]
  __int64 v153; // [rsp+8h] [rbp-78h]
  unsigned int v154; // [rsp+8h] [rbp-78h]
  _QWORD *v155; // [rsp+18h] [rbp-68h]
  __int64 v156; // [rsp+28h] [rbp-58h] BYREF
  __int64 v157; // [rsp+30h] [rbp-50h] BYREF
  void *s; // [rsp+38h] [rbp-48h]
  __int64 v159; // [rsp+40h] [rbp-40h]
  __int64 v160; // [rsp+48h] [rbp-38h]

  v6 = (_QWORD *)a2;
  v157 = 0;
  s = 0;
  v159 = 0;
  v160 = 0;
  while ( 2 )
  {
    v155 = v6;
    v7 = v6[2];
    v8 = v6[4];
    v9 = v6[6];
    v10 = v6[5] + 8LL;
LABEL_3:
    v11 = v10;
    while ( v9 != v7 )
    {
      v12 = *(_DWORD *)(v7 + 4);
      if ( v12 < *(_DWORD *)(a1 + 8) && (v13 = *(_BYTE **)(*(_QWORD *)a1 + 8LL * v12)) != 0 )
      {
        if ( (unsigned __int8)(*v13 - 4) <= 0x1Eu && v13[1] == 2 )
        {
          a2 = (unsigned int)v160;
          if ( !(_DWORD)v160 )
          {
            ++v157;
            goto LABEL_172;
          }
          a5 = (unsigned int)(v160 - 1);
          a4 = (unsigned int)a5 & (37 * v12);
          v25 = (char *)s + 4 * a4;
          v26 = *(_DWORD *)v25;
          if ( v12 != *(_DWORD *)v25 )
          {
            v149 = 1;
            v27 = 0;
            while ( v26 != -1 )
            {
              if ( !v27 && v26 == -2 )
                v27 = v25;
              a4 = (unsigned int)a5 & (v149 + (_DWORD)a4);
              v25 = (char *)s + 4 * (unsigned int)a4;
              v26 = *(_DWORD *)v25;
              if ( v12 == *(_DWORD *)v25 )
                goto LABEL_9;
              ++v149;
            }
            if ( v27 )
              v25 = v27;
            ++v157;
            v28 = v159 + 1;
            if ( 4 * ((int)v159 + 1) < (unsigned int)(3 * v160) )
            {
              a4 = (unsigned int)(v160 - HIDWORD(v159) - v28);
              if ( (unsigned int)a4 <= (unsigned int)v160 >> 3 )
              {
                v147 = (_QWORD *)v11;
                v153 = v9;
                sub_136B240((__int64)&v157, v160);
                if ( !(_DWORD)v160 )
                {
LABEL_388:
                  LODWORD(v159) = v159 + 1;
                  BUG();
                }
                a5 = (unsigned __int64)s;
                a4 = 0;
                v9 = v153;
                v105 = (v160 - 1) & (37 * v12);
                v11 = (__int64)v147;
                a2 = 1;
                v25 = (char *)s + 4 * v105;
                v106 = *(_DWORD *)v25;
                v28 = v159 + 1;
                if ( v12 != *(_DWORD *)v25 )
                {
                  while ( v106 != -1 )
                  {
                    if ( !a4 && v106 == -2 )
                      a4 = (__int64)v25;
                    v105 = (v160 - 1) & (a2 + v105);
                    v25 = (char *)s + 4 * v105;
                    v106 = *(_DWORD *)v25;
                    if ( v12 == *(_DWORD *)v25 )
                      goto LABEL_50;
                    a2 = (unsigned int)(a2 + 1);
                  }
                  if ( a4 )
                    v25 = (char *)a4;
                }
              }
              goto LABEL_50;
            }
LABEL_172:
            a2 = (unsigned int)(2 * v160);
            v146 = (_QWORD *)v11;
            v152 = v9;
            sub_136B240((__int64)&v157, a2);
            if ( !(_DWORD)v160 )
              goto LABEL_388;
            v9 = v152;
            v11 = (__int64)v146;
            a4 = ((_DWORD)v160 - 1) & (37 * v12);
            v25 = (char *)s + 4 * a4;
            a5 = *(unsigned int *)v25;
            v28 = v159 + 1;
            if ( v12 != (_DWORD)a5 )
            {
              v78 = 1;
              a2 = 0;
              while ( (_DWORD)a5 != -1 )
              {
                if ( !a2 && (_DWORD)a5 == -2 )
                  a2 = (__int64)v25;
                a4 = ((_DWORD)v160 - 1) & (unsigned int)(v78 + a4);
                v25 = (char *)s + 4 * (unsigned int)a4;
                a5 = *(unsigned int *)v25;
                if ( v12 == (_DWORD)a5 )
                  goto LABEL_50;
                ++v78;
              }
              if ( a2 )
                v25 = (char *)a2;
            }
LABEL_50:
            LODWORD(v159) = v28;
            if ( *(_DWORD *)v25 != -1 )
              --HIDWORD(v159);
            *(_DWORD *)v25 = v12;
          }
        }
      }
      else
      {
        a2 = (unsigned int)v160;
        if ( !(_DWORD)v160 )
        {
          ++v157;
          goto LABEL_68;
        }
        a5 = (unsigned int)(v160 - 1);
        a4 = (unsigned int)a5 & (37 * v12);
        v14 = (char *)s + 4 * a4;
        v15 = *(_DWORD *)v14;
        if ( v12 != *(_DWORD *)v14 )
        {
          v148 = 1;
          v16 = 0;
          while ( v15 != -1 )
          {
            if ( v16 || v15 != -2 )
              v14 = v16;
            a4 = (unsigned int)a5 & (v148 + (_DWORD)a4);
            v15 = *((_DWORD *)s + (unsigned int)a4);
            if ( v12 == v15 )
              goto LABEL_9;
            ++v148;
            v16 = v14;
            v14 = (char *)s + 4 * (unsigned int)a4;
          }
          if ( !v16 )
            v16 = v14;
          ++v157;
          v17 = v159 + 1;
          if ( 4 * ((int)v159 + 1) < (unsigned int)(3 * v160) )
          {
            a4 = (unsigned int)v160 >> 3;
            if ( (int)v160 - HIDWORD(v159) - v17 <= (unsigned int)a4 )
            {
              v145 = (_QWORD *)v11;
              v151 = v9;
              sub_136B240((__int64)&v157, v160);
              if ( !(_DWORD)v160 )
              {
LABEL_389:
                LODWORD(v159) = v159 + 1;
                BUG();
              }
              a4 = (unsigned int)(v160 - 1);
              v9 = v151;
              v33 = a4 & (37 * v12);
              v11 = (__int64)v145;
              v16 = (char *)s + 4 * v33;
              a2 = *(unsigned int *)v16;
              if ( v12 == (_DWORD)a2 )
              {
LABEL_77:
                v17 = v159 + 1;
              }
              else
              {
                v119 = 1;
                v120 = 0;
                while ( (_DWORD)a2 != -1 )
                {
                  if ( !v120 && (_DWORD)a2 == -2 )
                    v120 = v16;
                  a5 = (unsigned int)(v119 + 1);
                  v131 = (unsigned int)a4 & (v33 + v119);
                  v16 = (char *)s + 4 * v131;
                  v33 = v131;
                  a2 = *(unsigned int *)v16;
                  if ( v12 == (_DWORD)a2 )
                    goto LABEL_77;
                  v119 = a5;
                }
                v17 = v159 + 1;
                if ( v120 )
                  v16 = v120;
              }
            }
            goto LABEL_19;
          }
LABEL_68:
          a2 = (unsigned int)(2 * v160);
          v144 = (_QWORD *)v11;
          v150 = v9;
          sub_136B240((__int64)&v157, a2);
          if ( !(_DWORD)v160 )
            goto LABEL_389;
          a5 = (unsigned __int64)s;
          v9 = v150;
          v11 = (__int64)v144;
          v31 = (v160 - 1) & (37 * v12);
          v16 = (char *)s + 4 * v31;
          v32 = *(_DWORD *)v16;
          v17 = v159 + 1;
          if ( v12 != *(_DWORD *)v16 )
          {
            a2 = 1;
            a4 = 0;
            while ( v32 != -1 )
            {
              if ( v32 == -2 && !a4 )
                a4 = (__int64)v16;
              v31 = (v160 - 1) & (a2 + v31);
              v154 = a2 + 1;
              a2 = v31;
              v16 = (char *)s + 4 * v31;
              v32 = *(_DWORD *)v16;
              if ( v12 == *(_DWORD *)v16 )
                goto LABEL_19;
              a2 = v154;
            }
            if ( a4 )
              v16 = (char *)a4;
          }
LABEL_19:
          LODWORD(v159) = v17;
          if ( *(_DWORD *)v16 != -1 )
            --HIDWORD(v159);
          *(_DWORD *)v16 = v12;
        }
      }
LABEL_9:
      v7 += 16;
      if ( v8 == v7 )
      {
        v7 = *(_QWORD *)v11;
        v10 = v11 + 8;
        v8 = *(_QWORD *)v11 + 512LL;
        goto LABEL_3;
      }
    }
    v18 = v159;
    v6 = v155;
    if ( (_DWORD)v159 )
    {
      v19 = (char *)s;
      v29 = (char *)s + 4 * (unsigned int)v160;
      v30 = (char *)s;
      if ( s != v29 )
      {
        while ( *(_DWORD *)v30 > 0xFFFFFFFD )
        {
          v30 += 4;
          if ( v29 == v30 )
            goto LABEL_24;
        }
        if ( v29 == v30 )
        {
          ++v157;
          goto LABEL_26;
        }
        do
        {
          a2 = *(unsigned int *)v30;
          v30 += 4;
          sub_15201C0(a1, a2, (__int64)v155);
          if ( v30 == v29 )
            break;
          while ( *(_DWORD *)v30 > 0xFFFFFFFD )
          {
            v30 += 4;
            if ( v29 == v30 )
              goto LABEL_64;
          }
        }
        while ( v29 != v30 );
LABEL_64:
        v18 = v159;
      }
LABEL_24:
      ++v157;
      if ( !v18 )
      {
        if ( !HIDWORD(v159) )
          goto LABEL_32;
        v20 = v160;
        v19 = (char *)s;
        if ( (unsigned int)v160 > 0x40 )
        {
          j___libc_free_0(s);
          s = 0;
          v159 = 0;
          LODWORD(v160) = 0;
          goto LABEL_32;
        }
        goto LABEL_29;
      }
      v19 = (char *)s;
LABEL_26:
      a4 = (unsigned int)(4 * v18);
      a2 = 64;
      v20 = v160;
      if ( (unsigned int)a4 < 0x40 )
        a4 = 64;
      if ( (unsigned int)a4 >= (unsigned int)v160 )
      {
LABEL_29:
        if ( 4LL * v20 )
        {
          a2 = 255;
          memset(v19, 255, 4LL * v20);
        }
        v159 = 0;
        goto LABEL_32;
      }
      a5 = (unsigned __int64)v19;
      v34 = v18 - 1;
      if ( v34 )
      {
        _BitScanReverse(&v34, v34);
        a4 = 33 - (v34 ^ 0x1F);
        v35 = 1 << (33 - (v34 ^ 0x1F));
        if ( v35 < 64 )
          v35 = 64;
        if ( (_DWORD)v160 == v35 )
        {
          v159 = 0;
          v79 = &v19[4 * (unsigned int)v160];
          do
          {
            if ( a5 )
              *(_DWORD *)a5 = -1;
            a5 += 4LL;
          }
          while ( v79 != (char *)a5 );
LABEL_32:
          if ( *(_DWORD *)(a1 + 32) >> 1 )
          {
            if ( (*(_BYTE *)(a1 + 32) & 1) != 0 )
            {
LABEL_34:
              v21 = (unsigned int *)(a1 + 40);
              v22 = 1;
              goto LABEL_35;
            }
            while ( 1 )
            {
              v21 = *(unsigned int **)(a1 + 40);
              v22 = *(unsigned int *)(a1 + 48);
LABEL_35:
              v23 = &v21[v22];
              a2 = *v21;
              if ( v23 != v21 )
              {
                while ( 1 )
                {
                  a2 = *v21;
                  v24 = v21;
                  if ( (unsigned int)a2 <= 0xFFFFFFFD )
                    break;
                  if ( v23 == ++v21 )
                  {
                    a2 = v24[1];
                    break;
                  }
                }
              }
              sub_15201C0(a1, a2, (__int64)v155);
              if ( !(*(_DWORD *)(a1 + 32) >> 1) )
                break;
              if ( (*(_BYTE *)(a1 + 32) & 1) != 0 )
                goto LABEL_34;
            }
          }
          continue;
        }
        v36 = (((4 * v35 / 3u + 1)
              | ((unsigned __int64)(4 * v35 / 3u + 1) >> 1)
              | (((4 * v35 / 3u + 1) | ((unsigned __int64)(4 * v35 / 3u + 1) >> 1)) >> 2)) >> 4)
            | (4 * v35 / 3u + 1)
            | ((unsigned __int64)(4 * v35 / 3u + 1) >> 1)
            | (((4 * v35 / 3u + 1) | ((unsigned __int64)(4 * v35 / 3u + 1) >> 1)) >> 2)
            | (((((4 * v35 / 3u + 1)
                | ((unsigned __int64)(4 * v35 / 3u + 1) >> 1)
                | (((4 * v35 / 3u + 1) | ((unsigned __int64)(4 * v35 / 3u + 1) >> 1)) >> 2)) >> 4)
              | (4 * v35 / 3u + 1)
              | ((unsigned __int64)(4 * v35 / 3u + 1) >> 1)
              | (((4 * v35 / 3u + 1) | ((unsigned __int64)(4 * v35 / 3u + 1) >> 1)) >> 2)) >> 8);
        v37 = (v36 | (v36 >> 16)) + 1;
        v38 = 4 * ((v36 | (v36 >> 16)) + 1);
      }
      else
      {
        v38 = 512;
        v37 = 128;
      }
      j___libc_free_0(v19);
      LODWORD(v160) = v37;
      v39 = (_DWORD *)sub_22077B0(v38);
      v159 = 0;
      s = v39;
      for ( i = &v39[(unsigned int)v160]; i != v39; ++v39 )
      {
        if ( v39 )
          *v39 = -1;
      }
      goto LABEL_32;
    }
    break;
  }
  if ( *(_DWORD *)(a1 + 32) >> 1 )
    goto LABEL_24;
  v41 = *(_BYTE *)(a1 + 160) & 1;
  m = (_QWORD *)(*(_DWORD *)(a1 + 160) >> 1);
  if ( (_DWORD)m )
  {
    if ( v41 )
    {
      v43 = (unsigned __int64 *)(a1 + 168);
      j = (unsigned __int64 *)(a1 + 184);
      goto LABEL_91;
    }
    v43 = *(unsigned __int64 **)(a1 + 168);
    for ( j = &v43[2 * *(unsigned int *)(a1 + 176)]; v43 != j; v43 += 2 )
    {
LABEL_91:
      if ( *v43 != -16 && *v43 != -8 )
        break;
    }
  }
  else
  {
    if ( v41 )
    {
      v108 = a1 + 168;
      v109 = 16;
    }
    else
    {
      v108 = *(_QWORD *)(a1 + 168);
      v109 = 16LL * *(unsigned int *)(a1 + 176);
    }
    v43 = (unsigned __int64 *)(v109 + v108);
    j = v43;
  }
  if ( j == v43 )
    goto LABEL_103;
  while ( 2 )
  {
    a2 = *(_BYTE *)(a1 + 128) & 1;
    if ( (*(_BYTE *)(a1 + 128) & 1) != 0 )
    {
      v45 = a1 + 136;
      v46 = 0;
      goto LABEL_97;
    }
    v80 = *(_DWORD *)(a1 + 144);
    v45 = *(_QWORD *)(a1 + 136);
    if ( !v80 )
    {
      v81 = *(_DWORD *)(a1 + 128);
      ++*(_QWORD *)(a1 + 120);
      v47 = 0;
      v82 = (v81 >> 1) + 1;
      goto LABEL_189;
    }
    v46 = v80 - 1;
LABEL_97:
    a4 = v46 & (((unsigned int)*v43 >> 9) ^ ((unsigned int)*v43 >> 4));
    v47 = (unsigned __int64 *)(v45 + 16 * a4);
    a5 = *v47;
    if ( *v43 == *v47 )
      goto LABEL_98;
    v101 = 1;
    v11 = 0;
    while ( 2 )
    {
      if ( a5 == -8 )
      {
        v81 = *(_DWORD *)(a1 + 128);
        if ( v11 )
          v47 = (unsigned __int64 *)v11;
        ++*(_QWORD *)(a1 + 120);
        v82 = (v81 >> 1) + 1;
        if ( (_BYTE)a2 )
        {
          a5 = (unsigned int)(4 * v82);
          v80 = 1;
          if ( (unsigned int)a5 >= 3 )
          {
LABEL_236:
            sub_1519820(a1 + 120, 2 * v80);
            if ( (*(_BYTE *)(a1 + 128) & 1) != 0 )
            {
              v11 = a1 + 136;
              v102 = 0;
              goto LABEL_238;
            }
            v107 = *(_DWORD *)(a1 + 144);
            v11 = *(_QWORD *)(a1 + 136);
            if ( v107 )
            {
              v102 = v107 - 1;
LABEL_238:
              a5 = *v43;
              v103 = v102 & (((unsigned int)*v43 >> 9) ^ ((unsigned int)*v43 >> 4));
              v47 = (unsigned __int64 *)(v11 + 16LL * v103);
              v104 = *v47;
              if ( *v47 == *v43 )
              {
LABEL_239:
                v81 = *(_DWORD *)(a1 + 128);
                goto LABEL_191;
              }
              v140 = 1;
              v114 = 0;
              while ( v104 != -8 )
              {
                if ( !v114 && v104 == -16 )
                  v114 = v47;
                v103 = v102 & (v140 + v103);
                v47 = (unsigned __int64 *)(v11 + 16LL * v103);
                v104 = *v47;
                if ( a5 == *v47 )
                  goto LABEL_239;
                ++v140;
              }
LABEL_266:
              if ( v114 )
                v47 = v114;
              goto LABEL_239;
            }
LABEL_387:
            *(_DWORD *)(a1 + 128) = (2 * (*(_DWORD *)(a1 + 128) >> 1) + 2) | *(_DWORD *)(a1 + 128) & 1;
            BUG();
          }
LABEL_190:
          if ( v80 - *(_DWORD *)(a1 + 132) - v82 > v80 >> 3 )
          {
LABEL_191:
            v83 = v81;
            a4 = v81 & 1;
            a2 = 2 * (v83 >> 1) + 2;
            *(_DWORD *)(a1 + 128) = a2 | a4;
            if ( *v47 != -8 )
              --*(_DWORD *)(a1 + 132);
            *v47 = *v43;
            v47[1] = v43[1];
            goto LABEL_98;
          }
          sub_1519820(a1 + 120, v80);
          if ( (*(_BYTE *)(a1 + 128) & 1) != 0 )
          {
            v11 = a1 + 136;
            v110 = 0;
          }
          else
          {
            v115 = *(_DWORD *)(a1 + 144);
            v11 = *(_QWORD *)(a1 + 136);
            if ( !v115 )
              goto LABEL_387;
            v110 = v115 - 1;
          }
          a5 = *v43;
          v111 = v110 & (((unsigned int)*v43 >> 9) ^ ((unsigned int)*v43 >> 4));
          v47 = (unsigned __int64 *)(v11 + 16LL * v111);
          v112 = *v47;
          if ( *v47 == *v43 )
            goto LABEL_239;
          v113 = 1;
          v114 = 0;
          while ( v112 != -8 )
          {
            if ( v112 == -16 && !v114 )
              v114 = v47;
            v111 = v110 & (v113 + v111);
            v47 = (unsigned __int64 *)(v11 + 16LL * v111);
            v112 = *v47;
            if ( a5 == *v47 )
              goto LABEL_239;
            ++v113;
          }
          goto LABEL_266;
        }
        v80 = *(_DWORD *)(a1 + 144);
LABEL_189:
        a5 = (unsigned int)(4 * v82);
        if ( (unsigned int)a5 >= 3 * v80 )
          goto LABEL_236;
        goto LABEL_190;
      }
      if ( !v11 && a5 == -16 )
        v11 = (__int64)v47;
      a4 = v46 & (v101 + (_DWORD)a4);
      v47 = (unsigned __int64 *)(v45 + 16LL * (unsigned int)a4);
      a5 = *v47;
      if ( *v43 != *v47 )
      {
        ++v101;
        continue;
      }
      break;
    }
    do
    {
LABEL_98:
      v43 += 2;
      if ( v43 == j )
        goto LABEL_102;
    }
    while ( *v43 == -16 || *v43 == -8 );
    if ( v43 != j )
      continue;
    break;
  }
LABEL_102:
  m = (_QWORD *)(*(_DWORD *)(a1 + 160) >> 1);
LABEL_103:
  ++*(_QWORD *)(a1 + 152);
  if ( (_DWORD)m )
  {
    if ( (*(_BYTE *)(a1 + 160) & 1) == 0 )
    {
      a4 = (unsigned int)(4 * (_DWORD)m);
      goto LABEL_107;
    }
LABEL_253:
    m = (_QWORD *)(a1 + 168);
    v49 = 2;
LABEL_110:
    for ( k = &m[v49]; k != m; m += 2 )
      *m = -8;
    *(_QWORD *)(a1 + 160) &= 1uLL;
    goto LABEL_113;
  }
  a2 = *(unsigned int *)(a1 + 164);
  if ( !(_DWORD)a2 )
    goto LABEL_113;
  if ( (*(_BYTE *)(a1 + 160) & 1) != 0 )
    goto LABEL_253;
  a4 = 0;
LABEL_107:
  v48 = *(unsigned int *)(a1 + 176);
  if ( (unsigned int)v48 <= (unsigned int)a4 || (unsigned int)v48 <= 0x40 )
  {
    m = *(_QWORD **)(a1 + 168);
    v49 = 2 * v48;
    goto LABEL_110;
  }
  if ( (_DWORD)m )
  {
    v124 = (_DWORD)m - 1;
    if ( v124
      && (_BitScanReverse(&v124, v124), a4 = 33 - (v124 ^ 0x1F), v125 = 1 << (33 - (v124 ^ 0x1F)), v125 - 2 > 0x3D) )
    {
      if ( (_DWORD)v48 == v125 )
      {
        v121 = (*(_QWORD *)(a1 + 160) & 1LL) == 0;
        *(_QWORD *)(a1 + 160) &= 1uLL;
        if ( v121 )
        {
          m = *(_QWORD **)(a1 + 168);
          v129 = 2 * v48;
        }
        else
        {
          m = (_QWORD *)(a1 + 168);
          v129 = 2;
        }
        v130 = &m[v129];
        do
        {
          if ( m )
            *m = -8;
          m += 2;
        }
        while ( v130 != m );
        goto LABEL_113;
      }
      j___libc_free_0(*(_QWORD *)(a1 + 168));
      v126 = *(_BYTE *)(a1 + 160) | 1;
      *(_BYTE *)(a1 + 160) = v126;
      if ( v125 <= 1 )
        goto LABEL_291;
      v127 = 16LL * v125;
    }
    else
    {
      v125 = 64;
      j___libc_free_0(*(_QWORD *)(a1 + 168));
      v126 = *(_BYTE *)(a1 + 160);
      v127 = 1024;
    }
    *(_BYTE *)(a1 + 160) = v126 & 0xFE;
    v128 = sub_22077B0(v127);
    *(_DWORD *)(a1 + 176) = v125;
    *(_QWORD *)(a1 + 168) = v128;
    goto LABEL_291;
  }
  j___libc_free_0(*(_QWORD *)(a1 + 168));
  *(_BYTE *)(a1 + 160) |= 1u;
LABEL_291:
  v121 = (*(_QWORD *)(a1 + 160) & 1LL) == 0;
  *(_QWORD *)(a1 + 160) &= 1uLL;
  if ( v121 )
  {
    v122 = *(_QWORD **)(a1 + 168);
    v123 = 2LL * *(unsigned int *)(a1 + 176);
  }
  else
  {
    v122 = (_QWORD *)(a1 + 168);
    v123 = 2;
  }
  for ( m = &v122[v123]; m != v122; v122 += 2 )
  {
    if ( v122 )
      *v122 = -8;
  }
LABEL_113:
  v51 = *(__int64 **)(a1 + 184);
  v52 = &v51[2 * *(unsigned int *)(a1 + 192)];
  if ( v51 != v52 )
  {
    do
    {
      while ( 1 )
      {
        a2 = *v51;
        v53 = v51[1];
        if ( *v51 && *(_BYTE *)a2 == 4 && *(_BYTE *)(a2 + 1) != 1 )
          a2 = sub_151A3A0(a1, a2);
        v54 = *(_QWORD *)(v53 + 16);
        if ( (v54 & 4) != 0 )
          break;
        v51 += 2;
        if ( v52 == v51 )
          goto LABEL_122;
      }
      v51 += 2;
      sub_16302D0(v54 & 0xFFFFFFFFFFFFFFF8LL, a2);
    }
    while ( v52 != v51 );
LABEL_122:
    v55 = *(__int64 **)(a1 + 184);
    v56 = &v55[2 * *(unsigned int *)(a1 + 192)];
    while ( v55 != v56 )
    {
      while ( 1 )
      {
        v57 = *(v56 - 1);
        v56 -= 2;
        if ( v57 )
          sub_16307F0(v57, a2, m, a4, a5);
        a2 = *v56;
        if ( !*v56 )
          break;
        sub_161E7C0(v56);
        if ( v55 == v56 )
          goto LABEL_128;
      }
    }
  }
LABEL_128:
  v58 = *(_BYTE *)(a1 + 96);
  v59 = *(_DWORD *)(a1 + 96);
  *(_DWORD *)(a1 + 192) = 0;
  v60 = v58 & 1;
  v61 = v59 >> 1;
  if ( v61 )
  {
    if ( v60 )
    {
      v62 = (__int64 *)(a1 + 104);
      v63 = a1 + 120;
LABEL_131:
      while ( 1 )
      {
        a4 = *v62;
        if ( *v62 != -16 && a4 != -8 )
          break;
        v62 += 2;
        if ( v62 == (__int64 *)v63 )
        {
          v64 = v62;
          goto LABEL_135;
        }
      }
      v64 = (__int64 *)v63;
    }
    else
    {
      v64 = *(__int64 **)(a1 + 104);
      v62 = v64;
      v63 = (__int64)&v64[2 * *(unsigned int *)(a1 + 112)];
      if ( v64 != (__int64 *)v63 )
        goto LABEL_131;
    }
  }
  else
  {
    if ( v60 )
    {
      v118 = a1 + 104;
      v63 = 16;
    }
    else
    {
      v118 = *(_QWORD *)(a1 + 104);
      v63 = 16LL * *(unsigned int *)(a1 + 112);
    }
    v62 = (__int64 *)(v63 + v118);
    v64 = v62;
  }
LABEL_135:
  v65 = (unsigned __int64 *)(a1 + 136);
  if ( v62 != v64 )
  {
LABEL_136:
    a2 = *v62;
    if ( (*(_BYTE *)(a1 + 128) & 1) != 0 )
    {
      v66 = a1 + 136;
      v67 = 0;
      a4 = 0;
      v68 = a1 + 136;
      a5 = *v65;
      if ( a2 == *v65 )
      {
LABEL_138:
        v63 = v62[1];
        a5 = *(_QWORD *)(v66 + 8);
        a4 = *(_QWORD *)(v63 + 16);
        if ( a5 )
        {
          if ( ((a4 >> 2) & 1) != 0 )
          {
            a2 = *(_QWORD *)(v66 + 8);
            sub_16302D0(a4 & 0xFFFFFFFFFFFFFFF8LL, a5);
          }
          goto LABEL_141;
        }
        goto LABEL_199;
      }
LABEL_196:
      v84 = 1;
      while ( a5 != -8 )
      {
        v11 = (unsigned int)(v84 + 1);
        v67 = a4 & (v84 + v67);
        v66 = v68 + 16LL * v67;
        a5 = *(_QWORD *)v66;
        if ( a2 == *(_QWORD *)v66 )
          goto LABEL_138;
        v84 = v11;
      }
    }
    else
    {
      a4 = *(unsigned int *)(a1 + 144);
      v68 = *(_QWORD *)(a1 + 136);
      if ( (_DWORD)a4 )
      {
        a4 = (unsigned int)(a4 - 1);
        v67 = a4 & (((unsigned int)a2 >> 4) ^ ((unsigned int)a2 >> 9));
        v66 = v68 + 16LL * v67;
        a5 = *(_QWORD *)v66;
        if ( a2 == *(_QWORD *)v66 )
          goto LABEL_138;
        goto LABEL_196;
      }
    }
    v63 = v62[1];
LABEL_199:
    v85 = *(_QWORD *)(v63 + 16);
    if ( (v85 & 4) != 0 )
      sub_16302D0(v85 & 0xFFFFFFFFFFFFFFF8LL, a2);
LABEL_141:
    while ( 1 )
    {
      v62 += 2;
      if ( v62 == v64 )
        break;
      if ( *v62 != -16 && *v62 != -8 )
      {
        if ( v64 != v62 )
          goto LABEL_136;
        break;
      }
    }
    v61 = *(_DWORD *)(a1 + 96) >> 1;
  }
  ++*(_QWORD *)(a1 + 88);
  if ( v61 )
  {
    if ( (*(_BYTE *)(a1 + 96) & 1) == 0 )
    {
      v61 *= 4;
      goto LABEL_149;
    }
LABEL_240:
    v69 = (_QWORD *)(a1 + 104);
    v70 = 2;
LABEL_152:
    for ( n = &v69[v70]; n != v69; v69 += 2 )
    {
      if ( *v69 != -8 )
      {
        if ( *v69 != -16 )
        {
          v72 = v69[1];
          if ( v72 )
            sub_16307F0(v72, a2, v63, a4, a5);
        }
        *v69 = -8;
      }
    }
    *(_QWORD *)(a1 + 96) &= 1uLL;
    goto LABEL_160;
  }
  a4 = *(unsigned int *)(a1 + 100);
  if ( !(_DWORD)a4 )
    goto LABEL_160;
  if ( (*(_BYTE *)(a1 + 96) & 1) != 0 )
    goto LABEL_240;
LABEL_149:
  v63 = *(unsigned int *)(a1 + 112);
  if ( (unsigned int)v63 <= v61 || (unsigned int)v63 <= 0x40 )
  {
    v69 = *(_QWORD **)(a1 + 104);
    v70 = 2LL * (unsigned int)v63;
    goto LABEL_152;
  }
  sub_1517390(a1 + 88);
LABEL_160:
  v73 = *(_DWORD *)(a1 + 64) >> 1;
  if ( !v73 )
    goto LABEL_214;
  v74 = *(_BYTE *)(a1 + 64);
  if ( (v74 & 1) != 0 )
  {
    v75 = (_DWORD *)(a1 + 72);
    v76 = 1;
  }
  else
  {
    v75 = *(_DWORD **)(a1 + 72);
    v76 = *(unsigned int *)(a1 + 80);
  }
  v77 = &v75[v76];
  if ( v77 == v75 )
    goto LABEL_166;
  while ( *v75 > 0xFFFFFFFD )
  {
    if ( v77 == ++v75 )
      goto LABEL_166;
  }
  if ( v77 == v75 )
  {
LABEL_166:
    ++*(_QWORD *)(a1 + 56);
LABEL_272:
    if ( (v74 & 1) == 0 )
    {
      v116 = v73;
      v73 *= 4;
      goto LABEL_274;
    }
LABEL_211:
    v89 = (void *)(a1 + 72);
    v90 = 4;
LABEL_212:
    memset(v89, 255, v90);
LABEL_213:
    *(_QWORD *)(a1 + 64) &= 1uLL;
    goto LABEL_214;
  }
  do
  {
    v86 = (unsigned int)*v75;
    v87 = *(_BYTE **)(*(_QWORD *)a1 + 8 * v86);
    if ( v87 && (unsigned __int8)(*v87 - 4) <= 0x1Eu )
      sub_161F200(v87, a2, v86, a4, a5, v11);
    if ( ++v75 == v77 )
      break;
    while ( *v75 > 0xFFFFFFFD )
    {
      if ( v77 == ++v75 )
        goto LABEL_208;
    }
  }
  while ( v77 != v75 );
LABEL_208:
  v88 = *(_DWORD *)(a1 + 64);
  ++*(_QWORD *)(a1 + 56);
  v73 = v88 >> 1;
  if ( v73 )
  {
    v74 = *(_BYTE *)(a1 + 64);
    goto LABEL_272;
  }
  if ( !*(_DWORD *)(a1 + 68) )
    goto LABEL_214;
  if ( (*(_BYTE *)(a1 + 64) & 1) != 0 )
    goto LABEL_211;
  v116 = 0;
LABEL_274:
  v117 = *(unsigned int *)(a1 + 80);
  if ( (unsigned int)v117 <= v73 || (unsigned int)v117 <= 0x40 )
  {
    v90 = 4 * v117;
    v89 = *(void **)(a1 + 72);
    if ( !v90 )
      goto LABEL_213;
    goto LABEL_212;
  }
  if ( v116 )
  {
    if ( v116 == 1 || (_BitScanReverse(&v135, v116 - 1), v136 = 1 << (33 - (v135 ^ 0x1F)), v136 - 2 <= 0x3D) )
    {
      v136 = 64;
      j___libc_free_0(*(_QWORD *)(a1 + 72));
      v137 = *(_BYTE *)(a1 + 64);
      v138 = 256;
    }
    else
    {
      if ( (_DWORD)v117 == v136 )
      {
        v121 = (*(_QWORD *)(a1 + 64) & 1LL) == 0;
        *(_QWORD *)(a1 + 64) &= 1uLL;
        if ( v121 )
        {
          v141 = *(_DWORD **)(a1 + 72);
          v142 = v117;
        }
        else
        {
          v141 = (_DWORD *)(a1 + 72);
          v142 = 1;
        }
        v143 = &v141[v142];
        do
        {
          if ( v141 )
            *v141 = -1;
          ++v141;
        }
        while ( v143 != v141 );
        goto LABEL_214;
      }
      j___libc_free_0(*(_QWORD *)(a1 + 72));
      v137 = *(_BYTE *)(a1 + 64) | 1;
      *(_BYTE *)(a1 + 64) = v137;
      if ( v136 <= 1 )
        goto LABEL_338;
      v138 = 4LL * v136;
    }
    *(_BYTE *)(a1 + 64) = v137 & 0xFE;
    v139 = sub_22077B0(v138);
    *(_DWORD *)(a1 + 80) = v136;
    *(_QWORD *)(a1 + 72) = v139;
    goto LABEL_338;
  }
  j___libc_free_0(*(_QWORD *)(a1 + 72));
  *(_BYTE *)(a1 + 64) |= 1u;
LABEL_338:
  v121 = (*(_QWORD *)(a1 + 64) & 1LL) == 0;
  *(_QWORD *)(a1 + 64) &= 1uLL;
  if ( v121 )
  {
    v132 = *(_DWORD **)(a1 + 72);
    v133 = *(unsigned int *)(a1 + 80);
  }
  else
  {
    v132 = (_DWORD *)(a1 + 72);
    v133 = 1;
  }
  for ( ii = &v132[v133]; ii != v132; ++v132 )
  {
    if ( v132 )
      *v132 = -1;
  }
LABEL_214:
  for ( jj = v155[2]; v155[6] != jj; v155[2] = jj )
  {
    while ( 1 )
    {
      v93 = *(unsigned int *)(jj + 4);
      v94 = 0;
      if ( (unsigned int)v93 < *(_DWORD *)(a1 + 8) )
        v94 = *(_QWORD *)(*(_QWORD *)a1 + 8 * v93);
      v95 = *(_QWORD **)(jj + 8);
      if ( v95 )
      {
        *v95 = v94;
        v96 = *(_QWORD **)(jj + 8);
        if ( *v96 )
          sub_1623A60(v96, *v96, 2);
        v156 = jj;
        sub_161E7C0(&v156);
      }
      v92 = v155[2];
      v97 = *(_QWORD **)(v92 + 8);
      if ( v92 != v155[4] - 16LL )
        break;
      if ( v97 )
        *v97 = 0;
      j_j___libc_free_0(v155[3], 512);
      v98 = (__int64 *)(v155[5] + 8LL);
      v155[5] = v98;
      jj = *v98;
      v99 = *v98 + 512;
      v155[3] = *v98;
      v155[4] = v99;
      v155[2] = jj;
      if ( v155[6] == jj )
        return j___libc_free_0(s);
    }
    if ( v97 )
    {
      *v97 = 0;
      v92 = v155[2];
    }
    jj = v92 + 16;
  }
  return j___libc_free_0(s);
}
