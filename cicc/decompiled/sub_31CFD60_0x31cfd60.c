// Function: sub_31CFD60
// Address: 0x31cfd60
//
__int64 __fastcall sub_31CFD60(__int64 a1, _QWORD **a2, __int64 a3, __int64 *a4)
{
  __int64 v4; // r15
  __int64 v8; // rdx
  __int64 v9; // rsi
  unsigned int v10; // ecx
  __int64 v11; // rax
  __int64 v12; // r8
  __int64 v13; // r14
  int v15; // eax
  unsigned __int8 v16; // al
  unsigned int v17; // esi
  __int64 v18; // rdi
  int v19; // edx
  __int64 v20; // rax
  _QWORD *v21; // r12
  int v22; // ecx
  __int64 v23; // rdx
  unsigned __int64 *v24; // r13
  __int64 v25; // rdx
  __int64 *v26; // rbx
  __int64 v27; // rax
  __int64 v28; // rbx
  __int64 v29; // rdx
  __int64 v30; // r12
  __int64 v31; // rax
  __int64 v32; // r8
  __int64 v33; // r9
  __int64 v34; // rdx
  __int64 v35; // r8
  unsigned int v36; // ecx
  _QWORD *v37; // rbx
  __int64 v38; // rdx
  __int64 v39; // rdx
  __int64 v40; // rsi
  unsigned int v41; // ecx
  __int64 v42; // rax
  __int64 v43; // r8
  unsigned __int64 v44; // r13
  __int64 *v45; // rax
  __int64 **v46; // rax
  __int64 *v47; // r12
  __int64 v48; // rax
  __int64 v49; // r13
  __int64 v50; // rax
  __int64 v51; // rdi
  _BYTE *v52; // r14
  __int64 (__fastcall *v53)(__int64, _BYTE *, _BYTE *, __int64, __int64); // rax
  _QWORD *v54; // rax
  __int64 v55; // r15
  __int64 v56; // r14
  __int64 v57; // r13
  __int64 v58; // rdx
  unsigned int v59; // esi
  __int64 *v60; // rdi
  int v61; // ecx
  __int64 v62; // rdi
  _QWORD *v63; // r8
  int v64; // r9d
  unsigned int v65; // edx
  __int64 v66; // rsi
  int v67; // r9d
  unsigned int v68; // eax
  __int64 v69; // r14
  __int64 v70; // r13
  __int64 v71; // rbx
  __int64 v72; // rax
  __int64 v73; // r8
  __int64 v74; // r9
  __int64 v75; // rdx
  unsigned int v76; // r13d
  __int64 **v77; // rcx
  unsigned __int8 *v78; // rdi
  _BYTE *v79; // r13
  __int64 v80; // rdi
  __int64 v81; // r10
  __int64 (__fastcall *v82)(__int64, _BYTE *, _BYTE *, __int64, __int64, __int64); // rax
  __int64 v83; // rax
  __int64 v84; // rdi
  unsigned __int8 *v85; // r11
  _BYTE *v86; // r13
  _BYTE *v87; // r10
  __int64 (__fastcall *v88)(__int64, _BYTE *, _BYTE *, unsigned __int8 *); // rax
  __int64 v89; // rax
  __int64 v90; // rax
  _QWORD *v91; // rax
  __int64 v92; // r9
  __int64 v93; // rdx
  __int64 v94; // r12
  __int64 v95; // r13
  __int64 v96; // rdx
  unsigned int v97; // esi
  __int64 v98; // rdi
  _BYTE *v99; // r13
  _BYTE *v100; // r10
  __int64 (__fastcall *v101)(__int64, _BYTE *, _BYTE *); // rax
  __int64 v102; // rax
  _QWORD *v103; // rax
  __int64 v104; // rdx
  __int64 v105; // r12
  __int64 v106; // r13
  __int64 v107; // rdx
  unsigned int v108; // esi
  unsigned __int8 v109; // al
  _BYTE **v110; // r14
  __int64 v111; // r13
  __int64 v112; // rax
  int v113; // r13d
  int v114; // ebx
  int v115; // edx
  int v116; // edx
  __int64 v117; // rdi
  int v118; // r9d
  unsigned int v119; // ecx
  __int64 v120; // rsi
  __int64 v121; // rbx
  __int64 v122; // rax
  unsigned __int8 *v123; // r10
  __int64 v124; // rax
  __int64 v125; // rax
  __int64 v126; // rdi
  _BYTE *v127; // r13
  __int64 (__fastcall *v128)(__int64, _BYTE *, _BYTE *, unsigned __int8 *); // rax
  __int64 v129; // rdi
  _QWORD *v130; // rax
  __int64 v131; // r9
  __int64 v132; // r15
  __int64 v133; // r13
  __int64 v134; // r14
  __int64 v135; // rdx
  unsigned int v136; // esi
  int v137; // eax
  int v138; // r9d
  __int64 v139; // rdi
  unsigned __int8 *v140; // r10
  _BYTE *v141; // r11
  __int64 (__fastcall *v142)(__int64, unsigned int, _BYTE *, unsigned __int8 *); // rax
  char v143; // al
  __int64 v144; // r11
  unsigned __int8 *v145; // rdx
  unsigned __int8 *v146; // rsi
  __int64 v147; // rax
  __int64 v148; // rdx
  int v149; // r13d
  __int64 v150; // r13
  __int64 v151; // r12
  __int64 v152; // rdx
  unsigned int v153; // esi
  _QWORD *v154; // rax
  __int64 v155; // rdx
  __int64 v156; // r12
  __int64 v157; // r13
  __int64 v158; // rdx
  unsigned int v159; // esi
  __int64 v160; // rax
  __int64 v161; // rax
  __int64 v162; // rax
  __int64 v163; // rax
  __int64 v164; // [rsp+0h] [rbp-160h]
  __int64 v165; // [rsp+8h] [rbp-158h]
  __int64 v167; // [rsp+10h] [rbp-150h]
  unsigned int v168; // [rsp+20h] [rbp-140h]
  __int64 v169; // [rsp+28h] [rbp-138h]
  _QWORD **v170; // [rsp+28h] [rbp-138h]
  __int64 v171; // [rsp+28h] [rbp-138h]
  __int64 v172; // [rsp+28h] [rbp-138h]
  __int64 v173; // [rsp+28h] [rbp-138h]
  __int64 v174; // [rsp+28h] [rbp-138h]
  __int64 v175; // [rsp+28h] [rbp-138h]
  __int64 *v176; // [rsp+30h] [rbp-130h]
  __int64 v177; // [rsp+30h] [rbp-130h]
  __int64 *v178; // [rsp+30h] [rbp-130h]
  __int64 v179; // [rsp+30h] [rbp-130h]
  __int64 v180; // [rsp+30h] [rbp-130h]
  unsigned __int8 *v181; // [rsp+30h] [rbp-130h]
  unsigned __int8 *v182; // [rsp+30h] [rbp-130h]
  __int64 v183; // [rsp+30h] [rbp-130h]
  unsigned __int8 *v184; // [rsp+30h] [rbp-130h]
  unsigned __int8 *v185; // [rsp+30h] [rbp-130h]
  unsigned __int8 *v186; // [rsp+30h] [rbp-130h]
  char v187; // [rsp+40h] [rbp-120h]
  char v189; // [rsp+40h] [rbp-120h]
  _BYTE *v190; // [rsp+40h] [rbp-120h]
  unsigned __int8 *v191; // [rsp+40h] [rbp-120h]
  __int64 v192; // [rsp+40h] [rbp-120h]
  __int64 v193; // [rsp+40h] [rbp-120h]
  unsigned int v194; // [rsp+40h] [rbp-120h]
  _QWORD **v195; // [rsp+40h] [rbp-120h]
  unsigned __int8 *v196; // [rsp+40h] [rbp-120h]
  _BYTE *v197; // [rsp+40h] [rbp-120h]
  __int64 v198; // [rsp+40h] [rbp-120h]
  __int64 v199; // [rsp+40h] [rbp-120h]
  __int64 v200; // [rsp+40h] [rbp-120h]
  _DWORD v201[8]; // [rsp+50h] [rbp-110h] BYREF
  __int16 v202; // [rsp+70h] [rbp-F0h]
  int v203[8]; // [rsp+80h] [rbp-E0h] BYREF
  __int16 v204; // [rsp+A0h] [rbp-C0h]
  __int64 *v205; // [rsp+B0h] [rbp-B0h] BYREF
  __int64 v206; // [rsp+B8h] [rbp-A8h]
  _BYTE v207[16]; // [rsp+C0h] [rbp-A0h] BYREF
  __int16 v208; // [rsp+D0h] [rbp-90h]
  __int64 *v209; // [rsp+E0h] [rbp-80h] BYREF
  __int64 v210; // [rsp+E8h] [rbp-78h] BYREF
  __int64 v211; // [rsp+F0h] [rbp-70h] BYREF
  __int64 v212; // [rsp+F8h] [rbp-68h]
  __int64 v213; // [rsp+100h] [rbp-60h]

  v4 = a1;
  v8 = *(unsigned int *)(a1 + 104);
  if ( (_DWORD)v8 )
  {
    v9 = *(_QWORD *)(a1 + 88);
    v10 = (v8 - 1) & (((unsigned int)a3 >> 9) ^ ((unsigned int)a3 >> 4));
    v11 = v9 + 48LL * v10;
    v12 = *(_QWORD *)(v11 + 24);
    if ( v12 == a3 )
    {
LABEL_3:
      if ( v11 != v9 + 48 * v8 )
        return *(_QWORD *)(v11 + 40);
    }
    else
    {
      v15 = 1;
      while ( v12 != -4096 )
      {
        v67 = v15 + 1;
        v10 = (v8 - 1) & (v15 + v10);
        v11 = v9 + 48LL * v10;
        v12 = *(_QWORD *)(v11 + 24);
        if ( v12 == a3 )
          goto LABEL_3;
        v15 = v67;
      }
    }
  }
  v16 = *(_BYTE *)a3;
  if ( *(_BYTE *)a3 == 3 )
  {
    v39 = *(unsigned int *)(a1 + 24);
    if ( (_DWORD)v39 )
    {
      v40 = *(_QWORD *)(a1 + 8);
      v41 = (v39 - 1) & (((unsigned int)a3 >> 9) ^ ((unsigned int)a3 >> 4));
      v42 = v40 + 48LL * v41;
      v43 = *(_QWORD *)(v42 + 24);
      if ( v43 == a3 )
      {
LABEL_45:
        if ( v42 != 48 * v39 + v40 )
        {
          v44 = *(_QWORD *)(v42 + 40);
          LOWORD(v213) = 257;
          v45 = (__int64 *)sub_BD5C60(v44);
          v46 = (__int64 **)sub_BCE3C0(v45, 0);
          v13 = sub_31CF470(a4, 0x32u, v44, v46, (__int64)&v209, 0, (int)v205, 0);
          goto LABEL_11;
        }
      }
      else
      {
        v137 = 1;
        while ( v43 != -4096 )
        {
          v138 = v137 + 1;
          v41 = (v39 - 1) & (v137 + v41);
          v42 = v40 + 48LL * v41;
          v43 = *(_QWORD *)(v42 + 24);
          if ( v43 == a3 )
            goto LABEL_45;
          v137 = v138;
        }
      }
    }
    goto LABEL_65;
  }
  if ( (unsigned int)v16 - 9 <= 2 )
  {
    v209 = &v211;
    v210 = 0x400000000LL;
    v168 = *(_DWORD *)(a3 + 4) & 0x7FFFFFF;
    if ( v168 )
    {
      v187 = 0;
      v27 = a3;
      v169 = 32LL * (*(_DWORD *)(a3 + 4) & 0x7FFFFFF);
      v28 = 0;
      v176 = a4;
      v13 = v27;
      do
      {
        if ( (*(_BYTE *)(v13 + 7) & 0x40) != 0 )
          v29 = *(_QWORD *)(v13 - 8);
        else
          v29 = v13 - 32LL * (*(_DWORD *)(v13 + 4) & 0x7FFFFFF);
        v30 = *(_QWORD *)(v29 + v28);
        v31 = sub_31CFD60(a1, a2, v30, v176);
        v187 |= v30 != v31;
        v34 = (unsigned int)v210;
        if ( (unsigned __int64)(unsigned int)v210 + 1 > HIDWORD(v210) )
        {
          v165 = v31;
          sub_C8D5F0((__int64)&v209, &v211, (unsigned int)v210 + 1LL, 8u, v32, v33);
          v34 = (unsigned int)v210;
          v31 = v165;
        }
        v28 += 32;
        v209[v34] = v31;
        LODWORD(v210) = v210 + 1;
      }
      while ( v169 != v28 );
      v47 = v176;
      a3 = v13;
      if ( !v187 )
      {
LABEL_63:
        v60 = v209;
        if ( v209 != &v211 )
        {
LABEL_64:
          _libc_free((unsigned __int64)v60);
          goto LABEL_11;
        }
        goto LABEL_11;
      }
      v13 = sub_ACADE0(*(__int64 ***)(v13 + 8));
      if ( *(_BYTE *)a3 != 11 )
      {
        v48 = 0;
        v49 = v13;
        v201[0] = 0;
        while ( 1 )
        {
          v51 = v176[10];
          v204 = 257;
          v52 = (_BYTE *)v209[v48];
          v53 = *(__int64 (__fastcall **)(__int64, _BYTE *, _BYTE *, __int64, __int64))(*(_QWORD *)v51 + 88LL);
          if ( v53 == sub_9482E0 )
          {
            if ( *(_BYTE *)v49 > 0x15u || *v52 > 0x15u )
            {
LABEL_57:
              v208 = 257;
              v54 = sub_BD2C40(104, unk_3F148BC);
              v55 = (__int64)v54;
              if ( v54 )
              {
                sub_B44260((__int64)v54, *(_QWORD *)(v49 + 8), 65, 2u, 0, 0);
                *(_QWORD *)(v55 + 72) = v55 + 88;
                *(_QWORD *)(v55 + 80) = 0x400000000LL;
                sub_B4FD20(v55, v49, (__int64)v52, v201, 1, (__int64)&v205);
              }
              (*(void (__fastcall **)(__int64, __int64, int *, __int64, __int64))(*(_QWORD *)v176[11] + 16LL))(
                v176[11],
                v55,
                v203,
                v176[7],
                v176[8]);
              v56 = *v176;
              v57 = *v176 + 16LL * *((unsigned int *)v176 + 2);
              if ( *v176 != v57 )
              {
                do
                {
                  v58 = *(_QWORD *)(v56 + 8);
                  v59 = *(_DWORD *)v56;
                  v56 += 16;
                  sub_B99FD0(v55, v59, v58);
                }
                while ( v57 != v56 );
              }
              v49 = v55;
              goto LABEL_54;
            }
            v50 = sub_AAAE30(v49, (__int64)v52, v201, 1);
          }
          else
          {
            v50 = v53(v51, (_BYTE *)v49, v52, (__int64)v201, 1);
          }
          if ( !v50 )
            goto LABEL_57;
          v49 = v50;
LABEL_54:
          v48 = (unsigned int)(v201[0] + 1);
          v201[0] = v48;
          if ( v168 <= (unsigned int)v48 )
          {
            v4 = a1;
            v13 = v49;
            goto LABEL_63;
          }
        }
      }
      v164 = a3;
      v121 = 0;
      v195 = a2;
      while ( 1 )
      {
        v124 = sub_BCB2D0(*v195);
        v125 = sub_ACD640(v124, v121, 0);
        v126 = v47[10];
        v123 = (unsigned __int8 *)v125;
        v204 = 257;
        v127 = (_BYTE *)v209[v121];
        v128 = *(__int64 (__fastcall **)(__int64, _BYTE *, _BYTE *, unsigned __int8 *))(*(_QWORD *)v126 + 104LL);
        if ( v128 == sub_948040 )
        {
          v129 = 0;
          if ( *(_BYTE *)v13 <= 0x15u )
            v129 = v13;
          if ( *v127 > 0x15u || *v123 > 0x15u || !v129 )
          {
LABEL_146:
            v173 = (__int64)v123;
            v208 = 257;
            v130 = sub_BD2C40(72, 3u);
            v131 = 0;
            v132 = (__int64)v130;
            if ( v130 )
              sub_B4DFA0((__int64)v130, v13, (__int64)v127, v173, (__int64)&v205, 0, 0, 0);
            (*(void (__fastcall **)(__int64, __int64, int *, __int64, __int64, __int64))(*(_QWORD *)v47[11] + 16LL))(
              v47[11],
              v132,
              v203,
              v47[7],
              v47[8],
              v131);
            v133 = *v47;
            v134 = *v47 + 16LL * *((unsigned int *)v47 + 2);
            if ( *v47 != v134 )
            {
              do
              {
                v135 = *(_QWORD *)(v133 + 8);
                v136 = *(_DWORD *)v133;
                v133 += 16;
                sub_B99FD0(v132, v136, v135);
              }
              while ( v134 != v133 );
            }
            v13 = v132;
            goto LABEL_141;
          }
          v181 = v123;
          v122 = sub_AD5A90(v129, (_BYTE *)v209[v121], v123, 0);
          v123 = v181;
        }
        else
        {
          v182 = v123;
          v122 = v128(v126, (_BYTE *)v13, v127, v123);
          v123 = v182;
        }
        if ( !v122 )
          goto LABEL_146;
        v13 = v122;
LABEL_141:
        if ( v168 <= (unsigned int)++v121 )
        {
          v4 = a1;
          a3 = v164;
          goto LABEL_63;
        }
      }
    }
LABEL_65:
    v13 = a3;
    goto LABEL_11;
  }
  v13 = a3;
  if ( v16 == 5 )
  {
    v205 = (__int64 *)v207;
    v206 = 0x400000000LL;
    v68 = *(_DWORD *)(a3 + 4) & 0x7FFFFFF;
    if ( v68 )
    {
      v170 = a2;
      v69 = 0;
      v70 = a3;
      v177 = v68 - 1;
      v189 = 0;
      while ( 1 )
      {
        v71 = *(_QWORD *)(v70 + 32 * (v69 - v68));
        v72 = sub_31CFD60(a1, v170, v71, a4);
        v189 |= v71 != v72;
        v75 = (unsigned int)v206;
        if ( (unsigned __int64)(unsigned int)v206 + 1 > HIDWORD(v206) )
        {
          v167 = v72;
          sub_C8D5F0((__int64)&v205, v207, (unsigned int)v206 + 1LL, 8u, v73, v74);
          v75 = (unsigned int)v206;
          v72 = v167;
        }
        v205[v75] = v72;
        LODWORD(v206) = v206 + 1;
        if ( v177 == v69 )
          break;
        ++v69;
        v68 = *(_DWORD *)(v70 + 4) & 0x7FFFFFF;
      }
      a3 = v70;
      if ( !v189 )
      {
        v13 = v70;
        goto LABEL_86;
      }
      v76 = *(unsigned __int16 *)(v70 + 2);
      switch ( (__int16)v76 )
      {
        case '"':
          v109 = *(_BYTE *)(a3 + 1);
          LOWORD(v213) = 257;
          v110 = (_BYTE **)(v205 + 1);
          v111 = *v205;
          v194 = (v109 >> 1 << 31 >> 31) & 3;
          v112 = sub_BB5290(a3);
          v13 = sub_921130((unsigned int **)a4, v112, v111, v110, v177, (__int64)&v209, v194);
          goto LABEL_86;
        case '9':
          LOWORD(v213) = 257;
          v13 = sub_B36550((unsigned int **)a4, *v205, v205[1], v205[2], (__int64)&v209, 0);
          goto LABEL_86;
        case '=':
          v98 = a4[10];
          v204 = 257;
          v99 = (_BYTE *)v205[1];
          v100 = (_BYTE *)*v205;
          v101 = *(__int64 (__fastcall **)(__int64, _BYTE *, _BYTE *))(*(_QWORD *)v98 + 96LL);
          if ( v101 == sub_948070 )
          {
            if ( *v100 > 0x15u || *v99 > 0x15u )
            {
LABEL_113:
              v193 = (__int64)v100;
              LOWORD(v213) = 257;
              v103 = sub_BD2C40(72, 2u);
              v13 = (__int64)v103;
              if ( v103 )
                sub_B4DE80((__int64)v103, v193, (__int64)v99, (__int64)&v209, 0, 0);
              (*(void (__fastcall **)(__int64, __int64, int *, __int64, __int64))(*(_QWORD *)a4[11] + 16LL))(
                a4[11],
                v13,
                v203,
                a4[7],
                a4[8]);
              v104 = 16LL * *((unsigned int *)a4 + 2);
              v105 = *a4;
              v106 = v105 + v104;
              while ( v106 != v105 )
              {
                v107 = *(_QWORD *)(v105 + 8);
                v108 = *(_DWORD *)v105;
                v105 += 16;
                sub_B99FD0(v13, v108, v107);
              }
              goto LABEL_86;
            }
            v192 = *v205;
            v102 = sub_AD5840(*v205, (unsigned __int8 *)v205[1], 0);
            v100 = (_BYTE *)v192;
            v13 = v102;
          }
          else
          {
            v198 = *v205;
            v161 = v101(v98, v100, v99);
            v100 = (_BYTE *)v198;
            v13 = v161;
          }
          if ( v13 )
            goto LABEL_86;
          goto LABEL_113;
        case '>':
          v84 = a4[10];
          v204 = 257;
          v85 = (unsigned __int8 *)v205[2];
          v86 = (_BYTE *)v205[1];
          v87 = (_BYTE *)*v205;
          v88 = *(__int64 (__fastcall **)(__int64, _BYTE *, _BYTE *, unsigned __int8 *))(*(_QWORD *)v84 + 104LL);
          if ( v88 == sub_948040 )
          {
            v89 = 0;
            if ( *v87 <= 0x15u )
              v89 = *v205;
            if ( *v86 > 0x15u || *v85 > 0x15u || !v89 )
            {
LABEL_103:
              v172 = (__int64)v87;
              v180 = (__int64)v85;
              LOWORD(v213) = 257;
              v91 = sub_BD2C40(72, 3u);
              v92 = 0;
              v13 = (__int64)v91;
              if ( v91 )
                sub_B4DFA0((__int64)v91, v172, (__int64)v86, v180, (__int64)&v209, 0, 0, 0);
              (*(void (__fastcall **)(__int64, __int64, int *, __int64, __int64, __int64))(*(_QWORD *)a4[11] + 16LL))(
                a4[11],
                v13,
                v203,
                a4[7],
                a4[8],
                v92);
              v93 = 16LL * *((unsigned int *)a4 + 2);
              v94 = *a4;
              v95 = v94 + v93;
              while ( v95 != v94 )
              {
                v96 = *(_QWORD *)(v94 + 8);
                v97 = *(_DWORD *)v94;
                v94 += 16;
                sub_B99FD0(v13, v97, v96);
              }
              goto LABEL_86;
            }
            v179 = *v205;
            v191 = (unsigned __int8 *)v205[2];
            v90 = sub_AD5A90(v89, (_BYTE *)v205[1], v191, 0);
            v85 = v191;
            v87 = (_BYTE *)v179;
            v13 = v90;
          }
          else
          {
            v185 = (unsigned __int8 *)v205[2];
            v199 = *v205;
            v162 = v88(v84, v87, v86, v85);
            v85 = v185;
            v87 = (_BYTE *)v199;
            v13 = v162;
          }
          if ( v13 )
            goto LABEL_86;
          goto LABEL_103;
        case '?':
          v202 = 257;
          v78 = (unsigned __int8 *)v205[2];
          v79 = (_BYTE *)*v205;
          v190 = (_BYTE *)v205[1];
          v209 = &v211;
          v210 = 0x1000000000LL;
          sub_B4E3E0(v78, (__int64 *)&v209);
          v80 = a4[10];
          v81 = (unsigned int)v210;
          v178 = v209;
          v82 = *(__int64 (__fastcall **)(__int64, _BYTE *, _BYTE *, __int64, __int64, __int64))(*(_QWORD *)v80 + 112LL);
          if ( v82 == sub_9B6630 )
          {
            if ( *v79 > 0x15u || *v190 > 0x15u )
              goto LABEL_178;
            v171 = (unsigned int)v210;
            v83 = sub_AD5CE0((__int64)v79, (__int64)v190, v209, (unsigned int)v210, 0);
            v81 = v171;
            v13 = v83;
          }
          else
          {
            v175 = (unsigned int)v210;
            v160 = ((__int64 (__fastcall *)(__int64, _BYTE *, _BYTE *, __int64 *, _QWORD))v82)(
                     v80,
                     v79,
                     v190,
                     v209,
                     (unsigned int)v210);
            v81 = v175;
            v13 = v160;
          }
          if ( v13 )
          {
LABEL_93:
            if ( v209 != &v211 )
              _libc_free((unsigned __int64)v209);
            goto LABEL_86;
          }
LABEL_178:
          v174 = v81;
          v204 = 257;
          v154 = sub_BD2C40(112, unk_3F1FE60);
          v13 = (__int64)v154;
          if ( v154 )
            sub_B4E9E0((__int64)v154, (__int64)v79, (__int64)v190, v178, v174, (__int64)v203, 0, 0);
          (*(void (__fastcall **)(__int64, __int64, _DWORD *, __int64, __int64))(*(_QWORD *)a4[11] + 16LL))(
            a4[11],
            v13,
            v201,
            a4[7],
            a4[8]);
          v155 = 16LL * *((unsigned int *)a4 + 2);
          v156 = *a4;
          v157 = v156 + v155;
          while ( v157 != v156 )
          {
            v158 = *(_QWORD *)(v156 + 8);
            v159 = *(_DWORD *)v156;
            v156 += 16;
            sub_B99FD0(v13, v159, v158);
          }
          goto LABEL_93;
        default:
          if ( v76 - 13 > 0x11 )
          {
            if ( v76 - 38 > 0xC )
              BUG();
            v77 = *(__int64 ***)(a3 + 8);
            LOWORD(v213) = 257;
            v13 = sub_31CF470(a4, v76, *v205, v77, (__int64)&v209, 0, v203[0], 0);
            goto LABEL_86;
          }
          v139 = a4[10];
          v204 = 257;
          v140 = (unsigned __int8 *)v205[1];
          v141 = (_BYTE *)*v205;
          v142 = *(__int64 (__fastcall **)(__int64, unsigned int, _BYTE *, unsigned __int8 *))(*(_QWORD *)v139 + 16LL);
          if ( v142 == sub_9202E0 )
          {
            if ( *v141 > 0x15u || *v140 > 0x15u )
            {
LABEL_170:
              LOWORD(v213) = 257;
              v13 = sub_B504D0(v76, (__int64)v141, (__int64)v140, (__int64)&v209, 0, 0);
              if ( (unsigned __int8)sub_920620(v13) )
              {
                v148 = a4[12];
                v149 = *((_DWORD *)a4 + 26);
                if ( v148 )
                  sub_B99FD0(v13, 3u, v148);
                sub_B45150(v13, v149);
              }
              (*(void (__fastcall **)(__int64, __int64, int *, __int64, __int64))(*(_QWORD *)a4[11] + 16LL))(
                a4[11],
                v13,
                v203,
                a4[7],
                a4[8]);
              v150 = *a4 + 16LL * *((unsigned int *)a4 + 2);
              if ( *a4 != v150 )
              {
                v151 = *a4;
                do
                {
                  v152 = *(_QWORD *)(v151 + 8);
                  v153 = *(_DWORD *)v151;
                  v151 += 16;
                  sub_B99FD0(v13, v153, v152);
                }
                while ( v150 != v151 );
              }
LABEL_86:
              v60 = v205;
              if ( v205 == (__int64 *)v207 )
                break;
              goto LABEL_64;
            }
            v183 = *v205;
            v196 = (unsigned __int8 *)v205[1];
            v143 = sub_AC47B0(v76);
            v144 = v183;
            v145 = v196;
            v146 = (unsigned __int8 *)v183;
            v184 = v196;
            v197 = (_BYTE *)v144;
            if ( v143 )
              v147 = sub_AD5570(v76, (__int64)v146, v145, 0, 0);
            else
              v147 = sub_AABE40(v76, v146, v145);
            v141 = v197;
            v140 = v184;
            v13 = v147;
          }
          else
          {
            v186 = (unsigned __int8 *)v205[1];
            v200 = *v205;
            v163 = v142(v139, v76, v141, v140);
            v140 = v186;
            v141 = (_BYTE *)v200;
            v13 = v163;
          }
          if ( v13 )
            goto LABEL_86;
          goto LABEL_170;
      }
    }
  }
LABEL_11:
  v210 = 2;
  v211 = 0;
  v212 = a3;
  if ( a3 != -8192 && a3 != -4096 )
    sub_BD73F0((__int64)&v210);
  v17 = *(_DWORD *)(v4 + 104);
  v18 = v4 + 80;
  v213 = v4 + 80;
  v209 = (__int64 *)&unk_4A34DD0;
  if ( !v17 )
  {
    ++*(_QWORD *)(v4 + 80);
    goto LABEL_16;
  }
  v20 = v212;
  v35 = *(_QWORD *)(v4 + 88);
  v36 = (v17 - 1) & (((unsigned int)v212 >> 9) ^ ((unsigned int)v212 >> 4));
  v37 = (_QWORD *)(v35 + 48LL * v36);
  v38 = v37[3];
  if ( v212 != v38 )
  {
    v113 = 1;
    v21 = 0;
    while ( v38 != -4096 )
    {
      if ( !v21 && v38 == -8192 )
        v21 = v37;
      v36 = (v17 - 1) & (v113 + v36);
      v37 = (_QWORD *)(v35 + 48LL * v36);
      v38 = v37[3];
      if ( v212 == v38 )
        goto LABEL_38;
      ++v113;
    }
    if ( !v21 )
      v21 = v37;
    v114 = *(_DWORD *)(v4 + 96);
    ++*(_QWORD *)(v4 + 80);
    v22 = v114 + 1;
    if ( 4 * (v114 + 1) < 3 * v17 )
    {
      if ( v17 - *(_DWORD *)(v4 + 100) - v22 > v17 >> 3 )
      {
LABEL_19:
        *(_DWORD *)(v4 + 96) = v22;
        if ( v21[3] == -4096 )
        {
          v24 = v21 + 1;
          if ( v20 != -4096 )
          {
LABEL_24:
            v21[3] = v20;
            if ( v20 != 0 && v20 != -4096 && v20 != -8192 )
              sub_BD6050(v24, v210 & 0xFFFFFFFFFFFFFFF8LL);
            v20 = v212;
          }
        }
        else
        {
          --*(_DWORD *)(v4 + 100);
          v23 = v21[3];
          if ( v23 != v20 )
          {
            v24 = v21 + 1;
            if ( v23 != -4096 && v23 != 0 && v23 != -8192 )
            {
              sub_BD60C0(v21 + 1);
              v20 = v212;
            }
            goto LABEL_24;
          }
        }
        v25 = v213;
        v26 = v21 + 5;
        v21[5] = 0;
        v21[4] = v25;
        goto LABEL_39;
      }
      sub_31CF910(v18, v17);
      v115 = *(_DWORD *)(v4 + 104);
      if ( !v115 )
        goto LABEL_17;
      v20 = v212;
      v116 = v115 - 1;
      v117 = *(_QWORD *)(v4 + 88);
      v63 = 0;
      v118 = 1;
      v119 = v116 & (((unsigned int)v212 >> 9) ^ ((unsigned int)v212 >> 4));
      v21 = (_QWORD *)(v117 + 48LL * v119);
      v120 = v21[3];
      if ( v120 == v212 )
        goto LABEL_18;
      while ( v120 != -4096 )
      {
        if ( v120 == -8192 && !v63 )
          v63 = v21;
        v119 = v116 & (v118 + v119);
        v21 = (_QWORD *)(v117 + 48LL * v119);
        v120 = v21[3];
        if ( v212 == v120 )
          goto LABEL_18;
        ++v118;
      }
      goto LABEL_68;
    }
LABEL_16:
    sub_31CF910(v18, 2 * v17);
    v19 = *(_DWORD *)(v4 + 104);
    if ( !v19 )
    {
LABEL_17:
      v20 = v212;
      v21 = 0;
LABEL_18:
      v22 = *(_DWORD *)(v4 + 96) + 1;
      goto LABEL_19;
    }
    v20 = v212;
    v61 = v19 - 1;
    v62 = *(_QWORD *)(v4 + 88);
    v63 = 0;
    v64 = 1;
    v65 = (v19 - 1) & (((unsigned int)v212 >> 9) ^ ((unsigned int)v212 >> 4));
    v21 = (_QWORD *)(v62 + 48LL * v65);
    v66 = v21[3];
    if ( v212 == v66 )
      goto LABEL_18;
    while ( v66 != -4096 )
    {
      if ( v66 == -8192 && !v63 )
        v63 = v21;
      v65 = v61 & (v64 + v65);
      v21 = (_QWORD *)(v62 + 48LL * v65);
      v66 = v21[3];
      if ( v212 == v66 )
        goto LABEL_18;
      ++v64;
    }
LABEL_68:
    if ( v63 )
      v21 = v63;
    goto LABEL_18;
  }
LABEL_38:
  v26 = v37 + 5;
LABEL_39:
  v209 = (__int64 *)&unk_49DB368;
  if ( v20 != -4096 && v20 != 0 && v20 != -8192 )
    sub_BD60C0(&v210);
  *v26 = v13;
  return v13;
}
