// Function: sub_37CD070
// Address: 0x37cd070
//
void __fastcall sub_37CD070(__int64 a1, __int64 a2, __int64 a3, char **a4)
{
  __int64 v4; // r13
  __int64 v5; // rax
  unsigned __int8 v6; // dl
  char *v7; // r14
  __int64 v8; // rbx
  __int64 v9; // r15
  __int64 v10; // rbx
  int v11; // r14d
  unsigned int i; // r12d
  __int64 v13; // r8
  unsigned int v14; // eax
  int v15; // edx
  __int64 v16; // r8
  int v17; // edi
  unsigned int v18; // edx
  int *v19; // rcx
  int v20; // esi
  __int64 v21; // r9
  char *v22; // rbx
  unsigned __int64 v23; // r14
  int *v24; // rax
  int *v25; // r15
  _DWORD *v26; // rdi
  __int64 v27; // rsi
  __int64 v28; // rax
  __int64 v29; // rax
  __int64 v30; // rbx
  int *v31; // rax
  __int64 v32; // rcx
  __int64 v33; // r8
  char v34; // r15
  __int64 v35; // rcx
  __int64 v36; // rdx
  int *v37; // rax
  __int64 v38; // r12
  __int64 v39; // rax
  unsigned int *j; // r14
  unsigned int v41; // edx
  __int64 v42; // rsi
  int v43; // eax
  unsigned int v44; // r8d
  unsigned int v45; // ecx
  __int64 v46; // r9
  int *v47; // rbx
  int v48; // edi
  unsigned __int64 v49; // rdi
  __int64 v50; // rax
  int v51; // r9d
  __int64 v52; // r10
  int v53; // ebx
  int v54; // r11d
  __int64 v55; // r8
  __int64 v56; // rbx
  unsigned int v57; // edx
  __int64 v58; // rcx
  int v59; // eax
  int *v60; // rcx
  int v61; // eax
  __int64 v62; // rax
  int v63; // edx
  unsigned __int64 v64; // rax
  unsigned __int64 v65; // r11
  _QWORD *v66; // r13
  __int64 v67; // r12
  __int64 v68; // rax
  bool v69; // al
  int *v70; // rbx
  int *v71; // rax
  int *v72; // r13
  char *v73; // rdi
  __int64 v74; // rax
  char *v75; // rdx
  int v76; // esi
  unsigned __int64 v77; // rdi
  char *v78; // r14
  char *v79; // r15
  __int64 v80; // rax
  unsigned __int64 v81; // r10
  int *v82; // r12
  unsigned int v83; // esi
  int *v84; // r14
  __int64 v85; // r15
  __int64 v86; // rax
  bool v87; // al
  __int64 v88; // rdi
  __int64 v89; // rcx
  __int64 v90; // rdx
  __int64 v91; // rdx
  int *v92; // rdi
  int *v93; // rax
  __int64 v94; // rsi
  char *v95; // r15
  __int64 v96; // r8
  int v97; // eax
  unsigned __int64 v98; // rbx
  __int64 v99; // rdx
  unsigned __int64 v100; // rcx
  __int64 v101; // rax
  __int64 v102; // rsi
  __int64 v103; // rdi
  __int64 v104; // rcx
  __int64 v105; // rcx
  int *v106; // rbx
  __int64 v107; // r15
  int *v108; // rdi
  int *v109; // rax
  int v110; // ecx
  unsigned int v111; // esi
  char *v112; // rax
  int v113; // edx
  int v114; // edx
  unsigned __int64 v115; // rdi
  __int64 v116; // r14
  __int16 v117; // r13
  char *v118; // rdi
  int v119; // ecx
  int v120; // r9d
  __int64 v121; // r15
  unsigned int v122; // r12d
  __int64 v123; // [rsp+10h] [rbp-210h]
  __int64 v124; // [rsp+10h] [rbp-210h]
  __int64 v125; // [rsp+10h] [rbp-210h]
  __int64 *v127; // [rsp+28h] [rbp-1F8h]
  char *v129; // [rsp+38h] [rbp-1E8h]
  unsigned __int64 v130; // [rsp+38h] [rbp-1E8h]
  __int64 v131; // [rsp+48h] [rbp-1D8h]
  __int64 v132; // [rsp+50h] [rbp-1D0h]
  __int64 v133; // [rsp+50h] [rbp-1D0h]
  char *v134; // [rsp+58h] [rbp-1C8h]
  __int64 v135; // [rsp+58h] [rbp-1C8h]
  int *v136; // [rsp+58h] [rbp-1C8h]
  size_t n; // [rsp+60h] [rbp-1C0h]
  size_t na; // [rsp+60h] [rbp-1C0h]
  size_t nb; // [rsp+60h] [rbp-1C0h]
  __int64 v140; // [rsp+68h] [rbp-1B8h]
  char *v141; // [rsp+68h] [rbp-1B8h]
  __int64 v142; // [rsp+68h] [rbp-1B8h]
  unsigned int v143; // [rsp+78h] [rbp-1A8h] BYREF
  unsigned int v144; // [rsp+7Ch] [rbp-1A4h] BYREF
  __int64 *v145[2]; // [rsp+80h] [rbp-1A0h] BYREF
  __int64 v146; // [rsp+90h] [rbp-190h]
  __int64 v147; // [rsp+A0h] [rbp-180h] BYREF
  int v148; // [rsp+A8h] [rbp-178h] BYREF
  __int16 v149; // [rsp+B0h] [rbp-170h]
  char v150; // [rsp+B8h] [rbp-168h]
  char *v151; // [rsp+C0h] [rbp-160h]
  int v152[12]; // [rsp+D0h] [rbp-150h] BYREF
  int *v153; // [rsp+100h] [rbp-120h] BYREF
  __int64 v154; // [rsp+108h] [rbp-118h]
  _BYTE v155[48]; // [rsp+110h] [rbp-110h] BYREF
  char *v156; // [rsp+140h] [rbp-E0h] BYREF
  __int64 v157; // [rsp+148h] [rbp-D8h]
  _BYTE v158[48]; // [rsp+150h] [rbp-D0h] BYREF
  __m128i v159; // [rsp+180h] [rbp-A0h] BYREF
  char *v160; // [rsp+190h] [rbp-90h] BYREF
  unsigned __int64 v161[2]; // [rsp+198h] [rbp-88h] BYREF
  char v162; // [rsp+1A8h] [rbp-78h] BYREF
  char *v163; // [rsp+1B0h] [rbp-70h]
  __m128i v164; // [rsp+1D8h] [rbp-48h]

  v4 = a1;
  v5 = sub_B10CD0(a2 + 56);
  v6 = *(_BYTE *)(v5 - 16);
  if ( (v6 & 2) == 0 )
  {
    if ( ((*(_WORD *)(v5 - 16) >> 6) & 0xF) != 2 )
      goto LABEL_3;
    v50 = v5 - 16 - 8LL * ((v6 >> 2) & 0xF);
LABEL_53:
    v7 = *(char **)(v50 + 8);
    goto LABEL_4;
  }
  if ( *(_DWORD *)(v5 - 24) == 2 )
  {
    v50 = *(_QWORD *)(v5 - 32);
    goto LABEL_53;
  }
LABEL_3:
  v7 = 0;
LABEL_4:
  v8 = sub_2E891C0(a2);
  v147 = sub_2E89170(a2);
  if ( v8 )
    sub_AF47B0((__int64)&v148, *(unsigned __int64 **)(v8 + 16), *(unsigned __int64 **)(v8 + 24));
  else
    v150 = 0;
  v9 = *(_QWORD *)(a1 + 32);
  v151 = v7;
  v10 = *(unsigned int *)(v9 + 24);
  v140 = *(_QWORD *)(v9 + 8);
  if ( (_DWORD)v10 )
  {
    v162 = 0;
    v160 = 0;
    v163 = 0;
    v152[0] = 0;
    if ( v150 )
    {
      LOWORD(v152[0]) = v149;
      HIWORD(v152[0]) = v148;
    }
    v156 = v7;
    v11 = 1;
    v153 = (int *)v147;
    for ( i = (v10 - 1) & sub_F11290((__int64 *)&v153, v152, (__int64 *)&v156);
          !sub_F34140((__int64)&v147, v140 + 48LL * i);
          i = (v10 - 1) & v122 )
    {
      if ( sub_F34140(v140 + 48LL * i, (__int64)&v160) )
      {
        v4 = a1;
        v10 = *(unsigned int *)(v9 + 24);
        v140 = *(_QWORD *)(v9 + 8);
        goto LABEL_171;
      }
      v122 = v11 + i;
      ++v11;
    }
    v13 = v140 + 48LL * i;
    v4 = a1;
    if ( v13 )
      goto LABEL_12;
    v10 = *(unsigned int *)(v9 + 24);
    v140 = *(_QWORD *)(v9 + 8);
  }
LABEL_171:
  v13 = v140 + 48 * v10;
LABEL_12:
  v14 = *(_DWORD *)(v13 + 40);
  v15 = *(_DWORD *)(v4 + 3608);
  v16 = *(_QWORD *)(v4 + 3592);
  v143 = v14;
  if ( v15 )
  {
    v17 = v15 - 1;
    v18 = (v15 - 1) & (37 * v14);
    v19 = (int *)(v16 + 4LL * v18);
    v20 = *v19;
    if ( v14 == *v19 )
    {
LABEL_14:
      *v19 = -2;
      --*(_DWORD *)(v4 + 3600);
      ++*(_DWORD *)(v4 + 3604);
    }
    else
    {
      v119 = 1;
      while ( v20 != -1 )
      {
        v120 = v119 + 1;
        v18 = v17 & (v119 + v18);
        v19 = (int *)(v16 + 4LL * v18);
        v20 = *v19;
        if ( v14 == *v19 )
          goto LABEL_14;
        v119 = v120;
      }
    }
  }
  v127 = (__int64 *)(v4 + 3440);
  sub_37BC1E0(v145, (__int64 *)(v4 + 3440), (int *)&v143);
  v132 = v146;
  if ( v146 == *(_QWORD *)(v4 + 3448) + 88LL * *(unsigned int *)(v4 + 3464) )
  {
    v29 = *((unsigned int *)a4 + 2);
    if ( !(_DWORD)v29 )
      return;
  }
  else
  {
    sub_37B9C30((__int64)&v160, (__int64 *)(v146 + 8));
    v22 = v160;
    v23 = v161[0];
    v134 = v163;
    if ( v163 != v160 )
    {
      v123 = v4;
      n = v4 + 3408;
      while ( 1 )
      {
        LODWORD(v156) = *(_DWORD *)v22;
        v24 = sub_37BEF10(n, (int *)&v156);
        v25 = v24;
        if ( *((_QWORD *)v24 + 9) )
        {
          v65 = *((_QWORD *)v24 + 6);
          v66 = v24 + 10;
          if ( !v65 )
          {
            v21 = (__int64)(v24 + 10);
            v69 = 1;
            goto LABEL_91;
          }
          v21 = (__int64)(v24 + 10);
          v67 = *((_QWORD *)v24 + 6);
          while ( 1 )
          {
            while ( *(_DWORD *)(v67 + 32) < v143 )
            {
              v67 = *(_QWORD *)(v67 + 24);
              if ( !v67 )
                goto LABEL_90;
            }
            v68 = *(_QWORD *)(v67 + 16);
            if ( *(_DWORD *)(v67 + 32) <= v143 )
              break;
            v21 = v67;
            v67 = *(_QWORD *)(v67 + 16);
            if ( !v68 )
            {
LABEL_90:
              v69 = v66 == (_QWORD *)v21;
LABEL_91:
              if ( *((_QWORD *)v25 + 7) == v21 && v69 )
              {
LABEL_93:
                sub_37B80B0(v65);
                *((_QWORD *)v25 + 6) = 0;
                *((_QWORD *)v25 + 7) = v66;
                *((_QWORD *)v25 + 8) = v66;
                *((_QWORD *)v25 + 9) = 0;
              }
              goto LABEL_28;
            }
          }
          v102 = *(_QWORD *)(v67 + 24);
          if ( v102 )
          {
            do
            {
              while ( 1 )
              {
                v103 = *(_QWORD *)(v102 + 16);
                v104 = *(_QWORD *)(v102 + 24);
                if ( v143 < *(_DWORD *)(v102 + 32) )
                  break;
                v102 = *(_QWORD *)(v102 + 24);
                if ( !v104 )
                  goto LABEL_148;
              }
              v21 = v102;
              v102 = *(_QWORD *)(v102 + 16);
            }
            while ( v103 );
          }
LABEL_148:
          while ( v68 )
          {
            while ( 1 )
            {
              v105 = *(_QWORD *)(v68 + 24);
              if ( v143 <= *(_DWORD *)(v68 + 32) )
                break;
              v68 = *(_QWORD *)(v68 + 24);
              if ( !v105 )
                goto LABEL_151;
            }
            v67 = v68;
            v68 = *(_QWORD *)(v68 + 16);
          }
LABEL_151:
          if ( *((_QWORD *)v25 + 7) == v67 && v66 == (_QWORD *)v21 )
            goto LABEL_93;
          if ( v21 != v67 )
          {
            v129 = v22;
            v106 = v25;
            v107 = v21;
            do
            {
              v108 = (int *)v67;
              v67 = sub_220EF30(v67);
              v109 = sub_220F330(v108, v66);
              j_j___libc_free_0((unsigned __int64)v109);
              --*((_QWORD *)v106 + 9);
            }
            while ( v67 != v107 );
            v22 = v129;
          }
LABEL_28:
          while ( 2 )
          {
            v22 += 48;
            if ( (char *)v23 != v22 )
            {
LABEL_27:
              if ( v22[40] )
                continue;
            }
            break;
          }
        }
        else
        {
          v26 = *(_DWORD **)v24;
          v27 = (unsigned int)v24[2];
          v28 = *(_QWORD *)v24 + 4 * v27;
          if ( v26 == (_DWORD *)v28 )
            goto LABEL_28;
          while ( *v26 != v143 )
          {
            if ( (_DWORD *)v28 == ++v26 )
              goto LABEL_28;
          }
          if ( (_DWORD *)v28 == v26 )
            goto LABEL_28;
          v21 = (__int64)(v26 + 1);
          if ( (_DWORD *)v28 != v26 + 1 )
          {
            memmove(v26, v26 + 1, v28 - v21);
            LODWORD(v27) = v25[2];
          }
          v22 += 48;
          v25[2] = v27 - 1;
          if ( (char *)v23 != v22 )
            goto LABEL_27;
        }
        if ( v134 == v22 )
        {
          v4 = v123;
          break;
        }
      }
    }
    v29 = *((unsigned int *)a4 + 2);
    if ( !(_DWORD)v29 )
    {
      if ( v132 != *(_QWORD *)(v4 + 3448) + 88LL * *(unsigned int *)(v4 + 3464) )
      {
        v115 = *(_QWORD *)(v132 + 8);
        if ( v115 != v132 + 24 )
          _libc_free(v115);
        *(_DWORD *)v132 = -2;
        --*(_DWORD *)(v4 + 3456);
        ++*(_DWORD *)(v4 + 3460);
      }
      return;
    }
  }
  v30 = v132;
  v153 = (int *)v155;
  v154 = 0x600000000LL;
  v141 = *a4;
  v131 = (__int64)&(*a4)[48 * v29];
  while ( 2 )
  {
    v34 = v141[40];
    if ( v34 )
      goto LABEL_34;
    v35 = *(_QWORD *)(v4 + 3136);
    na = v4 + 3408;
    v36 = *(_QWORD *)(*(_QWORD *)(v4 + 16) + 32LL);
    v144 = *(_DWORD *)v141;
    if ( *(_QWORD *)(v35 + 8LL * v144) == *(_QWORD *)(v36 + 8LL * v144) )
      goto LABEL_33;
    v37 = sub_37BEF10(na, (int *)&v144);
    if ( *((_QWORD *)v37 + 9) )
    {
      v38 = *((_QWORD *)v37 + 7);
      v39 = (__int64)(v37 + 10);
    }
    else
    {
      v38 = *(_QWORD *)v37;
      v34 = 1;
      v39 = *(_QWORD *)v37 + 4LL * (unsigned int)v37[2];
    }
    v135 = v39;
    if ( v34 )
      goto LABEL_50;
LABEL_40:
    if ( v38 != v135 )
    {
      for ( j = (unsigned int *)(v38 + 32); ; j = (unsigned int *)v38 )
      {
        v41 = *(_DWORD *)(v4 + 3464);
        v42 = *(_QWORD *)(v4 + 3448);
        if ( !v41 )
          goto LABEL_48;
        v43 = *j;
        v44 = v41 - 1;
        v45 = (v41 - 1) & (37 * *j);
        v46 = 5LL * v45;
        v47 = (int *)(v42 + 88LL * v45);
        v48 = *v47;
        if ( *v47 == *j )
        {
          if ( v47 == (int *)(v42 + 88LL * v41) )
            goto LABEL_45;
LABEL_59:
          v55 = *((_QWORD *)v47 + 1);
          v56 = v55 + 48LL * (unsigned int)v47[4];
          if ( v55 != v56 )
          {
            while ( *(_BYTE *)(v55 + 40) )
            {
              v55 += 48;
              if ( v56 == v55 )
                goto LABEL_75;
            }
            if ( v56 != v55 )
            {
              do
              {
                v57 = *(_DWORD *)v55;
                if ( v144 != *(_DWORD *)v55 )
                {
                  v58 = (unsigned int)v154;
                  v59 = v154;
                  if ( (unsigned int)v154 >= (unsigned __int64)HIDWORD(v154) )
                  {
                    v64 = ((unsigned __int64)*j << 32) | v57;
                    if ( HIDWORD(v154) < (unsigned __int64)(unsigned int)v154 + 1 )
                    {
                      v125 = v55;
                      v130 = ((unsigned __int64)*j << 32) | v57;
                      sub_C8D5F0((__int64)&v153, v155, (unsigned int)v154 + 1LL, 8u, v55, v46);
                      v58 = (unsigned int)v154;
                      v55 = v125;
                      v64 = v130;
                    }
                    *(_QWORD *)&v153[2 * v58] = v64;
                    LODWORD(v154) = v154 + 1;
                  }
                  else
                  {
                    v60 = &v153[2 * (unsigned int)v154];
                    if ( v60 )
                    {
                      v61 = *j;
                      *v60 = v57;
                      v60[1] = v61;
                      v59 = v154;
                    }
                    LODWORD(v154) = v59 + 1;
                  }
                }
                v62 = v55 + 48;
                if ( v56 == v55 + 48 )
                  break;
                while ( 1 )
                {
                  v55 = v62;
                  if ( !*(_BYTE *)(v62 + 40) )
                    break;
                  v62 += 48;
                  if ( v56 == v62 )
                    goto LABEL_74;
                }
              }
              while ( v56 != v62 );
LABEL_74:
              v42 = *(_QWORD *)(v4 + 3448);
              v41 = *(_DWORD *)(v4 + 3464);
            }
          }
        }
        else
        {
          v51 = *v47;
          LODWORD(v52) = (v41 - 1) & (37 * *j);
          v53 = 1;
          while ( v51 != -1 )
          {
            v54 = v53 + 1;
            v52 = v44 & ((_DWORD)v52 + v53);
            v47 = (int *)(v42 + 88 * v52);
            v51 = *v47;
            if ( v43 == *v47 )
            {
              v46 = v42 + 88LL * v41;
              if ( v47 == (int *)v46 )
                goto LABEL_77;
              goto LABEL_59;
            }
            v53 = v54;
          }
        }
LABEL_75:
        if ( !v41 )
          goto LABEL_48;
        v43 = *j;
        v44 = v41 - 1;
        v45 = (v41 - 1) & (37 * *j);
        v47 = (int *)(v42 + 88LL * v45);
        v48 = *v47;
        if ( *j == *v47 )
        {
LABEL_45:
          v49 = *((_QWORD *)v47 + 1);
          if ( (int *)v49 != v47 + 6 )
            _libc_free(v49);
          *v47 = -2;
          --*(_DWORD *)(v4 + 3456);
          ++*(_DWORD *)(v4 + 3460);
          goto LABEL_48;
        }
LABEL_77:
        v63 = 1;
        while ( v48 != -1 )
        {
          v45 = v44 & (v63 + v45);
          v47 = (int *)(v42 + 88LL * v45);
          v48 = *v47;
          if ( v43 == *v47 )
            goto LABEL_45;
          ++v63;
        }
LABEL_48:
        if ( !v34 )
        {
          v38 = sub_220EF30(v38);
          goto LABEL_40;
        }
        v38 += 4;
LABEL_50:
        if ( v38 == v135 )
          break;
      }
    }
    v70 = v153;
    v136 = &v153[2 * (unsigned int)v154];
    if ( v136 == v153 )
      goto LABEL_107;
    v124 = v4;
    do
    {
      v71 = sub_37BEF10(na, v70);
      v72 = v71;
      if ( *((_QWORD *)v71 + 9) )
      {
        v81 = *((_QWORD *)v71 + 6);
        v82 = v71 + 10;
        if ( v81 )
        {
          v83 = v70[1];
          v84 = v71 + 10;
          v85 = *((_QWORD *)v71 + 6);
          while ( 1 )
          {
            while ( *(_DWORD *)(v85 + 32) < v83 )
            {
              v85 = *(_QWORD *)(v85 + 24);
              if ( !v85 )
                goto LABEL_116;
            }
            v86 = *(_QWORD *)(v85 + 16);
            if ( *(_DWORD *)(v85 + 32) <= v83 )
              break;
            v84 = (int *)v85;
            v85 = *(_QWORD *)(v85 + 16);
            if ( !v86 )
            {
LABEL_116:
              v87 = v84 == v82;
              goto LABEL_117;
            }
          }
          v88 = *(_QWORD *)(v85 + 24);
          if ( v88 )
          {
            do
            {
              while ( 1 )
              {
                v89 = *(_QWORD *)(v88 + 16);
                v90 = *(_QWORD *)(v88 + 24);
                if ( v83 < *(_DWORD *)(v88 + 32) )
                  break;
                v88 = *(_QWORD *)(v88 + 24);
                if ( !v90 )
                  goto LABEL_125;
              }
              v84 = (int *)v88;
              v88 = *(_QWORD *)(v88 + 16);
            }
            while ( v89 );
          }
LABEL_125:
          while ( v86 )
          {
            while ( 1 )
            {
              v91 = *(_QWORD *)(v86 + 24);
              if ( v83 <= *(_DWORD *)(v86 + 32) )
                break;
              v86 = *(_QWORD *)(v86 + 24);
              if ( !v91 )
                goto LABEL_128;
            }
            v85 = v86;
            v86 = *(_QWORD *)(v86 + 16);
          }
LABEL_128:
          if ( *((_QWORD *)v72 + 7) == v85 && v82 == v84 )
          {
LABEL_119:
            sub_37B80B0(v81);
            *((_QWORD *)v72 + 6) = 0;
            *((_QWORD *)v72 + 7) = v82;
            *((_QWORD *)v72 + 8) = v82;
            *((_QWORD *)v72 + 9) = 0;
            goto LABEL_105;
          }
          for ( ; (int *)v85 != v84; --*((_QWORD *)v72 + 9) )
          {
            v92 = (int *)v85;
            v85 = sub_220EF30(v85);
            v93 = sub_220F330(v92, v82);
            j_j___libc_free_0((unsigned __int64)v93);
          }
        }
        else
        {
          v84 = v71 + 10;
          v87 = 1;
LABEL_117:
          if ( *((int **)v72 + 7) == v84 && v87 )
            goto LABEL_119;
        }
      }
      else
      {
        v73 = *(char **)v71;
        v74 = (unsigned int)v71[2];
        v75 = &v73[4 * v74];
        v76 = v74;
        if ( v73 != v75 )
        {
          while ( *(_DWORD *)v73 != v70[1] )
          {
            v73 += 4;
            if ( v75 == v73 )
              goto LABEL_105;
          }
          if ( v73 != v75 )
          {
            if ( v75 != v73 + 4 )
            {
              memmove(v73, v73 + 4, v75 - (v73 + 4));
              v76 = v72[2];
            }
            v72[2] = v76 - 1;
          }
        }
      }
LABEL_105:
      v70 += 2;
    }
    while ( v136 != v70 );
    v4 = v124;
LABEL_107:
    LODWORD(v154) = 0;
    sub_37BC1E0(v145, v127, (int *)&v143);
    v30 = v146;
    v152[0] = v144;
    if ( (unsigned __int8)sub_37BDB10(na, v152, &v156) )
    {
      v77 = *((_QWORD *)v156 + 7);
      v78 = v156 + 8;
      v79 = v156 + 48;
      goto LABEL_109;
    }
    v110 = *(_DWORD *)(v4 + 3424);
    v111 = *(_DWORD *)(v4 + 3432);
    v112 = v156;
    ++*(_QWORD *)(v4 + 3408);
    v113 = v110 + 1;
    v160 = v112;
    if ( 4 * (v110 + 1) >= 3 * v111 )
    {
      v121 = na;
      sub_37BEC40(na, 2 * v111);
LABEL_194:
      sub_37BDB10(v121, v152, &v160);
      v113 = *(_DWORD *)(v4 + 3424) + 1;
      v112 = v160;
      goto LABEL_163;
    }
    if ( v111 - *(_DWORD *)(v4 + 3428) - v113 <= v111 >> 3 )
    {
      v121 = na;
      sub_37BEC40(na, v111);
      goto LABEL_194;
    }
LABEL_163:
    *(_DWORD *)(v4 + 3424) = v113;
    if ( *(_DWORD *)v112 != -1 )
      --*(_DWORD *)(v4 + 3428);
    v114 = v152[0];
    v79 = v112 + 48;
    v77 = 0;
    *(_OWORD *)(v112 + 40) = 0;
    v78 = v112 + 8;
    *(_DWORD *)v112 = v114;
    *((_QWORD *)v112 + 1) = v112 + 24;
    *((_QWORD *)v112 + 2) = 0x400000000LL;
    *((_DWORD *)v112 + 12) = 0;
    *((_QWORD *)v112 + 7) = 0;
    *((_QWORD *)v112 + 8) = v112 + 48;
    *((_QWORD *)v112 + 9) = v112 + 48;
    *((_QWORD *)v112 + 10) = 0;
    *(_OWORD *)(v112 + 24) = 0;
LABEL_109:
    *((_DWORD *)v78 + 2) = 0;
    sub_37B80B0(v77);
    *((_QWORD *)v78 + 7) = v79;
    v80 = v144;
    *((_QWORD *)v78 + 6) = 0;
    *((_QWORD *)v78 + 8) = v79;
    *((_QWORD *)v78 + 9) = 0;
    *(_QWORD *)(*(_QWORD *)(v4 + 3136) + 8 * v80) = *(_QWORD *)(*(_QWORD *)(*(_QWORD *)(v4 + 16) + 32LL) + 8 * v80);
LABEL_33:
    v31 = sub_37BEF10(na, (int *)&v144);
    sub_2B5C0F0((__int64)&v160, (__int64)v31, &v143, v32, v33);
LABEL_34:
    v141 += 48;
    if ( (char *)v131 != v141 )
      continue;
    break;
  }
  v133 = v30;
  v94 = v30;
  v95 = *a4;
  v96 = 48LL * *((unsigned int *)a4 + 2);
  v97 = 48 * *((_DWORD *)a4 + 2);
  v98 = 0xAAAAAAAAAAAAAAABLL * (v96 >> 4);
  if ( v94 != *(_QWORD *)(v4 + 3448) + 88LL * *(unsigned int *)(v4 + 3464) )
  {
    LODWORD(v99) = 0;
    v100 = *(unsigned int *)(v133 + 20);
    *(_DWORD *)(v133 + 16) = 0;
    v101 = 0;
    if ( v98 > v100 )
    {
      v142 = v96;
      sub_C8D5F0(v133 + 8, (const void *)(v133 + 24), 0xAAAAAAAAAAAAAAABLL * (v96 >> 4), 0x30u, v96, v21);
      v99 = *(unsigned int *)(v133 + 16);
      v96 = v142;
      v101 = 48 * v99;
    }
    if ( v96 )
    {
      memcpy((void *)(*(_QWORD *)(v133 + 8) + v101), v95, v96);
      LODWORD(v99) = *(_DWORD *)(v133 + 16);
    }
    *(_DWORD *)(v133 + 16) = v99 + v98;
    *(_QWORD *)(v133 + 72) = *(_QWORD *)a3;
    *(_WORD *)(v133 + 80) = *(_WORD *)(a3 + 8);
    goto LABEL_140;
  }
  v156 = v158;
  v116 = *(_QWORD *)a3;
  v117 = *(_WORD *)(a3 + 8);
  v157 = 0x100000000LL;
  if ( (unsigned __int64)v96 > 0x30 )
  {
    nb = v96;
    sub_C8D5F0((__int64)&v156, v158, 0xAAAAAAAAAAAAAAABLL * (v96 >> 4), 0x30u, v96, v21);
    v96 = nb;
    v118 = &v156[48 * (unsigned int)v157];
LABEL_187:
    memcpy(v118, v95, v96);
    v97 = v157;
    goto LABEL_178;
  }
  if ( v96 )
  {
    v118 = v158;
    goto LABEL_187;
  }
LABEL_178:
  v159.m128i_i16[4] = v117;
  LODWORD(v157) = v98 + v97;
  v159.m128i_i64[0] = v116;
  LODWORD(v160) = v143;
  v161[0] = (unsigned __int64)&v162;
  v161[1] = 0x100000000LL;
  if ( (_DWORD)v98 + v97 )
    sub_37B6900((__int64)v161, &v156, v143, 0x100000000LL, v96, v21);
  v164 = _mm_loadu_si128(&v159);
  sub_37BF2A0((__int64)v152, (__int64)v127, (int *)&v160, (__int64)v161);
  if ( (char *)v161[0] != &v162 )
    _libc_free(v161[0]);
  if ( v156 != v158 )
    _libc_free((unsigned __int64)v156);
LABEL_140:
  if ( v153 != (int *)v155 )
    _libc_free((unsigned __int64)v153);
}
